// Do not modify this page directly; instead build from https://github.com/RopeWiki/commonjs
var RWServerUrl="http://luca.ropewiki.com";var url=window.location.href.toString();var debug=url.indexOf("debug=")>=0;if(url[url.length-3]=="#"){setCookie("metric","on",360*10);setCookie("french","on",360*10);setCookie("country","on",360*10);setCookie("googtrans","/en/"+url.substr(url.length-2),360*10)}var metric=getCookie("metric");var french=getCookie("french");var urlcheckbox=getCookie("urlcheckbox");var weather=getCookie("weather");var watershed=getCookie("watershed");function rap(e,t){if(isNaN(e))return"";return e+(t?"&nbsp;":"")+"r"}function acaconv(e,t){var i=e.indexOf(")");if(i<0)return e;var n=e.indexOf("*")+1;while(n<i&&!(e.charAt(n)>="1"&&e.charAt(n)<="4"))++n;if(n>=3&&e.substr(n-3,3)=="<i>")n-=3;var a=e.substr(n,i-n).split("(");if(a.length<2)return e;var o=a[french?1:0].trim();if(t)o+=" ("+a[french?0:1].trim()+")";return e.substr(0,n)+o+e.substr(i+1)}function smallstyle(){WebViewStyle();$("#p-logo a").attr("href","#")}var sheet=document.createElement("style");sheet.id="french";sheet.innerHTML=french?" .uaca0 { display: none ; }":" .uaca1 { display: none ; }";if(document.body)document.body.appendChild(sheet);function noextraction(e){return e.indexOf("roadtripryan.com")>=0}var lastlinks=[];function loadSource(e,t){var i=document.getElementById("myddOptsDiv");var n=document.getElementById("myddOptsText");if(!n||!i)return;i.style.display="none";n.innerHTML=t;gxml.overlayman.Hide();var a=e.indexOf("ropewiki.com")>=0;var o=e;if(!a)o="http://d5a.net/rwr?gpx=off&filename=tmp&kmlnfx&kmlx="+o;var r=document.getElementById("kmlfilep");if(r)r.innerHTML=o;if(lastlinks.indexOf(e)>=0){gxml.overlayman.Show(e)}else{gxml.load(o,e);lastlinks.push(e)}var l=noextraction(e);var s=["rw","ex","noex"];var c=[a,!a&&!l,!a&&l];for(var p=0;p<s.length;++p){var m=document.getElementsByClassName("display"+s[p]);for(var d=0;d<m.length;++d)m[d].style.display=c[p]?"block":"none"}var g=["ex","noex"];for(var p=0;p<g.length;++p){var m=document.getElementsByClassName("display"+g[p]);for(var d=0;d<m.length;d++){var f=m[d].getElementsByTagName("A");for(var u=0;u<f.length;++u){var h=f[u].href;if(h.indexOf("caltopo.com")>0){var v="kmlx%253D";var y="ext%253D.kml";var w=h.indexOf(v);var k=h.indexOf(y,w+1);f[u].href=h.substr(0,w+v.length)+urlencode(e+"&")+h.substr(k)}else if(h.indexOf("d5a.net")>0){var v="kmlx%3D";var y="ext%3D.kml";var w=h.indexOf(v);var k=h.indexOf(y,w+1);f[u].href=h.substr(0,w+v.length)+e+"&"+h.substr(k)}else if(h.indexOf("/Map?pagename=")<0){f[u].href=e;f[u].innerHTML=t}}}}}function setfield(e){var t=$("#setfieldtarget input");if(t.length>0&&e)t[0].value=e.innerHTML}var locdist="locdist=";function nearbyselect(e){var t=e.parentNode.getElementsByTagName("A")[0];var i=t.href;var n=i.indexOf(locdist);var a=i.substring(0,n)+locdist+e.value;document.body.style.cursor="wait";window.location.href=a}function deftext(e){return e==null||e==""||e[0]=="&"||e[0]==" "||e.charCodeAt(0)==160}var searchmapn=-1;var searchmappt=[];function searchmap(){map.setOptions({draggableCursor:"crosshair"});var e=document.getElementById("searchinfo");if(e)e.innerHTML='<span class="rwwarningbox"><b>CLICK ON MAP TO DEFINE SEARCH AREA</b></span>';searchmapn=0}var searchmaprectangle;function searchmaprun(){map.setOptions({draggableCursor:""});searchmapn=-1;searchmappt=[];var e=document.getElementById("searchinfo");if(e)e.innerHTML='<span class="rwwarningbox"><b>SEARCHING...</b></span>';mapsearchbounds(searchmaprectangle.bounds,-1)}function mapsearchbounds(e,t){var i=document.getElementById("locsearchchk");if(map!=null&&i!=null){var n=e.getSouthWest();var a=e.getNorthEast();i.checked=true;var o="Coord:"+Math.round(n.lat()*1e3)/1e3+","+Math.round(n.lng()*1e3)/1e3+","+Math.round(a.lat()*1e3)/1e3+","+Math.round(a.lng()*1e3)/1e3;if(t>=0)o+=","+t;document.getElementById("locnameval").value=o}filtersearch()}function mapsearch(){mapsearchbounds(map.getBounds(),map.getZoom())}function fbusersearch(){var e=prompt("Please enter your Facebook name",getCookie("fbuser"));if(e){setCookie("fbuser",e);document.body.style.cursor="wait";window.location.href="http://ropewiki.com/Location?onlycuser="+e.split(" ").join("")+"%40Facebook&sortby=-Has_condition_date"}}function regsearch(){var e=document.getElementById("regnameval");if(e.value!=""&&deftext(e.value))return;var t=window.location.href;var t=t.split("#")[0].split("?")[0];var i=e.value;if(i.length>0)t+="?region="+urlencode(i);setCookie("regnameval",urlencode(i));var n=document.getElementsByClassName("submitoff");for(var a=0;a<n.length;a++)n[a].disabled=true;document.body.style.cursor="wait";window.location.href=t}function filtersearch(e){var t=window.location.href;if(typeof e!="undefined")t=e;var t=t.split("#")[0].split("?")[0];var i="";var n=document.getElementsByClassName("optionschk");if(n!=null)for(var a=0;a<n.length;a++)if(n[a].checked)i=addparam(i,n[a].id,"on");var o=document.getElementById("filterschk");if(o!=null&&o.checked){var r=document.getElementsByClassName("filtersel");for(var a=0;a<r.length;a++)if(r[a].style.display!="none"){var l=r[a].id+"flt";var s=r[a].getElementsByClassName(l);for(var c=0;c<s.length;++c){var p=s[c].selectedIndex;var m=s[c].options;i=addparam(i,r[a].id,m[p].text)}}var r=document.getElementsByClassName("filterchk");for(var a=0;a<r.length;a++){var l=r[a].id+"flt";var s=document.getElementsByClassName(l);var d=[];for(var c=0;c<s.length;c++)if(s[c].checked)d.push(s[c].id.substring(s[c].id.lastIndexOf("_")+1));i=addparam(i,r[a].id,d.join())}}var g=document.getElementById("locsearchchk");if(typeof e=="undefined")if(g!=null&&g.checked){var f=document.getElementById("locnameval").value;if(!deftext(f)){var u=document.getElementById("locdistval").value;if(deftext(u))if(f.substr(0,6)!="Coord:")u="50mi";t="http://ropewiki.com/Location";i=addparam(i,"locname",urlencode(f));if(!deftext(u))i=addparam(i,"locdist",urlencode(u))}}var h=document.getElementsByClassName("optionsurl");if(h!=null)for(var a=0;a<h.length;a++){var v=h[a].innerHTML;if(v.length>0)i=addparam(i,h[a].id,v)}if(sortby)i=addparam(i,"sortby",sortby);if(i!="")t+="?jform"+i;if(typeof e!="undefined")return t;var y=document.getElementsByClassName("submitoff");for(var a=0;a<y.length;a++)y[a].disabled=true;document.body.style.cursor="wait";window.location.href=t}function locsearch(){var e=document.getElementById("locnameval");if(e!=null&&deftext(e.value))return;filtersearch()}function toggleFilterSel(e,t){var i=e.selectedIndex;var n=e.options;if(t==null)t=n[i].text;e.value=t;for(var a=0;a<n.length;++a)if(n[a].text!=""){var o=n[a].text;var r=document.getElementsByClassName(e.id+o);for(var l=0;l<r.length;l++)r[l].style.display=o==t?"":"none"}setCookie(e.id,t);return t}function toggleFilter(e,t){if(t==null)t=document.getElementById(e).checked;document.getElementById(e).checked=t;if(t)setCookie(e,"on");else setCookie(e,"");return t}function toggleOption(e,t){checked=toggleFilter(e,t);elems=document.getElementsByClassName(e.split("chk").join("on"));for(var i=0;i<elems.length;i++)elems[i].style.display=checked?"":"none";elems=document.getElementsByClassName(e.split("chk").join("off"));for(var i=0;i<elems.length;i++)elems[i].style.display=checked?"none":"";return checked}function togglelocsearchchk(e){toggleOption(e)}function togglefilterschk(e){if(!toggleOption(e)){filtersearch()}}function toggledisplayschk(e){if(!toggleOption(e)){elems=document.getElementsByClassName(e.split("chk").join("on"));for(var t=0;t<elems.length;t++)toggleFilter(elems[t].id+"chk",false);filtersearch()}}function togglenomapchk(e){filtersearch()}function togglefulltablechk(e){filtersearch()}function addhighlight(e){for(var t=0;t<markers.length;++t)if(e.indexOf(markers[t].name)>=0){var i=markers[t];if(i.highlight)continue;var n=16;var a=new google.maps.Marker({position:i.getPosition(),icon:"http://ropewiki.com/images/e/e6/Starn_y.png",draggable:false,clickable:false,optimized:false,zIndex:i.zIndex-1});a.setMap(qmaps[i.q]);i.highlight=a;if(i.infowindow&&i.infowindow.content)i.infowindow.content=i.infowindow.content.replace('value="+"','value="*"')}var o=document.getElementsByClassName("pinicon");for(var t=0;t<o.length;++t)if(e.indexOf(o[t].id)>=0)o[t].style.backgroundImage="url(http://ropewiki.com/images/e/e6/Starn_y.png)"}var oldid="@";function addbutton(a){function o(e){var t=e.childNodes;for(var i=0;i<t.length;++i){var e=t[i];if(e.attributes)for(var n=0;n<e.attributes.length;++n){if(e.attributes[n].value.indexOf(oldid)>=0)e.attributes[n].value=e.attributes[n].value.split(oldid).join(a)}o(e)}}var e=document.getElementById("kmladdbutton");if(e){o(e);var t=e.getElementsByTagName("BUTTON");if(t.length>0)t[0].click();if(lastinfowindow)lastinfowindow.close();var i=[a];addhighlight(i);oldid=a}}function inputkey(e,t){if(e.which==13)t()}function inputfocus(e){e.style.color="black";if(deftext(e.value)){e.value=""}}function getTextFromHyperlink(e){var t=e.search("href=");var i=e.slice(t).split('"')[1];return i}var map;var gxml;var zindex=0;var markers=[];var handlekeys=false;var lastinfowindow=null;function displayinfowindow(e){tooltip.hide();if(lastinfowindow)lastinfowindow.close();e.infowindow.setZIndex(++zindex);e.infowindow.open(map,e);getgeoelevation(e.getPosition(),"infoelevation","~");lastinfowindow=e.infowindow}function pinicon(e,t){if(!t||typeof t=="undefined")t="http://ropewiki.com/images/8/86/PinMap.png";return'<img src="'+t+'" id="'+e+'" class="pinicon" title="Show location on map" style="cursor:pointer;vertical-align:middle" onclick=\'pinmap(this.id)\'/>'}function pinmap(e){for(var t=0;t<markers.length;++t)if(markers[t].name==e){var i=$("#mapbox").offset().top;if(i<$(window).scrollTop())window.scrollTo(0,i);$("#mapcover").css({display:"none"});map.panTo(markers[t].position);window.setTimeout(function(){displayinfowindow(markers[t])},500);return}}var kmliconlist=["http://ropewiki.com/images/7/75/Starn00.png","http://ropewiki.com/images/8/87/Starn10.png","http://ropewiki.com/images/1/15/Starn20.png","http://ropewiki.com/images/d/d3/Starn30.png","http://ropewiki.com/images/a/a0/Starn40.png","http://ropewiki.com/images/c/cc/Starn50.png","http://ropewiki.com/images/b/b6/Starn01.png","http://ropewiki.com/images/1/12/Starn11.png","http://ropewiki.com/images/b/b7/Starn21.png","http://ropewiki.com/images/2/2e/Starn31.png","http://ropewiki.com/images/1/1d/Starn41.png","http://ropewiki.com/images/f/fe/Starn51.png","http://ropewiki.com/images/3/3a/Starn02.png","http://ropewiki.com/images/a/a4/Starn12.png","http://ropewiki.com/images/1/13/Starn22.png","http://ropewiki.com/images/3/32/Starn32.png","http://ropewiki.com/images/7/77/Starn42.png","http://ropewiki.com/images/1/11/Starn52.png","http://ropewiki.com/images/b/bd/Starn03.png","http://ropewiki.com/images/0/09/Starn13.png","http://ropewiki.com/images/9/98/Starn23.png","http://ropewiki.com/images/0/07/Starn33.png","http://ropewiki.com/images/f/fb/Starn43.png","http://ropewiki.com/images/d/dc/Starn53.png","http://ropewiki.com/images/2/25/Starn04.png","http://ropewiki.com/images/7/73/Starn14.png","http://ropewiki.com/images/e/ea/Starn24.png","http://ropewiki.com/images/6/6a/Starn34.png","http://ropewiki.com/images/3/31/Starn44.png","http://ropewiki.com/images/2/27/Starn54.png","http://ropewiki.com/images/2/29/Starn05.png","http://ropewiki.com/images/d/d9/Starn15.png","http://ropewiki.com/images/e/e0/Starn25.png","http://ropewiki.com/images/0/09/Starn35.png","http://ropewiki.com/images/8/81/Starn45.png","http://ropewiki.com/images/3/37/Starn55.png"];var nlist=1e4;var qmaps=[];function loadlist(e,t){if(qmaps.length==0)for(var i=0;i<6;++i)qmaps.push(map);var n;var a=document.getElementById("kmlstars");if(a!=null)n=a.innerHTML.split(",");var o=document.getElementById("kmladdbutton");var r=document.getElementById("kmlnearby");if(r){for(i=0;i<e.length;++i){var l=e[i];var s=[];for(ic=0;ic<e.length;++ic)s.push({id:e[ic].id.split(" ")[0],distance:Distance(l.location,e[ic].location)});s.sort(function(e,t){return e.distance-t.distance});var c=[];for(ic=1;ic<s.length&&ic<=5&&s[ic].distance<20;++ic)c.push(s[ic].id);id=l.id.substr(1).split(" ")[0];if(!id||id=="")continue;elems=document.getElementsByClassName("nearby");for(var p=0;p<elems.length&&elems[p].id!=id;++p);if(p<elems.length)elems[p].innerHTML="~"+c.join()}}var i,m=e.length;for(i=0;i<e.length;++i){var d=e[i];if(!d.id||d.id=="")continue;++m;--nlist;var g=5e3+nlist;if(d.q)g+=d.q*1e3;var f="";if(d.icon)f=d.icon;var u="",h="";if(d.description){str=d.description;if(metric){var v=str.split(" ");for(var y=0;y<v.length;++y){var w="";var k=v[y];var b=k.indexOf(":");if(i>=0){w=k.substr(0,b+1);k=k.substr(b+1)}if(k[0]>="0"&&k[0]<="9"){var x=k.slice(-2);if(x=="mi")v[y]=w+uconv(k,mi);else if(x=="ft")v[y]=w+uconv(k,ft)}}str=v.join(" ")}str=acaconv(str);u=h=str}h='<div class="notranslate">'+h.split("*").join("&#9733;")+"</div>";var T="50px";if(d.thumbnail){var L="";var E="";var I='height="150px"';var M=d.thumbnail.split("/");if(M.length>0){var B=M[M.length-1];var C=parseInt(B);if(C>0){E='width="'+C+'px"';L='style="border:1px solid #808080"';T="200px"}}h+="<div><img "+L+" "+E+" "+I+' src="'+d.thumbnail+'"/></div>'}{if(d.kmlfile&&d.kmlfile!=""){h+="<div><i>";h+="<a href=\"javascript:toggleRoutes('"+urlencode(d.kmlfile)+"','"+urlencode(d.id)+"');\">Show KML Map of the route</a>";h+="</i></div>"}var S='<br><span id="infoelevation"></span> - ';S+='<a href="http://ropewiki.com/Weather?pagename='+d.id+'" target="_blank">Weather</a>';S+=' - <a href="http://ropewiki.com/Location?locdist=30mi&locname=Coord:'+d.location.lat+","+d.location.lng+'">Search nearby</a>';h+=displaydirections(d.location.lat,d.location.lng,S)}var N='<div style="width:auto;height:auto;overflow:hidden;"><b class="notranslate">'+sitelink(d.id,nonamespace(d.id))+"</b>";if(o)N+='<input class="submitoff addbutton" type="submit" onclick="addbutton(\''+d.id.split("'").join("%27")+'\')" value="+">';N+="<hr/>"+h+"</div>";if(d.infocontent)N=d.infocontent;var H=new google.maps.InfoWindow({content:N});var O='<b class="nostranslate">'+nonamespace(d.id)+"</b><br>"+u.split("*").join("&#9733;");if(d.infodescription)O=d.infodescription;var j=-1,R=map;if(d.q!=null)R=qmaps[j=d.q];var F=new google.maps.LatLng(d.location.lat,d.location.lng);var _=new google.maps.Marker({position:F,map:R,icon:f,name:nonamespace(d.id),description:O,infowindow:H,zIndex:g,optimized:false});_.q=j;_.oposition=F;google.maps.event.addListener(_,"mouseover",function(e){this.highlight=new google.maps.Marker({position:this.getPosition(),icon:"http://ropewiki.com/images/3/39/Starn_b.png",draggable:false,clickable:false,optimized:false,zIndex:this.zIndex-1});this.priority=0;this.highlight.setMap(map);tooltip.show(this.description,e,this)});google.maps.event.addListener(_,"mouseout",function(){tooltip.hide(this);if(this.highlight!=null){this.highlight.setMap(null);this.highlight=null}});markers.push(_);google.maps.event.addListener(_,"click",function(){displayinfowindow(this)});boundslist.extend(F)}var z=document.getElementById("kmladdlist");if(z){var A=z.innerHTML.split(";");if(A.length>0)addhighlight(A)}if(m>0&&t){var P=boundslist.getNorthEast();var $=boundslist.getSouthWest();if(Distance({lat:P.lat(),lng:P.lng()},{lat:$.lat(),lng:$.lng()})<1){map.setZoom(11);map.panTo(markers[0].position)}else{map.fitBounds(boundslist);map.panToBounds(boundslist)}zindex=6e3}return m}var kmllistn=0;var kmllisturl,tablelisturl;var kmlsummary;function getrwlist(e){var o=[];$.each(e.query.results,function(e,t){var i;++kmllistn;var n={id:t.fulltext};i=t.printouts["Has coordinates"];if(i&&i.length>0){n.location={lat:i[0].lat,lng:i[0].lon};i=t.printouts["Has star rating"];if(i&&i.length>0){n.q=Number(i[0]);i=t.printouts["Has location class"];if(i&&i.length>0)n.icon=kmliconlist[n.q+Number(i[0])*6]}if(kmlsummary)if(n.id[0]=="#"){var a=n.id.slice(1).split(" ")[0];n.icon="http://sites.google.com/site/rwicons/bg"+n.q+"_"+a+".png"}i=t.printouts["Has summary"];if(i&&i.length>0)n.description=i[0];i=t.printouts["Has banner image file"];if(i&&i.length>0)n.thumbnail=i[0];i=t.printouts["Has KML file"];if(i&&i.length>0)n.kmlfile=i[0];i=t.printouts["Located in region"];if(i&&i.length>0)n.region=i[0].fulltext;o.push(n)}});return o}function getkmllist(e){var t=getrwlist(e);if(typeof e["query-continue-offset"]=="undefined")morestop();loadlist(t,true)}function findtag(e,t,i){function o(e,t){var i=[];for(var n=0;n<e.length;++n){var a=e[n];if(a.nodeName==t)i.push(a);else i=i.concat(o(a.childNodes,t))}return i}var n=o(e,t);for(var a=0;a<n.length;++a)i(n[a])}function morestop(){var e=document.getElementById("loccount");if(e)e.parentNode.removeChild(e);var t=document.getElementById("loadmore");if(t)t.parentNode.removeChild(t);var i=$(".loctable .smw-template-furtherresults a");if(i.length==1)i[0].parentNode.removeChild(i[0])}var morestep=100;var moremapc=0,morelistc=0;function morekmllist(e,t){loadingquery=true;console.log("loadingquery true");++moremapc;map.setOptions({draggableCursor:"wait"});$.getJSON(geturl(kmllisturl+"|offset="+e),getkmllist).always(function(){setTimeout(function(){loadingquery=false;console.log("loadingquery false")},5e3);if(--moremapc<=0)map.setOptions({draggableCursor:""})});if(e>0){var n=$(".loctable .loctabledata");if(n.length==1){++morelistc;document.body.style.cursor="wait";$.get(geturl(tablelisturl+"&offset="+e),function(e){var t=$("#morekmllist").html($(e).find(".loctable").html());if(t.length==1){var i=t[0];i.getElementsByName=function(e){var t=[];return t};i.getElementById=function(e){return null};loadUserInterface(i);findtag(i.childNodes,"TR",function(e){n[0].appendChild(e)})}}).always(function(){if(--morelistc<=0)document.body.style.cursor=""})}}e+=morestep;if(e>=t){morestop();return}var i=document.getElementById("loadmore");if(i)i.innerHTML='<button onclick="morekmllist('+e+","+t+')">+</button> ';var a=document.getElementById("loccount");if(a)a.innerHTML=e+" of ";var o=$(".loctable .smw-template-furtherresults a");if(o.length==1){o[0].href="javascript:morekmllist("+e+","+t+");"}}function setmarker(e,t,i){var n=new google.maps.LatLng(e,t);var a=new google.maps.InfoWindow({content:'<div class="textselect">'+displaylocation(e,t)+'<div id="elevation"></div>'+'<div id="geocode" style="max-width:200px"></div>'+displaydirections(e,t)+"</div>"});var o=new google.maps.Marker({position:n,map:map,infowindow:a,optimized:false,zIndex:i});google.maps.event.addListener(o,"click",function(){this.infowindow.open(map,this);getgeoelevation(this.getPosition(),"elevation","Elevation: ");getgeocode(e,t,"geocode")});boundslist.extend(n)}function CLIP(e,t){return e%(1<<t)}function TYZ(e,t){return(1<<t)-e-1}function Box(e,t,i,n){function s(e,t,i){return Math.min(Math.max(e,t),i)}function a(e,t,i,n){var a=e*(1<<t);var o=s(e*i,0,a-1)/a-.5;var r=.5-s(e*n,0,a-1)/a;var l={lat:90-360*Math.atan(Math.exp(-r*2*Math.PI))/Math.PI,lng:360*o};return l}var o=a(n,i,e,t);var r=a(n,i,e+1,t+1);var l={lat1:o.lat,lat2:r.lat,lng1:o.lng,lng2:r.lng};return l}function WmsBox(e,t,i){function n(e,t,i){var n={x:t,y:i};if(e){n.x=i*20037508.34/180;var a=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);n.y=a*20037508.34/180}return n}var a=n(t,e.lat1,e.lng1);var o=n(t,e.lat2,e.lng2);var r=[a.x<o.x?a.x:o.x,a.y<o.y?a.y:o.y,a.x<o.x?o.x:a.x,a.y<o.y?o.y:a.y];if(i)return r[1]+","+r[0]+","+r[3]+","+r[2];else return r[0]+","+r[1]+","+r[2]+","+r[3]}var boundslist;var loadingmap=true,loadingtiles=false,loadingtiles2=false,loadingkml=false,loadingquery=false,loadingquery2=false;function isloadingmap(){return loadingmap||loadingtiles||loadingtiles2||loadingkml||loadingquery||loadingquery2}function initializemap(){var v;tooltip=function(){var n="tooltip";var a=3;var o=3;var r=300;var l=10;var s=20;var c=95;var p=0;var m,d,g,f,u;var h=document.all?true:false;return{show:function(e,t,i){if(!e||e=="")return;if(i&&v)if(i.highlight&&v.highlight)if(i.priority>v.priority){i.highlight.setMap(null);i.highlight=null;return}if(v&&i!=v&&v.highlight){v.highlight.setMap(null);v.highlight=null}v=i;if(m==null){m=document.createElement("div");m.style.backgroundColor="white";m.style.padding="3px";m.style.position="absolute";m.style.zIndex=6e4;m.style.fontFamily="Arial,sans-serif";m.style.fontSize="10px";m.setAttribute("id",n);m.className="notranslate";d=document.createElement("div");d.setAttribute("id",n+"top");g=document.createElement("div");g.setAttribute("id",n+"cont");f=document.createElement("div");f.setAttribute("id",n+"bot");m.appendChild(d);m.appendChild(g);m.appendChild(f);document.body.appendChild(m);m.style.opacity=0;m.style.filter="alpha(opacity=0)";document.onmousemove=this.pos}m.style.display="block";if(g)g.innerHTML=e;m.style.width=t?t+"px":"auto";if(!t&&h){d.style.display="none";f.style.display="none";m.style.width=m.offsetWidth;d.style.display="block";f.style.display="block"}if(m.offsetWidth>r){m.style.width=r+"px"}u=parseInt(m.offsetHeight)+a;clearInterval(m.timer);m.timer=setInterval(function(){tooltip.fade(1)},s)},pos:function(e){var t=h?event.clientY+document.documentElement.scrollTop:e.pageY;var i=h?event.clientX+document.documentElement.scrollLeft:e.pageX;m.style.top=t-u+"px";m.style.left=i+o+"px"},fade:function(e){var t=p;if(t!=c&&e==1||t!=0&&e==-1){var i=l;if(c-t<l&&e==1){i=c-t}else if(p<l&&e==-1){i=t}p=t+i*e;m.style.opacity=p*.01;m.style.filter="alpha(opacity="+p+")"}else{clearInterval(m.timer);if(e==-1){m.style.display="none"}}},hide:function(e){if(e)if(e!=v){return}if(typeof m!="undefined"){if(m.timer){clearInterval(m.timer)}m.timer=setInterval(function(){tooltip.fade(-1)},s)}}}}();var e=document.getElementById("mapbox");if(!e)return;var t={zoom:13,scaleControl:true,keyboardShortcuts:false,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:true,mapTypeControlOptions:{mapTypeIds:["topo","wtopo","wtopoesri","ocm",google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID,"wsatesri","mxtopo","estopo","frtopo","chtopo","nztopo"],style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}};var i=document.createElement("DIV");i.id="mapcover";i.className="gmnoprint";i.style.cssText="position:fixed;left:0;top:0;width:100%;height:100%;background-color:transparent;border-color:yellow;border-style: inset;border-width:2px";$(i).on("click",function(e){toggleFullScreen(true)});var n=document.createElement("DIV");n.style.cssText="font-size:x-small;";var a=[];map=new google.maps.Map(e,t);map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(n);a[google.maps.MapTypeId.TERRAIN]=" ";a[google.maps.MapTypeId.HYBRID]=" ";var o=new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://s3-us-west-1.amazonaws.com/ctrelief/relief/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:16,name:"Topo",opacity:.25,tileSize:new google.maps.Size(256,256)});map.mapTypes.set("topo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://s3-us-west-1.amazonaws.com/caltopo/topo/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:16,name:"TopoUSA",opacity:1,tileSize:new google.maps.Size(256,256)}));a["topo"]="<a href='http://caltopo.com' target='_blank'>Topo map by CalTopo</a>";map.mapTypes.set("ocm",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://tile.opencyclemap.org/cycle/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:18,name:"OpenCycle",opacity:1,tileSize:new google.maps.Size(256,256)}));a["ocm"]="<a href='http://thunderforest.com' target='_blank'>Topo map by Thunderforest</a>";map.mapTypes.set("wtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://tile.thunderforest.com/outdoors/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png?apikey=bdbb04f2d5df40cbb86e9e6e1acff6f7"},maxZoom:18,name:"TopoWorld",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wtopo"]="<a href='http://thunderforest.com' target='_blank'>Topo map by Thunderforest</a>";map.mapTypes.set("wtopoesri",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/"+t+"/"+CLIP(e.y,t)+"/"+CLIP(e.x,t)+".png"},maxZoom:18,name:"TopoESRI",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wtopoesri"]="<a href='http://arcgisonline.com' target='_blank'>Topo map by ESRI</a>";map.mapTypes.set("wsatesri",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/"+t+"/"+CLIP(e.y,t)+"/"+CLIP(e.x,t)+".png"},maxZoom:18,name:"SatESRI",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wsatesri"]="<a href='http://arcgisonline.com' target='_blank'>Sat map by ESRI</a>";map.mapTypes.set("estopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://www.ign.es/wmts/mapa-raster?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=MTN&STYLE=default&TILEMATRIXSET=GoogleMapsCompatible&TILEMATRIX="+t+"&TILEROW="+CLIP(e.y,t)+"&TILECOL="+CLIP(e.x,t)+"&FORMAT=image%2Fjpeg"},maxZoom:17,name:"TopoSpain",opacity:1,tileSize:new google.maps.Size(256,256)}));a["estopo"]="<a href='http://sigpac.mapa.es/fega/visor/' target='_blank'>Topo map by IGN</a>";map.mapTypes.set("frtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://RopeWiki:b%40VM709c6Jix@wxs.ign.fr/8m34uuspdybhi9t89lpoeyfl/geoportail/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&STYLE=normal&FORMAT=image/jpeg&TILEMATRIXSET=PM&TILEMATRIX="+t+"&TILEROW="+CLIP(e.y,t)+"&TILECOL="+CLIP(e.x,t)},maxZoom:16,name:"TopoFrance",opacity:1,tileSize:new google.maps.Size(256,256)}));a["frtopo"]="<a href='http://www.geoportail.gouv.fr' target='_blank'>Topo map by Geoportail</a>";map.mapTypes.set("mxtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://gaiamapas1.inegi.org.mx/mdmCache/service/wms?LAYERS=MapaBaseTopograficov61_consombreado&FORMAT=image/jpeg&MINZOOMLEVEL=5&ZOOMOFFSET=5&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG:900913&BBOX="+WmsBox(Box(CLIP(e.x,t),CLIP(e.y,t),t,256),true,false)+"&WIDTH=256&HEIGHT=256"},maxZoom:16,name:"TopoMexico",opacity:1,tileSize:new google.maps.Size(256,256)}));a["mxtopo"]="<a href='http://gaia.inegi.org.mx/mdm6/' target='_blank'>Topo map by INEGI</a>";map.mapTypes.set("nztopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return t<13?"http://tiles-2.topomap.co.nz/tiles-topo250/"+t+"-"+CLIP(e.x,t)+"-"+TYZ(CLIP(e.y,t),t)+".png":"http://tiles-2.topomap.co.nz/tiles-topo50/"+t+"-"+CLIP(e.x,t)+"-"+TYZ(CLIP(e.y,t),t)+".png"},maxZoom:15,name:"TopoNewZealand",opacity:1,tileSize:new google.maps.Size(256,256)}));a["nztopo"]="<a href='http://www.topomap.co.nz/' target='_blank'>Topo map by Topomap.co.nz</a>";map.mapTypes.set("chtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://wmts20.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/"+t+"/"+e.x+"/"+e.y+".jpeg"},maxZoom:18,name:"TopoSwiss",opacity:1,tileSize:new google.maps.Size(256,256)}));a["chtopo"]="<a href='http://map.geo.admin.ch' target='_blank'>Topo map by Swisstopo</a>";google.maps.event.addListener(map,"maptypeid_changed",function(){map.controls[google.maps.ControlPosition.BOTTOM_CENTER].clear();if(map.getMapTypeId()=="topo")map.overlayMapTypes.setAt(0,o);else map.overlayMapTypes.clear();var e=a[map.getMapTypeId()];if(!!e&&!!n)n.innerHTML=e});google.maps.event.addListener(map,"mouseout",function(){mapcover()});var r=document.getElementById("kmltype");if(r!=null){var l=r.innerHTML.split("@");if(l.length>1)map.mapTypes[l[0]].maxZoom=parseInt(l[1]);map.setMapTypeId(l[0])}loadingtiles=true;console.log("loadingtiles true");google.maps.event.addListener(map,"tilesloaded",function(e){setTimeout(function(){loadingtiles=false;console.log("loadingtiles false")},5e3)});google.maps.event.addListener(map,"bounds_changed",function(e){loadingtiles2=true;console.log("loadingtiles2 true")});google.maps.event.addListener(map,"idle",function(e){setTimeout(function(){loadingtiles2=false;console.log("loadingtiles2 false")},5e3)});boundslist=new google.maps.LatLngBounds;var s;var c=document.getElementById("kmlmarker");if(c!=null){console.log("kmlmarker");var p=c.innerHTML.split(",");if(p!=null&&p.length>1){s="kmlmarker";setmarker(p[0],p[1],0);map.setZoom(13);var m=new google.maps.LatLng(p[0],p[1]);map.panTo(m);var d=document.getElementById("elevationdiv");if(d)getgeoelevation(m,"elevationdiv"," ~")}}var g=document.getElementById("kmlrect");if(g!=null){var p=g.innerHTML.split(",");if(p!=null&&p.length>1){s="kmlrect";var f=new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,map:map,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(p[0],p[1]),new google.maps.LatLng(p[2],p[3])),draggable:false,clickable:false,optimized:false});boundslist=f.getBounds();map.fitBounds(boundslist);map.panToBounds(boundslist);if(p.length>4){setTimeout(function(){map.setZoom(parseInt(p[4]))},1e3)}}}var u=document.getElementById("kmlcircle");if(u!=null){var p=u.innerHTML.split(",");if(p!=null&&p.length>1){s="kmlcircle";var h={strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,map:map,center:new google.maps.LatLng(p[0],p[1]),radius:Number(p[2]),draggable:false,clickable:false,optimized:false};setmarker(p[0],p[1],9e4);if(g==null){var y=new google.maps.Circle(h);boundslist=y.getBounds()}map.fitBounds(boundslist);map.panToBounds(boundslist)}}kmlsummary=document.getElementById("kmlsummary");var w=document.getElementById("kmllist");if(w!=null){var k=document.getElementById("kmlicons");if(k!=null)kmliconlist=k.innerHTML.split(",");s="kmllist";var b=w.innerHTML.split("&amp;").join("").split(";");var x=[];for(var T=0;T<b.length;++T){if(b[T]==null)continue;if(b[T].length<=0)continue;var L=b[T].split(",");if(L==null)continue;var E=parseFloat(L[1]);var I=parseFloat(L[2]);if(isNaN(E)||isNaN(I))continue;var M={id:urldecode(L[0]),location:{lat:E,lng:I}};if(L.length>3){M.q=Number(L[3]);if(L.length>6)M.icon=kmliconlist[Number(L[6])*6+M.q]}if(kmlsummary)if(M.id[0]=="#"){var B=M.id.slice(1).split(" ")[0];M.icon="http://sites.google.com/site/rwicons/bg"+M.q+"_"+B+".png"}if(L.length>4)M.description=urldecode(L[4]);if(L.length>5)M.thumbnail=L[5];x.push(M)}loadlist(x,true)}var C=document.getElementById("kmllistquery");if(C!=null){s="kmllistquery";w=C;kmllisturl="http://ropewiki.com/api.php?action=ask&format=json&query="+C.innerHTML+"|%3FHas_coordinates|%3FHas_star_rating|%3FHas_summary|%3FHas_banner_image_file|%3FHas_location_class|%3FHas_KML_file|limit=100";tablelisturl=window.location.href.toString();tablelisturl=tablelisturl.split("#")[0];tablelisturl+=(tablelisturl.indexOf("?")<0?"?":"&")+"nomapchk=on";var S=document.getElementById("loctotal");if(S){var N=S.innerHTML;if(N>0);morekmllist(0,N)}}var H;var O=document.getElementById("kmlfile");if(O!=null&&!H){var j=O.innerHTML;if(j!=null&&j.length>0){s="kmlfile";H=new google.maps.KmlLayer(j);H.setMap(map)}}if(kmlsummary!=null){function R(e){loadingquery2=true;console.log("loadingquery2 true");var t=1;var i=26/2;var n=16;if(e==null)e=100;var a=Math.pow(2,map.getZoom());var o=map.getProjection();var r=map.getBounds();if(!o||!r){console.log("null proj");return}var l=new google.maps.LatLng(r.getNorthEast().lat(),r.getSouthWest().lng());var s=o.fromLatLngToPoint(l);function c(e){var t=o.fromLatLngToPoint(e);return new google.maps.Point(Math.floor((t.x-s.x)*a),Math.floor((t.y-s.y)*a))}function p(e){var t=new google.maps.Point;t.x=e.x/a+s.x;t.y=e.y/a+s.y;return o.fromPointToLatLng(t)}for(var m=0;m<markers.length;m++){var d=markers[m];d.p=c(d.oposition);d.p.y+=i}var g=true;for(var f=0;f<e&&g;++f){g=false;for(var m=0;m<markers.length;m++)for(var u=m+1;u<markers.length;u++)if(m!=u){var h=markers[m].p.x-markers[u].p.x;var v=markers[m].p.y-markers[u].p.y;var y=h<0?-h:h;var w=v<0?-v:v;if(y<n&&w<n){if(y<n)if(h>0){markers[m].p.x+=t;markers[u].p.x-=t;g=true}else{markers[m].p.x-=t;markers[u].p.x+=t;g=true}if(w<n)if(v>0){markers[m].p.y+=t;markers[u].p.y-=t;g=true}else{markers[m].p.y-=t;markers[u].p.y+=t;g=true}}}}console.log("repetitions:"+f+" overlap:"+g+" os:"+n+" st:"+t);for(var m=0;m<markers.length;m++){var d=markers[m];d.p.y-=i;var k=p(d.p);var b={lat:parseFloat(k.lat()),lng:parseFloat(k.lng())};if(!isNaN(b.lat)&&!isNaN(b.lng))d.setPosition(b);else console.log("error "+d.name+":"+d.p+" -> "+b.lat+","+b.lng)}setTimeout(function(){loadingquery2=false;console.log("loadingquery2 false")},5e3)}google.maps.event.addListener(map,"zoom_changed",R)}if(s==null){var F=new google.maps.LatLng(0,0);var _=new google.maps.InfoWindow({content:"UNKNOWN LOCATION"});var z=new google.maps.Marker({position:F,map:map,infowindow:_,optimized:false});z.infowindow.open(map,z);google.maps.event.addListener(z,"click",function(){this.infowindow.open(map,this)});map.panTo(F);map.setZoom(2);map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}var A=document.getElementById("kmltitle");if(A!=null){var P=document.createElement("DIV");P.style.margin="4px 4px 4px 4px";P.innerHTML='<img src="http://chart.apis.google.com/chart?chst=d_text_outline&chld=000000|32|h|FFFFFF|b|'+urlencode(A.innerHTML)+'"/>';map.controls[google.maps.ControlPosition.TOP_CENTER].push(P)}{var D='<div class="gmnoprint maptopcontrols">',G="</div>";var q=D+'<img class="gmnoprint" id="fullscreenchk" onclick="toggleFullScreen()" title="Full Screen" src="http://ropewiki.com/images/b/b9/FullscreenIcon.png">'+G;if(w){q+=D+'<label><input class="gmnoprint" id="routeschk" type="checkbox" onclick="toggleRoutes()">Show&nbsp;KML&nbsp;</label>'+G;if(document.getElementById("locsearch")){var U=document.createElement("DIV");U.innerHTML='<div id="searchmap"><span id="searchinfo"></span><button type="search" value="" onclick="searchmap()">Search Map</button></div>';map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(U);searchmaprectangle=new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(0,0),new google.maps.LatLng(0,0)),draggable:false,clickable:false,optimized:false});map.addListener("click",function(e){if(searchmapn>=0){var t=new google.maps.Marker({position:e.latLng,map:map,optimized:false});searchmappt.push(e.latLng);++searchmapn;var i=new google.maps.LatLngBounds;i.extend(searchmappt[0]);i.extend(searchmappt[searchmappt.length>=2?1:0]);searchmaprectangle.setBounds(i);searchmaprectangle.setMap(map);if(searchmapn>=2)searchmaprun()}});map.addListener("mousemove",function(e){if(searchmapn>0&&searchmapn<2){var t=new google.maps.LatLngBounds;t.extend(searchmappt[0]);t.extend(e.latLng);searchmaprectangle.setBounds(t);searchmaprectangle.setMap(map)}})}}else{if(A)q+=D+'<label><input class="gmnoprint" id="labelschk" type="checkbox" onclick="toggleLabels()" '+(labels?"checked":"")+">TrkLabels&nbsp;</label>"+G}var P=document.createElement("DIV");P.style.cssText="z-index:9999;";P.innerHTML=q;map.controls[google.maps.ControlPosition.TOP_LEFT].push(P)}map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(i);var W=document.getElementById("kmlfilep");if(W!=null){loadingkml=true;console.log("loadingkml true");var j=W.innerHTML;var V="";if(j!=null&&j.length>0){s="kmlfilep";var e="#mapbox";var Z="mapsidebar";var K=document.getElementById("bskmlfile");if(K!=null){var X=document.createElement("DIV");var J='<div class = "dropDownOptionsDiv" id="myddOptsDiv">';j=j.split("&amp;").join("&");var Y=K.innerHTML.toString().split("&amp;").join("&").split(",");if(urldecode(j).indexOf(urldecode(Y[0]))<0)Y.unshift(j);var Q=[];for(var T=0;T<Y.length;++T){var ee="";var te=Y[T];if(noextraction(te))ee="color:red;";var ie=0;var ne=getdomain(te);Q.push(ne);for(var ae=0;ae<Q.length;++ae)if(Q[ae]==ne)++ie;if(ie>1)ne+="#"+ie;J+='<div class="dropDownItemDiv" onClick="loadSource(\''+te+"','"+ne+'\')" style="'+ee+'">'+ne+"</div>"}var oe=document.getElementsByTagName("BIG");if(oe&&oe.length>0&&Y.length>1){var te=urlencode(oe[0].innerHTML);J+='<div class="dropDownItemDiv" onClick="loadSource(\''+te+"','ALL COMBINED')\" style=\"font-weight:bold\">ALL COMBINED</div>"}J+="</div>";var re=getdomain(Y[0]);J+="<div class=\"dropDownControl\" onclick=\"(document.getElementById('myddOptsDiv').style.display == 'block') ? document.getElementById('myddOptsDiv').style.display = 'none' : document.getElementById('myddOptsDiv').style.display = 'block';\"><span id=\"myddOptsText\">"+re+'</span><img class="dropDownArrow" src="http://maps.gstatic.com/mapfiles/arrow-down.png"/></div>';lastlinks.push(V=Y[0]);X.className="dropDownControlDiv";X.style.zIndex=1e3;X.innerHTML=J;map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(X);if(Y.length<2)X.style.display="none"}var le=document.createElement("div");le.setAttribute("id",Z);le.className="notranslate";document.body.appendChild(le);var P=document.createElement("DIV");P.innerHTML='<div id="legendbar"><label><input class="gmnoprint" id="legendchk" type="checkbox" onclick="toggleLegend()"><span id="legendlabel">Legend</span></label><br><div id="legend" class="notranslate"></div></div><div id="loadlinks"></div>';map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(P);P.style.maxHeight="90%";P.style.overflow="auto";P.style.zIndex=999;P.style.marginRight="5px";function se(){gxml=new GeoXml("gxml",map,"",{sidebarid:Z,sortbyname:true,simplelegend:true,suppressallfolders:true,showArrows:true,showLabels:true,showRouteLabels:labels&&A,showElevation:labels&&A,directions:true,dohilite:true,allfoldersopen:true,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});google.maps.event.addListener(gxml,"loaded",function(){setTimeout(function(){loadingkml=false;console.log("loadingkml false")},5e3);if(document.getElementById("hidelegend")==null||showLegend){var a=setInterval(function(){if(document.getElementById("legend")!=null){toggleLegend(true);var e=$("#legendbar").width();var t=$("#legendbar").height();var i=$("#mapbox").width();var n=$("#mapbox").height();if(e*t>i*n/4)toggleLegend(false);clearInterval(a)}},500)}});gxml.load(j,V)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl("http://ropewiki.com/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),se);else setTimeout(se,100)}}var ce=document.getElementById("kmlfilew");if(ce!=null){var j=ce.innerHTML;if(j!=null&&j.length>0){s="kmlfilew";var e="#mapbox";function pe(){gxml=new GeoXml("gxml",map,"",{nozoom:true,simplelegend:true,suppressallfolders:true,showArrows:false,showLabels:false,patchIcons:true,showRouteLabels:false,directions:false,dohilite:false,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});gxml.load(j,j)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl("http://ropewiki.com/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),pe);else setTimeout(pe,100)}}setTimeout(function(){loadingmap=false;console.log("loadingmap false")},5e3);$("#mapbox").mouseover(function(e){handlekeys=true});$("#mapbox").mouseout(function(e){handlekeys=false;mapcover()});$("#mapbox").mousedown(function(e){e.preventDefault()});$(document).keydown(function(e){if(handlekeys){var t=1;var i=128;switch(e.which){case 37:map.panBy(-i,0);return false;case 38:map.panBy(0,-i);return false;case 39:map.panBy(i,0);return false;case 40:map.panBy(0,i);return false;case 109:case 189:map.setZoom(t=map.getZoom()-1);return false;case 107:case 187:map.setZoom(t=map.getZoom()+1);return false;case 27:case 8:if(toggleFS!=null)backFullScreen();return false;default:break}}});$(window).resize(function(){if(toggleFS!=null)toggleFullScreen(true);else centermap();smallstyle();mapcover()})}var piciconlist=[];var picloadingmsg="<img height=12 src='http://ropewiki.com/extensions/SemanticForms/skins/loading.gif'/> Loading... ";var piclist,picloading,picloadingerr,picloadingn;function pictureget(t){if(t.length==0)return;var e=geturl(t.shift());console.log("getpic "+e);$.getJSON(e,function(e){var t=[];var i=e.list;for(var n=0;n<i.length;++n){var a=i[n].split(",");var o=document.createElement("LI");o.className="gallerybox";var r='<div class="thumbinner" style="width:154px"><a href="'+a[0]+'" target="_blank"><img src="'+a[4]+'" style="width:150px;height:150px;"></a><div class="thumbcaption"><div>'+pinicon(a[0],piciconlist[a[9]])+" <b>"+a[6]+"</b></div><div>"+a[8]+"</div><div>"+a[1]+"</div></div></div>";o.innerHTML=r;o.sortdate=a[5];o.locid=a[0];var l=piclist.getElementsByTagName("LI");var s=0;for(s=0;s<l.length&&l[s].sortdate>=o.sortdate;++s);if(s==l.length)piclist.appendChild(o);else piclist.insertBefore(o,l[s]);var c={lat:parseFloat(a[2].toString()),lng:parseFloat(a[3].toString())};t.push({id:a[0],location:c,zindex:100-n,icon:piciconlist[a[9]],thumbnail:a[4],description:"",infodescription:a[6]+" "+a[8],infocontent:r})}if(map!=null)loadlist(t);var p=[];var l=piclist.getElementsByTagName("LI");for(var s=250;s<l.length;++s){p.push(l[s].locid);piclist.removeChild(l[s])}for(var n=0;n<markers.length;++n)if(p.indexOf(markers[n].name)>=0)markers[n].setMap(null)}).error(function(){++picloadingerr;console.log("picerror "+e)}).always(function(){var e="";if(t.length>0)e+=picloadingmsg+Math.round((picloadingn-t.length)*100/picloadingn)+"%";if(picloadingerr>0)e+=' <span style="color:red">'+picloadingerr+" ERRORS!</span>";picloading.innerHTML=e;pictureget(t)})}function pictureinit(){piclist=document.getElementById("picture-list");var e=document.getElementById("picture-rect");if(!e||!piclist)return;picloading=document.createElement("DIV");picloading.innerHTML=picloadingmsg;piclist.parentNode.insertBefore(picloading,piclist);piciconlist["Instagram.com"]="http://ropewiki.com/images/c/c0/InstaIcon.png";piciconlist["Facebook.com"]="http://ropewiki.com/images/0/03/FacebIcon.png";piciconlist["Flickr.com"]="http://ropewiki.com/images/f/f7/FlickIcon.png";piciconlist["Panoramio.com"]="http://ropewiki.com/images/a/a4/PanorIcon.png";var i=window.location.href.toString().indexOf("debug=local")>=0;var n=i?"http://localhost/rwr?pictures=":"http://d5a.net/rwr?pictures=";var a=n+e.innerHTML;$.getJSON(geturl(a),function(e){var i=e.list;picloadingerr=0;picloadingn=i.length;for(t=0;t<3;++t){setTimeout(function(){pictureget(i)},t*500)}pictureget(i)}).error(function(){picloading.innerHTML='<div style="color:red">ERROR!</div>'})}function waterflowinit(){waterflow()}function loadMapInterface(){var e=document.getElementById("mapbox");if(e==null){loadingmap=false;$(".locateicon").hide();console.log("loadingmap none");return}if(typeof staticscripts=="undefined"){var t=document.createElement("script");t.type="text/javascript";t.src="https://www.google.com/jsapi";document.body.appendChild(t);var t=document.createElement("script");t.type="text/javascript";t.src="http://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDdkcexZV-p5Nj8RwgLYTcegm5jorJpbyw&callback=initializemap";document.body.appendChild(t)}else initializemap();pictureinit();var i=document.getElementById("waterflow-table");if(!i)return;if(typeof staticscripts=="undefined")$.getScript(typeof waterflowjs!="undefined"?waterflowjs:geturl("http://ropewiki.com/index.php?title=MediaWiki:Waterflow.js&action=raw&ctype=text/javascript"),waterflowinit);else setTimeout(waterflowinit,100)}function loadmapScript(){smallstyle();loadSkin();loadEditor();loadFacebook();loadMapInterface();loadUserInterface(document);loadFormInterface();loadTranslation();var e=setInterval(function(){loadTranslation()},2e3);var t=document.createElement("script");t.type="text/javascript";t.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";document.body.appendChild(t)}function googleTranslateElementInit(){var e=document.getElementById("firstHeading");if(e){var t=document.createElement("div");t.className="noprint";t.style.cssText="float:right";t.id="google_translate_flags";t.innerHTML='<table class="noprint"><tr><td><img src="http://ropewiki.com/images/c/c9/FlagIcon.png"/></td><td id="google_translate_element"></td></tr></table>';e.insertBefore(t,e.firstChild);new google.translate.TranslateElement({pageLanguage:"en",multilanguagePage:true,gaTrack:true,gaId:"UA-78683801-1"},"google_translate_element")}}window.onload=loadmapScript;var showLegend;function toggleLegend(e){var t="legendchk";var i=document.getElementById("legend");var n=document.getElementById("legendlabel");var a=document.getElementById("mapsidebar");if(showLegend==null||e){if(i&&a){i.style.display="block";i.innerHTML=i.innerHTML+a.innerHTML;a.innerHTML=""}if(n&&showLegend==null)showLegend=n.innerHTML}else{if(i)i.style.display="none";showLegend=null}var o=document.getElementById(t);if(o)o.checked=showLegend!=null}var showRoutes,loadedRoutes;function toggleRoutes(i,n){idchk="routeschk";var e=document.getElementById("kmlroutes");if(!e)return;var t="KML";var a=e.innerHTML.split("&amp;").join("&");if(!gxml||i){function o(){gxml=new GeoXml("gxml",map,"",{nozoom:true,simplelegend:true,suppressallfolders:true,showArrows:false,showLabels:false,patchIcons:true,showRouteLabels:false,directions:true,dohilite:true,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});var e=i?i:a;var t=n?n:t;gxml.load(e,t,t)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl("http://ropewiki.com/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),o);else setTimeout(o,100);if(i)return;showRoutes="on";loadedRoutes="on"}else{if(showRoutes==null){showRoutes="on";if(loadedRoutes==null){gxml.load(a,t,t);loadedRoutes="on"}else{gxml.overlayman.Show()}}else{showRoutes=null;gxml.overlayman.Hide()}}document.getElementById(idchk).checked=showRoutes!=null;google.maps.event.trigger(map,"resize")}var fshash="#fullscreen";$(window).on("hashchange",function(){if(toggleFS!=null)if(window.location.href.toString().indexOf(fshash)<0)toggleFullScreen()});function backFullScreen(){window.history.back()}function mapcover(){var e=$("#mapbox").width();var t=$(window).width()-e;if(!toggleFS&&(t<50||e<500))$("#mapcover").css({display:"block"});else $("#mapcover").css({display:"none"})}function centermap(){if(!map)return;var e=map.getCenter();google.maps.event.trigger(map,"resize");map.panTo(e)}var toggleFS;function toggleFullScreen(e){var t="fullscreenchk";var i=document.getElementById("mapbox");if(!i)return;if(toggleFS==null||e){if(toggleFS==null){toggleFS={parent:i.parentNode,next:i.nextSibling,cssText:i.style.cssText,className:i.className,sx:window.pageXOffset,sy:window.pageYOffset};window.location.href=window.location.href.toString()+fshash;var n=document.body.childNodes;for(var a=0;a<n.length;++a)if(n[a].tagName=="DIV"){n[a].normal_display=n[a].style.display;n[a].style.display="none"}}$(i).hide();i.className="";$(i).css({position:"fixed",top:0,left:0,zIndex:9999999,width:"100%",height:"100%"});document.body.insertBefore(i,document.body.firstChild);window.scrollTo(0,0)}else{$(i).hide();var o=toggleFS;i.style.cssText=o.cssText;i.className=o.className;o.parent.insertBefore(i,o.next);var n=document.body.childNodes;for(var a=0;a<n.length;++a)if(typeof n[a].normal_display!="undefined")n[a].style.display=n[a].normal_display;window.scrollTo(o.sx,o.sy);toggleFS=null}chk=document.getElementById(t);chk.src=toggleFS==null?"http://ropewiki.com/images/b/b9/FullscreenIcon.png":"http://ropewiki.com/images/9/92/SmallscreenIcon.png";chk.onclick=toggleFS==null?toggleFullScreen:backFullScreen;mapcover();$(i).show();centermap()}var clistloading;var clistcookie="regionlist";var CollapsibleLists=new function(){this.apply=function(e){clistloading=getCookie(clistcookie);if(!clistloading)clistloading="<World>";var t=document.getElementsByTagName("ul");for(var i=0;i<t.length;i++){if(t[i].className.match(/(^| )collapsibleList( |$)/)){this.applyTo(t[i],true);if(!e){var n=t[i].getElementsByTagName("ul");for(var a=0;a<n.length;a++){n[a].className+=" collapsibleList"}}}}clistloading=null;o()};this.applyTo=function(e,t){var i,n;if((i=e.getElementsByTagName(n="A")).length==0)i=e.getElementsByTagName(n="SPAN");var a=[],o=[];for(var r=0;r<i.length;r++)a.push(i[r]);for(var r=0;r<a.length;r++){var l=-1;if(n=="A"){l=o.indexOf(a[r].href);o.push(a[r].href)}else{l=o.indexOf(a[r].innerHTML);o.push(a[r].innerHTML)}if(l<0)continue;var s=a[r];while(s&&s.tagName!="LI")s=s.parentNode;var c=s.getElementsByTagName("UL");var p=a[l];while(p&&p.tagName!="LI")p=p.parentNode;var m=p.getElementsByTagName("UL");if(c.length>0&&m.length==0)p.appendChild(c[0].cloneNode(true));else if(m.length>0&&c.length==0)s.appendChild(m[0].cloneNode(true))}var i=e.getElementsByTagName("li");for(var r=0;r<i.length;r++){if(!t||e==i[r].parentNode){if(i[r].addEventListener){i[r].addEventListener("mousedown",function(e){e.preventDefault()},false)}else{i[r].attachEvent("onselectstart",function(){event.returnValue=false})}if(i[r].addEventListener){i[r].addEventListener("click",d(i[r]),false)}else{i[r].attachEvent("onclick",d(i[r]))}g(i[r])}}};function d(i){return function(e){if(!e)e=window.event;var t=e.target?e.target:e.srcElement;if(t.nodeName!="LI")return;if(t==i){g(i);o()}}}function g(e){var t=e.className.match(/(^| )collapsibleListClosed( |$)/);t=r(e,t);var i=e.getElementsByTagName("ul");for(var n=0;n<i.length;n++){var a=i[n];while(a.nodeName!="LI")a=a.parentNode;if(a==e){i[n].style.display=t?"block":"none";if(t){var o=[];s(i[n],o);l(o)}}}e.className=e.className.replace(/(^| )collapsibleList(Open|Closed)( |$)/,"");if(i.length>0){e.className+=" collapsibleList"+(t?"Open":"Closed")}}function r(e,t){var i=null;var n=e.getElementsByTagName("a");if(n.length==0)n=e.getElementsByTagName("span");if(n.length>0)i=n[0].innerHTML;if(!i)return t;i="<"+i+">";if(clistloading!=null){if(clistloading.indexOf(i)>=0)return true;else return false}else{var a=getCookie(clistcookie);a=a.split(i).join("");if(t)a+=i;setCookie(clistcookie,a)}return t}function o(){}function l(n){var e=[];for(var t=0;t<n.length;++t){var i="NOTEXIST";var a=n[t].getElementsByTagName("A");if(a&&a.length>0)i=a[0].title;e.push(i)}var o="http://ropewiki.com/index.php?title=Template:RegionCount&action=raw&templates=expand&ctype=text/x-wiki&region="+urlencode(e.join(";"));$.get(geturl(o),function(e){var t=e.split(";");for(var i=0;i<n.length;++i)n[i].innerHTML=n[i].innerHTML+" "+t[i]})}function s(e,t){for(var i=0;i<e.childNodes.length;++i){var n=e.childNodes[i];if(n.style&&n.style.display!="none"){if(t.length<30&&n.className&&n.className.indexOf("regioncount")>=0){$(n).removeClass("regioncount");t.push(n)}if(n.childNodes.length>0)if(n.tagName=="LI")s(n,t)}}}};var sites=[];function findsite(e){for(var t=0;t<sites.length;t++)if(sites[t].id==e)return sites[t];return null}function nonamespace(e){return e.replace("Events:","")}function sitelink(e,t,i){if(typeof i=="undefined"){i=e;var n=findsite(e);if(n){var a=e.split(":")[1];i=n.urls[0].replace("%id",a)}}if(i=="")return'<span style="color:#808080">'+t+"</span>";return aref(i,t,t,'target="_blank"')}var currenturl=window.location.href.toString();function isAndroid(){if(typeof Android!="undefined")return true;if(urlget(currenturl,"debugandroid","")!="")return true;return false}function kmlurl(e){if(typeof Android!="undefined")return Android.kmlurl(e);var t="query=%5B%5BCategory%3ACanyons%5D%5D%5B%5BLocated%20in%20region.Located%20in%20regions%3A%3AX%7C%7CSan%20Diego%5D%5D&sort=&order=ascending";return"http://d5a.net/rwr?gpx=off&kml=http://ropewiki.com/KMLList?action=raw&templates=expand&ctype=application/x-zope-edit&group=link&"+t+"&more=&num=on&ext=.kml"}function viewsize(){var e=0;if(typeof Android!="undefined")e=Android.isWebView()-10;if(e<=0)e=600;return e}function WebViewStyle(){if(!isAndroid())return;var e=" .noprint, .gmnoprint, .rwSort, #contentSub, #top, #mw-head-base, #mw-page-base, #mw-navigation, #footer, .popupformlink, .toc, .mw-editsection ";var t=" .mw-body { margin:0px !important; padding:5px !important; } body { margin:0px !important; padding:0px !important; }";var i=document.getElementsByClassName("pinmap");for(var n=0,a=1;n<i.length;++n,++a){var o=a.toString();if(o.length<2)o="0"+o;var r="#"+o+" "+i[n].innerHTML;i[n].innerHTML=r}var l=document.getElementById("kmltitle");if(l){var s=viewsize();e+=" #firstHeading ";t+=" .kmlmapdisplay { width:"+s+"px !important; height:"+s+"px !important; }"}var c=document.getElementById("kmlsummary");if(c){var s=viewsize();e+=" #firstHeading, #displaysummary, ";t+=" #mapbox { width:"+s+"px !important; height:"+s+"px !important; }"}var p=$(".tableregion td big");if(p.length>0)$("#firstHeading").text($(".tableregion td big").text());$(".tableregion").remove();var m=document.getElementById("mapmenu");if(m){psum=$('a:contains("Printable Summary")');pmap=$('a[href*="/Map?pagename"]');var d=[];if(c){d.push('<a class="button-link" href="'+kmlurl(window.location.href.toString())+'">Open KML</a>')}else if(psum.length>0){$("#mapbox").remove();d.push('<a class="button-link" href="'+psum[0].href+'">View Map</a>');d.push('<a class="button-link" href="'+kmlurl(psum[0].href)+'">Open KML</a>')}else if(pmap.length>0){$("#kmlmapdisplay").remove();elem=$('a:contains("Download KML")');if(elem.length>0){d.push('<a class="button-link" href="'+pmap[0].href+'">View Map</a>');d.push('<a class="button-link" href="'+elem[0].href+'">Open KML</a>')}}m.innerHTML=d.join(" ")}var g=e.split(",").join(" ").split(" ");for(var n=0;n<g.length;++n)if(g[n].length>0)$(g[n]).remove();var f=document.createElement("style");f.id="androidstyle";f.innerHTML=t;document.body.appendChild(f)}function loadEditor(){}{var tb=document.getElementById("toolbar");if(!tb){tb=document.createElement("DIV");tb.id="toolbar"}var first=null;var prefix="_section";var list=document.getElementsByTagName("TEXTAREA");for(var i=0;i<list.length;++i)if(!!list[i].name&&list[i].name.substr(0,prefix.length)==prefix){if(!first)first=list[i];list[i].onfocus=function(){this.parentNode.insertBefore(tb,this)}}if(first)first.parentNode.insertBefore(tb,first)}if(window.mw&&!!mw){mw.loader.using("mediawiki.action.edit",function(){var e=document.getElementById("toolbar");if(e)e.innerHTML="";mw.toolbar.addButton(false,"Bold text","'''","'''","Bold text","mw-editbutton-bold");mw.toolbar.addButton(false,"Italic text","''","''","Italic text","mw-editbutton-italic");mw.toolbar.addButton({imageFile:"http://ropewiki.com/images/0/01/BulletlistIcon.png",speedTip:"Bulleted list",tagOpen:"* ",tagClose:"",sampleText:"Bulleted list item",imageId:"button-bullet"});mw.toolbar.addButton({imageFile:"http://ropewiki.com/images/4/45/Galleryicon1.png",speedTip:"Insert a picture (.jpg .gif .png .pdf)",tagOpen:"{{pic|",tagClose:"}}",sampleText:"name.jpg ~ caption",imageId:"button-pic1"});mw.toolbar.addButton({imageFile:"http://ropewiki.com/images/d/d4/Galleryiconn.png",speedTip:"Insert a picture gallery (.jpg .gif .png .pdf)",tagOpen:"{{pic|",tagClose:"}}",sampleText:"pic1.jpg ~ caption1 ; pic2.jpg ~ caption2 ; pic3.jpg ~ caption3",imageId:"button-picn"});mw.toolbar.addButton({imageFile:"http://ropewiki.com/images/c/ca/Galleryiconx.png",speedTip:"Insert a large sketch or document (.pdf .gif .png .jpg)",tagOpen:"{{pic|size=X|",tagClose:"}}",sampleText:"sketch.pdf ~ caption",imageId:"button-picx"});mw.toolbar.addButton(false,"Internal link","[[","]]","Link title","mw-editbutton-link");mw.toolbar.addButton(false,"External link (remember http:// prefix)","[","]","http://www.example.com link title","mw-editbutton-extlink");mw.toolbar.addButton(false,"Level 2 headline","\n=== "," ===\n","Headline text","mw-editbutton-headline");mw.toolbar.addButton(false,"Ignore wiki formatting","<nowiki>","</nowiki>","Insert non-formatted text here","mw-editbutton-nowiki");mw.toolbar.addButton(false,"Your signature with timestamp","--[[User:BetaRobot2|BetaRobot2]] ([[User talk:BetaRobot2|talk]]) 17:01, 11 June 2016 (EDT)","","","mw-editbutton-signature");mw.toolbar.addButton(false,"Horizontal line (use sparingly)","\n----\n","","","mw-editbutton-hr");$(function(){mw.toolbar.init()})})}var customizeToolbar=function(){console.log("customizeToolbar");$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{bullist:{label:"Bulleted list",type:"button",icon:"http://ropewiki.com/images/0/01/BulletlistIcon.png",action:{type:"encapsulate",options:{pre:"* ",peri:"Bulleted list item",post:""}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{pic1:{label:"Insert a picture (.jpg .gif .png .pdf)",type:"button",icon:"http://ropewiki.com/images/4/45/Galleryicon1.png",action:{type:"encapsulate",options:{pre:"{{pic|",peri:"name.jpg ~ caption",post:"}}"}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{picn:{label:"Insert a picture gallery (.jpg .gif .png .pdf)",type:"button",icon:"http://ropewiki.com/images/d/d4/Galleryiconn.png",action:{type:"encapsulate",options:{pre:"{{pic|",peri:"pic1.jpg ~ caption1 ; pic2.jpg ~ caption2 ; pic3.jpg ~ caption3",post:"}}"}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{picx:{label:"Insert a large sketch or document (.pdf .gif .png .jpg)",type:"button",icon:"http://ropewiki.com/images/c/ca/Galleryiconx.png",action:{type:"encapsulate",options:{pre:"{{pic|size=X|",peri:"sketch.pdf ~ caption",post:"}}"}}}}});$("#wpTextbox1, .wikieditor").wikiEditor("removeFromToolbar",{section:"advanced",group:"insert",tool:"gallery"})};if(typeof mw!="undefined"){if(!!mw&&$.inArray(mw.config.get("wgAction"),["edit","submit"])!==-1){mw.loader.using("user.options",function(){if(mw.user.options.get("usebetatoolbar")==1){$.when(mw.loader.using("ext.wikiEditor.toolbar"),$.ready).then(customizeToolbar)}});mw.hook("ext.lqt.textareaCreated").add(customizeToolbar)}}function loadFacebook(){}$(function(){var e=document.getElementsByClassName("mw-popout-link");var t;for(t=0;t<e.length;t++){var i=e[t].innerText;var n=i.indexOf(" ");var a=n<0?i:i.substring(0,n);var o=n<0?a:i.substring(n+1);e[t].innerHTML='<a href="'+a+'" target="_blank">'+o+"</a>"}}());function loadcredits(e,v,y){var t=document.getElementById(y);if(!t)return;var w=0;var n;var k=[];var b=geturl("http://ropewiki.com/api.php?format=json&action=query&prop=revisions&rvexcludeuser=BetaRobot&redirects=&continue=");switch(v){case"P":b+="&rvprop=user|size&titles="+e+"&rvlimit=max&rvdir=newer";break;case"K":b+="&rvprop=user|comment&titles=File:"+e+".kml&rvlimit=max&rvdir=newer";break;case"J":b="http://ropewiki.com/api.php?format=json&action=query&titles=File:"+e+" Banner.jpg&prop=imageinfo&iiprop=user|comment";break}function x(m){function d(e){for(var t=0;t<k.length;++t)if(k[t].user==e)return t;return-1}var g=[];var f="Barranquismo.net";var e=document.getElementsByClassName("barranquismonet");for(i=0;i<e.length;++i)g.push(e[i].innerHTML);var u="addcredit";var h=[];var t=document.getElementsByClassName(u);for(i=0;i<t.length;++i)h.push(t[i].innerHTML);$.each(m.query.pages,function(e,t){var i=t.revisions;if(!i)i=t.imageinfo;if(i!=null&&i.length!=null){for(var e=0;e<i.length;++e){if(g.length>0&&i[e].user=="BetaRobot2")i[e].user=f;if(h.length>0&&i[e].user=="BetaRobot2")i[e].user=u;if(g.length==0&&i[e].user.search(f)>=0)continue;if(v=="J"&&i[e].comment){var n=i[e].comment.split(" by ");if(n.length>1){i[e].user=n[1];i[e].comment=""}}if(i[e].user.search("Robot")>=0)continue;if(v=="J")k.splice(0,k.length);var a=d(i[e].user);if(a<0){k.push({user:i[e].user,size:0});a=k.length-1}if(i[e].size!=null){k[a].size+=i[e].size-w;w=i[e].size}if(i[e].comment!=null)k[a].comment=i[e].comment}}if(typeof m["continue"]!="undefined"){$.getJSON(b+"&rvcontinue="+m["continue"].rvcontinue,x);return}function o(e,t){if(e.length==0)return;for(var i=0;i<e.length;++i){if(e[i].user==u)r+=h.join(" & ").split("(").join("[").split(")").join("]");else if(e[i].user.indexOf("http")>0){var n=e[i].user.split("http");r+=n[0].link("http"+n[1])}else r+=e[i].user.link("http://ropewiki.com/User:"+e[i].user);if(e[i].user==f)r+="["+g.join(", ")+"]";else if(t>0)r+=" ("+Math.round(e[i].size/t*100)+"%)";if(i<e.length-1)r+=i<e.length-2?", ":" & "}var a=e[e.length-1].comment;if(a!=null&&a.indexOf("[[File:")>0){var o;if((o=a.indexOf(": "))>0)a=a.substr(o+2);else a=""}if(a!=null&&a!="")r+=" ("+a+")"}var r="";if(w==0)o(k,w);else{var l=0;for(var a=0;a<k.length;++a){if(k[a].size>0)l+=k[a].size;if(k[a].size<0)k.splice(a--,1)}var s=[],c=[];for(var a=0;a<k.length;++a)if(a==0||l==0||k[a].size/l>5/100)s.push(k[a]);else c.push(k[a]);o(s,s.length>1?l:0);if(c.length>0){r+=" with minor contributions by ";o(c,0)}}if(r){var p=document.getElementById(y);if(p)p.innerHTML=r}})}$.getJSON(b,x)}var lastfrom="",lastto="";function displaydirectionsto(e){lastto=e.join();window.open("http://maps.google.com/?output=classic&saddr="+lastfrom+"&daddr="+lastto,"_blank")}function displaydirectionsfrom(e){lastfrom=e.join();if(lastto=="")alert("Click on a 'Directions To' link to get the full route");else window.open("http://maps.google.com/?output=classic&saddr="+lastfrom+"&daddr="+lastto,"_blank")}function displaycoordenates(e){window.prompt("Copy to clipboard with Ctrl+C, Cmd-C, Click&Hold or other methods.",e.join())}function displaydirections(e,t,i){var n="<div><i>";n+='<a href="javascript:displaydirectionsto(['+e+","+t+']);">Directions To</a> - <a href="javascript:displaydirectionsfrom(['+e+","+t+']);">Directions From</a>';if(!!i)n+=i;n+="</i></div>";return n}function displaylocation(e,t,i){var n='<div class="textselect">';var e=parseFloat(e);var t=parseFloat(t);var a=Math.round(e*1e5)/1e5+","+Math.round(t*1e5)/1e5;n+='Coords: <a href="http://maps.google.com/maps?q=loc:'+a+'" target="_blank">'+a+"</a>";if(!!i)n+=i;n+="</div>";return n}var geoelevationService;function getgeoelevation(e,n,a,o){if(!geoelevationService)geoelevationService=new google.maps.ElevationService;if(geoelevationService&&e){var t=[];t.push(e);geoelevationService.getElevationForLocations({locations:t},function(e){if(e[0]){if(!a)a="";if(!o)o="";var t=e[0].elevation*m2ft;var i=document.getElementById(n);if(i)i.innerHTML=a+'<span class="notranslate">'+ft(t)+"</span>"+o}})}}function Distance(e,t){var i=Math,n=i.PI/180;var a=e.lat*n,o=t.lat*n,r=a-o;var l=e.lng*n-t.lng*n;var s=2*i.asin(i.sqrt(i.pow(i.sin(r/2),2)+i.cos(a)*i.cos(o)*i.pow(i.sin(l/2),2)));return s*6378.137*km2mi}var km2mi=.621371;var m2ft=3.28084;function ft(e,t){if(isNaN(e))return"";if(metric)return Math.round(e/m2ft).toLocaleString()+(t?"&nbsp;":"")+"m";else return Math.round(e).toLocaleString()+(t?"&nbsp;":"")+"ft"}function mi(e,t){if(isNaN(e))return"";if(metric)return(Math.round(e/km2mi*10)/10).toLocaleString()+(t?"&nbsp;":"")+"km";else return(Math.round(e*10)/10).toLocaleString()+(t?"&nbsp;":"")+"mi"}function uconv(e,t){if(e==null||e=="")return"";var i="↕";var n=e.split(i);if(n.length>0)n[0]=t(parseFloat(n[0]),e.indexOf("&nbsp;")>0);if(n.length>1)n[1]=ft(parseFloat(n[1]),e.indexOf("&nbsp;")>0);return n.join(" "+i)}function getgeocode(e,t,r){var i="http://maps.googleapis.com/maps/api/geocode/json?latlng="+e.toString().trim()+","+t.toString().trim();$.getJSON(geturl(i),function(e){if(e&&e.results){var t=[];for(var i=0;i<e.results.length;++i)for(var n=0;n<e.results[i].address_components.length;++n){var a=e.results[i].address_components[n];if(a.types.indexOf("political")>=0)if(t.indexOf(a.long_name)<0)t.push(a.long_name)}var o=document.getElementById(r);if(o)o.innerHTML="Geocode:"+t.join(", ")}})}function toggleMetric(e){metric=!metric;setCookie("metric",metric?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleFrench(e){french=!french;setCookie("french",french?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function getLinkLang(e){for(var t=1;t<3&&e;++t){e=e.previousSibling;if(e&&e.nodeName=="IMG"){var i,n;var a=e.src;if((i=a.indexOf("Rwl_"))>0&&(n=a.indexOf(".",i))>0)return a.substr(i+4,n-i-4)}}return null}function checkregname(){var e=window.location.href.toString().split("?");var t=urldecode(getCookie("regnameval"));if(e.length<2&&t!=""){var i=e[0].split("/");var n=i[i.length-1];if(n=="Beta"||n=="Conditions"||n=="conditions.html")window.location.href=e+"?region="+urlencode(t)}}checkregname();function pdfselect(e){var t="",i="";var n=15;var a=RWServerUrl+"/rwr?";var o=document.getElementById("idcredits");if(!o)return;var r=o.innerHTML;if(!r||r=="")return;r=urldecode(r).split(" ").join("_");var l="";var s=e.value;if(s=="P")i=r+".pdf",t=a+"filename="+i+"&pdfx="+r+"&ext=.rw",l="summary=off";else if(s=="PM")i=r+"_MAP.pdf",t=a+"filename="+i+"&pdfx=Map?pagename="+r+"&ext=.rw",l="summary=off";else if(s=="KM")i=r+".kml",t=$("#kmlfilep").html(),n=1;else if(s=="GM")i=r+".gpx",t=$("#kmlfilep").html().split("gpx%3Doff").join("gpx%3Don"),n=1;else if(s=="ZPM")i=r+".zip",t=a+"filename="+i+"&zipx="+r+"&ext=.rw",l="bslinks=off&trlinks=off&summary=off";else if(s=="ZALL")i=r+"+.zip",t=a+"filename="+i+"&zipx="+r+"&ext=.rw",l="bslinks=on&summary=off";else if(s=="S")t="http://ropewiki.com/PDFDownload?pagename="+r+"&ext=.rw";t=rwlink(t,l);if(t=="")return;e.value="";e.blur();var c=true,p=0;setCookie("rwfilename","");var m=setInterval(function(){c=!c;p++;$("#ptext").css("opacity",c?"1.0":"0.5");if(getCookie("rwfilename","")!=""||p>n){clearInterval(m);$("#ptext").css("display","none")}},1e3);$("#ptext").css("display","inline");window.location.href=t}function suggestregion(){var e=document.getElementsByName("Canyon[Coordinates]");if(e.length>0&&e[0].value)return suggestregioncoords(e[0].value);var t=document.getElementsByName("Canyon[Geolocation]");if(t.length>0&&t[0].value)return suggestregiongeocode(t[0].value)}function suggestregiongeocode(e){var t="https://maps.googleapis.com/maps/api/geocode/json?address="+e;$.getJSON(geturl(t),function(e){if(e&&e.results){for(var t=0;t<e.results.length;++t)if(e.results[t].geometry&&e.results[t].geometry.location&&e.results[t].geometry.location.lat&&e.results[t].geometry.location.lng){suggestregioncoords(e.results[t].geometry.location.lat+","+e.results[t].geometry.location.lng);return}}})}function suggestregioncoords(s){s=s.split(" ").join("");var e="http://ropewiki.com/api.php?action=ask&format=json&query=[[Category:Canyons]][[Has coordinates::"+s+" (50000)]]"+"|%3FHas_coordinates|%3FLocated_in_region|limit=1000";$.getJSON(geturl(e),function(e){var t=getrwlist(e);var i=s.split(",");var n={lat:parseFloat(i[0]),lng:parseFloat(i[1])};for(var a=0;a<t.length;++a)t[a].dist=Distance(n,t[a].location);t.sort(function(e,t){return e.dist-t.dist});var o=[];for(var a=1;a<t.length&&o.length<3;++a)if(o.indexOf(t[a].region)<0)o.push(t[a].region);var r=document.getElementById("suggestednearby");if(r)r.innerHTML="Nearby:"+o.join(", ");var l=document.getElementsByName("Canyon[Region]");if(l&&l.length>0&&o.length>0)l[0].value=o[0]})}var skinuser="";function loadSkin(){var e=document.getElementsByClassName("toption");for(var t=0;t<e.length;++t)e[t].style.display="block";var i=urldecode(getCookie("skinconfig"));var n=document.getElementById("skinconfig");if(n!=null){i=urldecode(n.innerHTML);setCookie("skinconfig",urlencode(i))}if(i!=""){var a=i.split(",");skinuser=a[0];if((n=document.getElementById("skinuser"))!=null)if(n.innerHTML==""&&skinuser!=""){var a=window.location.href;if(a.indexOf("?")>=0)a+="&";else a+="?";document.body.style.display="none";window.location.href=a+"skinuser="+skinuser}if(a.length>1&&a[1]!=""){if((n=document.body)!=null){n.style.backgroundColor=a[1]}if((n=document.getElementById("mw-page-base"))!=null){n.style.backgroundColor=a[1];n.style.backgroundImage="none"}}if(a.length>2&&a[2]!=""){var o=a[2].split("|");if((n=document.getElementById("p-logo"))!=null)n.innerHTML='<a href="'+o[0]+'"><img src="'+o[1]+'"/></a>'}for(var r=3;r<a.length;++r){var l="";var o=a[r].split("*");var s=o[0].split("|");for(var t=1;t<o.length;++t){var c=o[t].split("|");l+='<li id="n-'+t+'"><a href="'+c[0]+'">'+c[1]+"</a></li>"}if((n=document.getElementById(s[0]))!=null)if(l!="")n.innerHTML="<h3>"+s[1]+'</h3><div class="body"><ul>'+l+"</ul></div>";else n.innerHTML=""}}}var starlist=["http://ropewiki.com/images/9/9d/GoldStar0.png","http://ropewiki.com/images/8/86/GoldStar1.png","http://ropewiki.com/images/f/fd/GoldStar2.png","http://ropewiki.com/images/8/8d/GoldStar3.png","http://ropewiki.com/images/4/41/GoldStar4.png"];function GetStar(e,t){var i='<img width="'+t+'px" height="'+t+'px" src="',n='"/>';return i+starlist[4]+n}function GetStarFraction(e){if(e>=.875)return 4;else if(e>=.625)return 3;else if(e>=.375)return 2;else if(e>=.125)return 1;else return 0}function GetStars(e,t,i){var n='<span style="white-space: nowrap;">';for(var a=0;a<5;++a){n+='<img width="'+i+'px" height="'+i+'px" src="'+starlist[GetStarFraction(e)]+'"/>';e-=1}if(t>0)n+='<span class="starsub">'+t+"</span>";n+="</span>";return n}function GetStarsVote(e,t,i,n){var a='<span class="starRate" style="white-space: nowrap;">';var o=["Delete","Not worth doing","Worthwhile","Ok","Great","Among the best"];if(!document.getElementById("curuser"))for(var r=0;r<=5;++r)o[r]="Log in to rate";for(var r=1;r<=5;++r){a+='<b id="'+r+'" class="starRate'+GetStarFraction(e)+'" style="cursor:pointer" onclick="StarVote(this)"><span class="starText starvText">'+o[r]+"</span></b>";e-=1}if(t>0)a+='<b id="0" class="starx starsub" style="color:red;cursor:pointer;" onclick="StarVote(this)">X<span class="starText starvText">'+o[0]+"</span></b>";else if(i>0)a+='<span class="starsub">'+i+"</span>";a+="</span>";return a}function GetStarsId(e){var t=e.parentNode;while(t!=null&&t.nodeName!="TR")t=t.parentNode;if(t==null)return null;var i=t.getElementsByTagName("A");if(i&&i[0])return i[0].innerHTML;return null}function StarVote(e){var t=e.id;var i=GetStarsId(e);var n=document.getElementById("curuser");if(t&&i&&n){var a=n.innerHTML;var o=document.createElement("IFRAME");var r="Votes:"+i+"/"+a;if(t=="0"){t="";a=""}o.src="http://ropewiki.com/api.php?action=sfautoedit&form=Page_rating&target="+r+"&query=Page_rating[Page]="+i+"%26Page_rating[Rating]="+t+"%26Page_rating[User]="+a;o.style.display="none";document.body.appendChild(o);var l=e.parentNode;while(l!=null&&l.className.indexOf("starv")<0)l=l.parentNode;if(l){l.innerHTML=GetStarsVote(t,t,-1,16);l.className="starv votedrow"}}}function LoadStars(){var e=window.location.href.toString();var t=starrate||e.indexOf("onlyuser=")>0||e.indexOf("starratechk=")>0;var i=document.getElementsByClassName("starv");for(var n=0;n<i.length;n++){var a;if(typeof i[n].starsvstr=="undefined")a=i[n].starsvstr=i[n].innerHTML;else a=i[n].starsvstr;var o=a.split("*");if(o.length<2)continue;var r=parseFloat(o[0]);var l=GetStarsId(i[n]);if(l!=null){var s=-1;var c=-1;c=parseFloat(o[1]);var p=o[1].split("#");if(p.length>1)s=parseInt(p[1]);if(t&&c>0){r=c;s=0}if(starrate){i[n].innerHTML=GetStarsVote(r,c,s,16);if(c>0)i[n].className="starv votedrow"}else{i[n].innerHTML='<a href="http://ropewiki.com/List_ratings?location='+l+'">'+GetStars(r,s,16)+"</a>";i[n].title=r+"*"+(s<=0?"":" ("+s+" ratings)");if(c>0)i[n].className="starv votedsub"}}else{i[n].innerHTML=GetStars(r,0,16)}}}var gtrans=null;var gtrans2="x";var glist,genlist;function textTranslation(e,t,i){if(!glist)return e;if(!t)t="";if(!i)i="";for(var n=0;n<glist.length;++n)e=e.replace(genlist[n],t+glist[n]+i);return e}function loadTranslation(){gtrans=getCookie("googtrans").split("/");if(gtrans.length>=3)gtrans=gtrans[2];else gtrans=null;if(gtrans==gtrans2)return;gtrans2=gtrans;var e=["en,Introduction,Approach,Descent,Exit,Red tape,Background,Credits,Beta sites,Trip reports and media,Time,Raps,Shuttle,Start,End,Road,Parking,(Upper),(Middle),(Lower)","es,Descripci�n,Aproximaci�n,Descenso,Retorno,Regulaciones,Historia,Cr�ditos,Referencias,Informes del recorrido y fotos,Horario,R�peles,Combinaci�n,Inicio,Final,Carretera,Parking,(Superior),(Intermedio),(Inferior)","pt,Descri��o,Aproxima��o,Descida,Retorno,Regulamentos,Hist�ria,Cr�ditos,Refer�ncias,Relat�rios de viagens e fotos,Tempos,Rapeis,Combina��o,Entrada,Sa�da,Estrada,Parking,(Superior),(Intermedi�rio),(Inferior)","it,Descrizione,Avvicinamento,Discesa,Rientro,Normativa,Storia,Crediti,Siti web,Report di viaggio e foto,Tempi,Calate,Navetta,Entrata,Uscita,Strada,Parking,(Superiore),(Intermedio),(Inferiore)","fr,Description,Approche,Descente,Retour,R�glements,Historique,Cr�dits,Sites internet,Rapports de voyage et photos,Temps,Rappels,Navette,Depart,Arrivee,Route,Parking,(Sup�rieur),(Interm�diaire),(Inf�rieur)","de,Einleitung,Zustieg,Zejscie,R�ckweg,Vorschriften,Hintergrund,Credits,Weblinks,Reiseberichte und fotos,Zeit,Abseilen,Schiffchen,Einleitung,Ausstieg,Strasse,Parking,(H�her),(Intermedi�r),(Untere)","ca,Descripci�,Aproximaci�,Descens,Retorn,Regulacions,Hist�ria,Cr�dits,Refer�ncies,Informes del recorregut i fotos,Horari,R�pels,Combinaci�,Inici,Final,Carretera,Parking,(Superior),(Intermedi),(Inferior)"];glist=null;genlist=(e[0].substr(3)+e[0].substr(2).toLowerCase()).split(",");for(var t=0;t<e.length;++t)if(e[t].substr(0,2)==gtrans){glist=(e[t].substr(3)+e[t].substr(2).toLowerCase()).split(",");break}var i=document.getElementsByClassName("ctranslate");for(var n=0;n<i.length;n++){var a=i[n];var o=a.innerHTML;if(!a.oinnerHTML)a.oinnerHTML=o;else o=a.oinnerHTML;a.innerHTML=textTranslation(o,'<span class="notranslate"> '," </span>")}var r=document.getElementsByClassName("external");for(var n=0;n<r.length;n++){var l="ext=.rw";var s=r[n];if(!s.href)continue;var c=s.href;if(c.indexOf("translate.google.com")<0&&c.indexOf(l)<0)continue;var o=s.innerHTML;if(!s.ohref){s.ohref=c;s.oinnerHTML=o}else{c=s.ohref;o=s.oinnerHTML}if(c.indexOf(l)>=0){s.href=c=rwlink(c,"");continue}var p=c.indexOf("&u=http");if(p<0)continue;var m=c.substr(p+3);var d="en";var g="auto";var p=c.indexOf("&sl=");if(p>=0){g=c.substr(p+4,2);if(g=="au")g="auto"}if(gtrans)d=gtrans;if(g!=d){s.style.display="inline";s.href="http://translate.google.com/translate?"+"&hl="+d+"&sl="+g+"&tl="+d+"&u="+m}else{s.style.display="none"}}}function rwlink(e,t){var i="ext=.rw";var n=urlcheckbox;var a=t.split("&");for(var o=0;o<a.length;++o){var r=a[o].split("=");if(r.length!=2)continue;n=setparam(n,r[0],r[1])}if(metric)e=e.replace(i,"metric=on&"+i);if(french)e=e.replace(i,"french=on&"+i);if(gtrans)e=e.replace(i,"gtrans="+gtrans+"&"+i);if(n)e=e.replace("&"+i,n+"&"+i);if(n.indexOf("smallscreen=on")<0)e=e.replace(i,"docwidth="+$(window).width()+"&"+i);return e}function getDomainFaviconURL(e){var t=e.match(/(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/);t=RegExp.$2;var i=new Image;var n="http://"+t+"/favicon.ico";var n="http://www.google.com/s2/favicons?domain="+t;return n}function openfavlinks(){var e="";var t=document.getElementsByClassName("favlinks");for(i=0;i<t.length;++i){var n=t[i].getElementsByTagName("A")[0].href;e+='<hr><h2>From <a href="'+n+'">'+n+'</a>:</h2><iframe src="'+n+'" frameborder="0" width="100%" min-height="3000px" style="font-size:smaller;"></iframe>'}var a=document.getElementById("allfavlinks");if(!a){a=document.createElement("DIV");a.id="allfavlinks";var o=document.getElementById("content");if(o==null)o=document.body;o.appendChild(a)}if(a)a.innerHTML=e}var domains=document.getElementsByClassName("favicon");for(var i=0;i<domains.length;i++){var links=domains[i].getElementsByTagName("A");{var link=links[0];var href=link.href;var fvcurl=getDomainFaviconURL(href);var img='<img width="32px" height="32px" style="vertical-align:middle;margin-left:0px;margin-top:0px;width:32px;height:32px" src="'+fvcurl+'"/>';link.innerHTML=img+'<span style="vertical-align: middle;"> '+link.innerHTML+"</span>"}}var fav=document.getElementById("favlinks");if(fav)fav.innerHTML='<a href="javascript:openfavlinks();">'+fav.innerHTML+"</a>";var fav=document.getElementById("allfavlinks");if(fav)openfavlinks();var starrate=getCookie("starrate");if(window.location.href.toString().indexOf("starratechk=")>=0)starrate=true;var labels=getCookie("labels");var slideshowchk=getCookie("slideshowchk","undefined");if(slideshowchk=="undefined")slideshowchk="on";slideshowchk=slideshowchk!="";function toggleUrlcheckbox(e){urlcheckbox=setparam(urlcheckbox,e.id,e.checked?"on":"off");setCookie("urlcheckbox",urlcheckbox,360*10);gtrans2="x";loadTranslation()}function togglewchk(varname){var varval=!eval(varname);setCookie(varname,varval?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleStarrate(e){starrate=!starrate;setCookie("starrate",starrate?"on":"",360*10);if(starrate){LoadStars()}else{document.body.style.cursor="wait";window.location.reload()}}function toggleLabels(e){labels=!labels;setCookie("labels",labels?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleSlideshow(e){slideshowchk=!slideshowchk;if(typeof e!="undefined")slideshowchk=e;setCookie("slideshowchk",slideshowchk?"on":"",360*10);var t=document.getElementsByClassName("slideshow");for(var i=0;i<t.length;i++)t[i].style.display=slideshowchk?"":"none";var t=document.getElementsByClassName("slideshowschk");for(var i=0;i<t.length;i++)t[i].checked=slideshowchk;if(!slideshowchk){document.body.style.zIndex=1;document.body.style.zoom=1.0000001}else{document.body.style.zIndex=0;document.body.style.zoom=1}}function loadUserInterface(document){$("title").addClass("notranslate");$(".firstHeading span").addClass("notranslate");$("#searchform").addClass("notranslate");$(".suggestions").addClass("notranslate");$(".mw-headline").addClass("ctranslate");$(".toctext").addClass("ctranslate");var colgroup=document.getElementsByClassName("colgroup");for(var i=0;i<colgroup.length;++i){var table=colgroup[i];var list=table.id.split(".");findtag(table.childNodes,"TR",function e(t){var i=0;var n=t.childNodes;for(var a=0;a<n.length&&i<list.length;++a){var o=n[a];if(o.nodeName=="TD"){var r=list[i];if(r.length>0)if(o.getElementsByClassName(r).length==0)o.className+=" "+r;++i}}})}var sections=document.getElementsByName("_section[Background]");for(var i=0;i<sections.length;i++){var text=sections[i].innerHTML;if(text.trim().split(" ").join()=="==Background==")sections[i].innerHTML=""}var jslink=document.getElementsByClassName("jslink");for(var i=0;i<jslink.length;i++)jslink[i].innerHTML='<a href="javascript:'+jslink[i].id+'();">'+jslink[i].innerHTML+"</a>";var tablinks=document.getElementsByClassName("tablinks");for(var i=0;i<tablinks.length;i++){var links=tablinks[i].getElementsByTagName("A");for(var j=0;j<links.length;j++){var link=links[j];link.target="tabIframe2"}}var tabmain=document.getElementsByClassName("tabMain");if(tablinks.length>0&&tabmain.length>0){var tablink1=tablinks[0].getElementsByTagName("A");if(tablink1.length>0)tabmain[0].innerHTML='<div class="tabIframeWrapper"><iframe class="tabContent" name="tabIframe2" src="'+tablink1[0].href+'" marginheight="8" marginwidth="8" frameborder="0"></iframe></div>'}var nofollow=document.getElementsByClassName("nofollow");for(var i=0;i<nofollow.length;i++){var links=nofollow[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];link.rel="nofollow"}}}var popups=document.getElementsByClassName("popwin");for(var i=0;i<popups.length;i++){var links=popups[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];var url=link.href;link.href=popupwin(url)}}}var popups=document.getElementsByClassName("pops");for(var i=0;i<popups.length;i++){var links=popups[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];link.target="_blank"}}}var elems=document.getElementsByClassName("popforms");for(var i=0;i<elems.length;i++){var links=elems[i].getElementsByTagName("A");for(var l=0;l<links.length;++l){var href=links[l].attributes["href"];if(href){var str=href.value;str=str.replace("Special:FormEdit/File","Special:Upload");href.value=str}}}var setfield=$("ul.setfield");for(var i=0;i<setfield.length;i++){var sp=setfield[i].innerHTML.split("<li>");for(var j=1;j<sp.length;++j){var spj=sp[j].split("<");var name=spj[0].trim();spj[0]='<span onclick="setfield(this)" style="cursor:pointer;" >'+name+"</span>";sp[j]=spj.join("<")}setfield[i].innerHTML=sp.join("<li>")}var setfield=$("ul.regioncount");for(var i=0;i<setfield.length;i++){var sp=setfield[i].innerHTML.split("<li>");for(var j=1;j<sp.length;++j){var len=sp[j].indexOf("<",sp[j].indexOf("</a")+1);var text=sp[j].substring(0,len).trim().replace("(i)",'<hr id="vri">');text='<span class="regioncount">'+text+"</span>";sp[j]=text+sp[j].substring(len)}setfield[i].innerHTML=sp.join("<li>")}var readmore=document.getElementsByClassName("readmore");for(var i=0;i<readmore.length;i++){var text=readmore[i].innerHTML;readmore[i].innerHTML='<a href="#overviewstart" class="readmorebutton">'+text+"</a>"}LoadStars();var months=document.getElementsByClassName("monthv");for(var i=0;i<months.length;i++){var str=months[i].innerHTML;if(str.length==0)continue;var out='<table class="wikitable bst mbst nostranslate"><tr>';for(var s=0;s<str.length;++s)switch(str.charAt(s)){case",":out+='<td class="bss"></td>';break;case"X":out+='<td class="bsg"></td>';break;case"x":out+='<td class="bsy"></td>';break;case".":out+="<td></td>";break}out+="</tr></table>";months[i].innerHTML=out;months[i].style.display="block"}if(metric){var texts=document.getElementsByClassName("uft");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,ft);texts=document.getElementsByClassName("umi");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,mi);texts=document.getElementsByClassName("urap");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,rap)}{var texts=document.getElementsByClassName("uaca");for(var i=0;i<texts.length;i++)texts[i].innerHTML=acaconv(texts[i].innerHTML);var texts=document.getElementsByClassName("uacamore");for(var i=0;i<texts.length;i++)texts[i].innerHTML=acaconv(texts[i].innerHTML,true)}elem=document.getElementsByClassName("urlcheckbox");for(var i=0;i<elem.length;i++){var on=getparam(urlcheckbox,elem[i].id,elem[i].innerHTML);elem[i].className+=" notranslate";elem[i].innerHTML='<input id="'+elem[i].id+'" class="gmnoprint" type="checkbox" onclick="toggleUrlcheckbox(this)" '+(on=="on"?"checked":"")+">"}elem=document.getElementsByClassName("uchk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleMetric()" '+(metric?"checked":"")+">Metric</label>"}elem=document.getElementsByClassName("fchk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleFrench()" '+(french?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("wchk");for(var i=0;i<elem.length;i++){var id=elem[i].id;var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="togglewchk(\''+id+"')\" "+(eval(id)?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("schk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleStarrate()" '+(starrate?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("schkon");for(var i=0;i<elem.length;i++)elem[i].style.display=starrate?"table-row":"none";elem=document.getElementsByClassName("external");for(var i=0;i<elem.length;i++){var link=elem[i];var from=getLinkLang(link);if(from){var to="en";var ourl=link.href;ourl.replace("&","%26");div=document.createElement("SPAN");div.innerHTML=' <a rel="nofollow" class="external text" style="display:none" href="http://translate.google.com/translate?'+"&hl="+to+"&sl="+from+"&tl="+to+"&u="+ourl+'">'+"[Translated]</a>";link.parentNode.insertBefore(div,link.nextSibling)}}var fbuser=document.getElementById("fbuser");if(fbuser)fbuser.innerHTML='<input class="submitoff" type="submit" onclick="fbusersearch()" value="'+fbuser.innerHTML+'">';var hdr=document.getElementById("firstHeading");var pdf=document.getElementById("idcredits");var kml=document.getElementById("kmlmapdisplay");var edit=window.location.href.toString().indexOf("&action=")>0;if(hdr&&pdf&&kml&&!edit){var text=' <select class="notranslate" style="width:27px;height:32px;background-image:url(http://ropewiki.com/images/a/ad/DownIcon.png);" id="pdfselect" value="" onchange="pdfselect(this)">';text+='<option selected disabled hidden style="display: none" value=""></option>';text+='<option value="P">PDF: Page</option>';text+='<option value="PM">PDF: Map</option><option value="KM">KML: Map</option><option value="GM">GPX: Map</option>';text+='<option value="ZPM">ZIP: Page + Maps</option><option value="ZALL">ZIP: P + M + Links</option>';text+='<option value="S">*: Settings</option></select>';text+='<img id="ptext" height="32" style="display:none;vertical-align:top" src="http://ropewiki.com/extensions/SemanticForms/skins/loading.gif"/>';var div=document.createElement("SPAN");div.className="gmnoprint";div.title="Download";div.id="pdfbutton";div.innerHTML=text;hdr.appendChild(div)}var creditsline=document.getElementById("idcredits");if(creditsline){var pagename=creditsline.innerHTML;loadcredits(pagename,"K","Kcredits");loadcredits(pagename,"P","Pcredits");loadcredits(pagename,"J","Jcredits")}var referencepic=document.getElementById("referencepic");if(referencepic){var approach=document.getElementById("Approach");if(approach){var h2=approach.parentNode;while(h2!=null&&h2.nodeName!="H2")h2=h2.parentNode;if(h2!=null){h2.parentNode.insertBefore(referencepic,h2);referencepic.style.display="block"}}}elem=document.getElementsByClassName("titleuser");if(elem.length>0){var floatdiv="";for(var i=0;i<elem.length;i++){var str=elem[i].innerHTML.split(",");var img='<img src="'+str[0]+'"/>';if(str.length>1)floatdiv+='<a href="'+str[1]+'" title="Visit the main page">'+img+"</a>";else floatdiv+=img}elem=document.getElementById("firstHeading");if(elem){var src=elem.innerHTML;elem.innerHTML='<div style="float:right;clear:right">'+floatdiv+"</div>"+src}}var wdir=1,wval=255,wstep=128;var wtimer=setInterval(function(){wval+=wdir;if(wval>255){wval=255;wdir=-wstep}if(wval<239){wval=239;wdir=wstep}var e=document.getElementsByClassName("rwwarning");var t="#"+((wval<<16)+(wval<<8)).toString(16);for(var i=0;i<e.length;++i){e[i].style.backgroundColor=t;var n=e[i].childNodes;for(var a=0;a<n.length;++a)if(n[a].style)n[a].style.backgroundColor=t}var o=document.getElementsByClassName("rwwarningbox");for(var i=0;i<o.length;++i)if(o[i].style)o[i].style.backgroundColor=t},1e3);var realnames=document.getElementById("userrealnames");if(realnames){var userids=[],usernames=[];var list=realnames.innerHTML.split('title="User:');for(var i=1;i<list.length;++i){var id=list[i].split('"')[0].split(" (page")[0];var name=list[i].split("<")[0].split(">")[1];userids.push(id);usernames.push(name)}elem=document.getElementsByClassName("userid");for(var i=0;i<elem.length;i++){var id=elem[i].innerHTML;var n=userids.indexOf(id);if(n>=0){elem[i].innerHTML=usernames[n];elem[i].style.display="block"}}}var autorefresh=document.getElementById("autorefresh");if(autorefresh!=null){var id=autorefresh.innerHTML;var fr=document.createElement("IFRAME");fr.src="http://ropewiki.com/api.php?action=sfautoedit&form=AutoRefresh&target=Votes:AutoRefresh&query=AutoRefresh[Location]="+id;fr.style.display="none";document.body.appendChild(fr)}var kmlicons=document.getElementById("kmlicons");if(kmlicons!=null)kmliconlist=kmlicons.innerHTML.split(",");var lines=document.getElementsByClassName("pinmap");for(var i=0;i<lines.length;i++){var icon;if(lines[i].id){var idlist=lines[i].id.split(".");if(idlist.length>1)icon=kmliconlist[Number(idlist[1])*6+Number(idlist[0])]}var link=lines[i].parentNode.getElementsByTagName("A")[0];lines[i].id=id=link.innerHTML;lines[i].innerHTML=pinicon(lines[i].id,icon)+lines[i].innerHTML}var coords="";var kmlmarker=document.getElementById("kmlmarker");if(kmlmarker)coords=kmlmarker.innerHTML.toString().split(" ").join("");var staticdebug=typeof staticscripts!="undefined";var weatherdiv=document.getElementById("weatherdiv");if(coords.length>0&&weatherdiv&&weather){var url="http://api.wunderground.com/api/bc1f237fb64ef165/alerts/forecast10day/geolookup/q/"+coords+".json";if(staticdebug)url="http://localhost/rw/umpqua.json";$.getJSON(geturl(url),function(e){if(e&&e.forecast&&e.forecast.simpleforecast&&e.forecast.simpleforecast.forecastday&&e.forecast.simpleforecast.forecastday.length>0){var t;var i=weatherdiv.getElementsByTagName("A");if(i&&i.length>0&&i[0].href)t=i[0].href;var n=e.forecast.simpleforecast.forecastday;var a="";a+='<div class="wstlogo noprint">';if(t)a+='<a href="'+t+'">';a+='<span class="notranslate">';var o,r;if(e.location&&e.location.nearby_weather_stations&&e.location.nearby_weather_stations.pws&&e.location.nearby_weather_stations.pws.station&&e.location.nearby_weather_stations.pws.station.length>0){o=e.location.nearby_weather_stations.pws.station[0];o.name="((&#9899;)) "+o.id}if(e.location&&e.location.nearby_weather_stations&&e.location.nearby_weather_stations.airport&&e.location.nearby_weather_stations.airport.station&&e.location.nearby_weather_stations.airport.station.length>0){r=e.location.nearby_weather_stations.airport.station[0];r.name="&#9992;"+r.city}var l=coords.split(",");if(l.length>=2){var s=1e15,c=1e15;if(o)s=Distance({lat:l[0],lng:l[1]},{lat:o.lat,lng:o.lon});if(r)if((c=Distance({lat:l[0],lng:l[1]},{lat:r.lat,lng:r.lon}))<s)o=r,s=c;a+="~"+mi(s)+" ";if(map&&o){var p=[];if(o.neighborhood)p.push(o.neighborhood);if(o.city)p.push(o.city);if(o.state)p.push(o.state);else if(o.country)p.push(o.country);var m=new google.maps.LatLng(o.lat,o.lon);var d=new google.maps.InfoWindow({content:"<b>"+o.name+"</b>"+'<div class="textselect">'+p.join(", ")+"</div>"+'<div class="textselect">'+displaylocation(o.lat,o.lon)+'<div id="elevation"></div>'+"</div>"});var g=new google.maps.Marker({position:m,map:map,infowindow:d,optimized:false,zIndex:10,icon:{url:"https://icons.wxug.com/logos/PNG/wundergroundLogo_4c.png",scaledSize:new google.maps.Size(45,32)}});google.maps.event.addListener(g,"click",function(){this.infowindow.open(map,this);getgeoelevation(this.getPosition(),"elevation","Elevation: ")})}}if(o)a+=" "+o.name;var f=n.length-1;a+=": "+n[0].date.day+" "+n[0].date.monthname_short+" - "+n[f].date.day+" "+n[f].date.monthname_short+" ";a+="</span>";a+='<div style="position:relative"><img style="position:absolute;left:-75px;width:75px" src="https://icons.wxug.com/logos/PNG/wundergroundLogo_4c.png"/></div>';if(t)a+="</a>";a+="</div>";a+='<table class="wikitable wst bst notranslate"><tr style="line-height:5px">';for(var u=0;u<n.length;++u){a+="<th>"+n[u].date.weekday_short+"<br>";a+="</th>"}a+="</tr><tr>";for(var u=0;u<n.length;++u){var h=metric?n[u].high.celsius:n[u].high.fahrenheit;var v=metric?n[u].low.celsius:n[u].low.fahrenheit;a+='<td title="'+n[u].date.day+" "+n[u].date.monthname+" : "+n[u].conditions+", Max "+h+" Min "+v+'">';a+='<div><img class="weatherimg" src="'+n[u].icon_url+'"/></div>';a+='<div class="weatherh">'+h+'</div><div class="weatherl">'+v+"</div>";a+="</td>"}a+="</tr>";if(e.alerts&&e.alerts.length>0){a+='<tr><td colspan="'+n.length+'" style="padding:0;">';var y=[];for(var u=0;u<e.alerts.length;++u)y.push(e.alerts[u].description+"!");if(t)a+='<a href="'+t+'">';a+='<div class="weatheralt rwwarningbox">'+y.join("<br>")+"</div>";if(t)a+="</a>";a+="</td></tr>"}a+="</table>";weatherdiv.innerHTML="<div>"+a+"</div>"}})}var maptype=document.getElementById("kmltype");var waterflowdiv=document.getElementById("waterflowdiv");if(coords.length>0&&waterflowdiv)if(maptype&&(maptype.innerHTML=="topo"||staticdebug)){function extractVal(e,t){var i=e.indexOf(t);if(i<0)return"";i=e.indexOf(":",i);if(i<0)return"";var n=e.indexOf(" ",i);return e.substring(i+1,n)}var url="http://d5a.net/rwr?waterflow=winfo="+coords;if(staticdebug)url="http://d5a.net/rwr?waterflow=winfo="+"33.7717,-111.1197";$.getJSON(geturl(url),function(e){var t="";if(e&&e.list&&e.list.length>0){var i=e.list[0];var n=parseInt(extractVal(i,"Drain"));if(!isNaN(n)){if(metric)t=Math.round(n)+"km<sup>2</sup>";else t=Math.round(n*.386)+"mi<sup>2</sup>";t='<span class="notranslate">~'+t+"</span>";if(n>100)t+='<hr id="cd5" title="May massively flood with heavy rains and keep flooded for many days afterwards">';else if(n>50)t+='<hr id="cd4" title="May massively flood with heavy rains">';else if(n>25)t+='<hr id="cd3" title="May flood with heavy rains">'}}waterflowdiv.className="";waterflowdiv.innerHTML+=" "+t})}var tt,it,isrc=null,ttmove=0,ttshow=0;var boxes=document.getElementsByClassName("galleryboxview");document.onmousemove=function(){if(tt&&it&&ttmove>0){tt.style.display="none";it.src=""}++ttmove;ttshow=-3};for(var i=0;i<boxes.length;i++){boxes[i].onmouseout=function(){isrc=null};boxes[i].onmouseover=function(){var e=$(this).find("#highres");if(!e||e.length==0)return;isrc=e[0].innerHTML;if(!tt){tt=document.createElement("div");tt.style.cssText="background-color:none; position: fixed; top:5%; left:5%; zIndex:9999; width:90%; height: 90%; text-align:center; display:none";it=document.createElement("img");it.style.cssText="width:auto; height:100%;border: 1px solid #404040;margin:10px;background-color:#f0f0f0";it.src=isrc;it.alt="LOADING...";tt.appendChild(it);document.body.appendChild(tt)}}}}var sortby="";function loadFormInterface(){function e(e,t,i){r=document.getElementById(e);if(!r)return;var n=getparam(o,e,r.innerHTML);var a;a="black";if(deftext(n))a="silver";r.innerHTML=t+"color:"+a+';" onfocus="inputfocus(this)" onkeydown="inputkey(event,'+i+')" value="'+n+'">'}var o=window.location.href.toString();var t=document.getElementById("locfind");if(t){e("locname",'<input id="locnameval" class="submitoff" autocomplete="on" style="width:90%;',"locsearch");e("locdist",'<input id="locdistval" class="submitoff" autocomplete="on" size="15" style="',"locsearch");t.innerHTML='<input class="submitoff" type="submit" onclick="locsearch()" value="'+t.innerHTML+'">';var i=document.getElementById("mapfind");if(i)i.innerHTML='<input class="submitoff" type="submit" onclick="mapsearch()" value="'+i.innerHTML+'">'}var n=document.getElementById("regfind");if(n){e("regname",'<input id="regnameval" class="submitoff" autocomplete="on" style="width:30em;',"regsearch");n.innerHTML='<input class="submitoff" type="submit" onclick="regsearch()" value="'+n.innerHTML+'">';var a=urldecode(getCookie("regnameval"));if(a!=""){var r=document.getElementById("regnameval");r.value=a;if(o.split("?").length>1)r.focus()}}var l=document.getElementById("filters");if(l){var s=document.getElementsByClassName("optionchk");for(var c=0;c<s.length;c++){var p=s[c].id+"chk";var m=o.indexOf("&"+p)>0;s[c].innerHTML='<label style="white-space: nowrap;"><input id="'+p+'" class="optionschk submitoff" type="checkbox" onclick="toggle'+p+"("+"'"+p+"'"+')" '+(m?"checked":"")+">"+s[c].innerHTML+"</label>";toggleOption(p,m)}}if(l){var s=document.getElementsByClassName("rwSort");var d=document.getElementById("sortby");if(d)sortby=d.innerHTML;for(var c=0;c<s.length;c++){var g="rwsortud.gif";if(s[c].id==sortby)g="rwsortdn.gif";if("-"+s[c].id==sortby)g="rwsortup.gif";s[c].className+=" notranslate";s[c].style.cssText+="cursor: pointer; background-repeat: no-repeat; background-position: center right; padding-right:9px; padding-left:0px; background-image: url(http://sites.google.com/site/rwicons/"+g+");";s[c].onclick=function e(t){var i=$(this).offset();var n=$(this).height();var a=i.top;var o=a+n/2;if(t.pageY<o){psortby="-"+this.id;nsortby=this.id}else{psortby=this.id;nsortby="-"+this.id}sortby=sortby==psortby?nsortby:psortby;filtersearch()}}}var s=document.getElementsByClassName("filtersel");for(var c=0;c<s.length;c++){var f=s[c].id+"flt";var u=s[c].innerHTML.split(",");var h="";var v=urlget(o,s[c].id+"=","").split(",");var y=getCookie(f).split(",");for(var w=0;w<u.length;++w){var m=y.indexOf(u[w])>=0;if(v.length>0&&v[0]!="")m=v.indexOf(u[w])>=0;h+="<option "+(m?'selected="selected"':"")+'value="'+u[w]+'">'+u[w]+"</option>";if(m){var k=document.getElementsByClassName(f+u[w]);for(var b=0;b<k.length;b++)k[b].style.display=""}}s[c].innerHTML='<select id="'+f+'" class="'+f+'" onclick="toggleFilterSel(this)">'+h+"</select>"}var s=document.getElementsByClassName("filterchk");for(var c=0;c<s.length;c++){var f=s[c].id+"flt";var u=s[c].innerHTML.split(",");var x=document.getElementById(s[c].id+"icons");var h="";var v=urlget(o,s[c].id+"=","").split(",");for(var w=0;w<u.length;++w){var p=f+"_"+u[w];var m=getCookie(p)!="";if(v.length>0&&v[0]!="")m=v.indexOf(u[w])>=0;if(x)h+=" "+'<label title="'+x.childNodes[w].title+'"><input id="'+p+'" class="'+f+'" style="margin:0;padding=0" type="checkbox" onclick="toggleFilter('+"'"+p+"'"+')" '+(m?"checked":"")+">"+x.childNodes[w].innerHTML+"</label>";else h+=" "+'<label title="'+u[w]+'"><input id="'+p+'" class="'+f+'" style="" type="checkbox" onclick="toggleFilter('+"'"+p+"'"+')" '+(m?"checked":"")+">"+u[w]+"</label>"}s[c].innerHTML=h}var T=document.getElementById("filterbutton");if(T)T.innerHTML='<input class="submitoff" type="submit" onclick="filtersearch()" value="'+T.innerHTML+'">';var L=document.getElementById("starshowhide");if(L&&l){var E=L.getElementsByTagName("A");for(var c=0;c<E.length;++c)E[c].removeAttribute("href");var I="border:2px solid #0070B0";var M=L.getElementsByTagName("IMG");for(var c=0;c<M.length;++c){M[c].style.cssText=I;M[c].removeAttribute("href");M[c].active=true;M[c].q=0;if(M[c].alt)M[c].q=Number(M[c].alt);M[c].onclick=function e(t){this.active=!this.active;this.style.cssText=this.active?I:"";var i=qmaps[this.q]=this.active?map:null;for(var n=0;n<markers.length;++n){if(markers[n].q==this.q){markers[n].setMap(i);if(markers[n].highlight)markers[n].highlight.setMap(i)}}}}}var B=document.getElementById("locdefault");if(B){var p="locsearchchk";toggleOption(p,true)}var s=document.getElementsByClassName("slideshowchk");for(var c=0;c<s.length;c++)s[c].innerHTML='<label style="white-space: nowrap;"><input class="slideshowschk submitoff" type="checkbox" onclick="toggleSlideshow()" '+(slideshowchk?"checked":"")+">"+s[c].innerHTML+"</label>";toggleSlideshow(slideshowchk);var C=document.getElementsByClassName("optionform");var S=window.location.href;var S=S.split("#")[0].split("?");if(S.length>1){var N=S[1].replace("&locname=","&noloc=").replace("&locsearchchk=on","");for(var c=0;c<C.length;c++){var E=C[c].getElementsByTagName("A");for(var w=0;w<E.length;++w){var H=E[w].attributes["href"];if(H&&H.value){var h=H.value;if(h.indexOf("?")>=0)h+="&"+N;else h+="?"+N;H.value=h}}}}CollapsibleLists.apply()}function urldecode(e){return decodeURIComponent(e).split("+").join(" ")}function urlencode(e){return encodeURIComponent(e)}function urlget(e,t,i){var n=i;var a=e.indexOf(t);if(a>=0){a+=t.length;var o=e.indexOf("&",a);if(o>0)n=e.substring(a,o);else n=e.substring(a);n=urldecode(n)}return n}function addparam(e,t,i){var n="&"+t+"=";var a=e.indexOf(n);if(a<0)e+=n+i;else{var o=e.substr(0,a);var r=e.substr(a+n.length);e=o+n+i;if(r!=i){if(r.length>0&&r[0]!="&")e+=",";e+=r}}return e}function getparam(e,t,i){var n="&"+t+"=";return urlget(e,n,i)}function setparam(e,t,i){var n="&"+t+"=";var a=e.indexOf(n);if(a>=0){var o="";var r=e.substr(0,a);var l=e.indexOf("&",a+1);if(l>=0)o=e.substr(l);e=r+o}e+=n+i;return e}function setCookie(e,t,i){var n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);var a="expires="+n.toUTCString();document.cookie=e+"="+t+"; path=/ ; "+a}function getCookie(e,t){var i=e+"=";var n=document.cookie.split(";");for(var a=0;a<n.length;a++){var o=n[a];while(o.charAt(0)==" ")o=o.substring(1);if(o.indexOf(i)!=-1)return o.substring(i.length,o.length)}if(typeof t!="undefined")return t;return""}function geturl(e){var t="http://ropewiki.com";var i="http://www.ropewiki.com";var n=window.location.href.toString();if(n.substr(0,i.length)==i)if(e.substr(0,t.length)==t)return i+e.substr(t.length);return e}function getdomain(e){var t=e.split("http");if(e.length<=0)return e;var i=t[t.length-1].split("/");if(i.length<=2)return e;return i[2]}function aref(e,t,i,n){if(typeof i=="undefined")i="";if(typeof n=="undefined")n="";return'<A href="'+e+'" title="'+i+'" '+n+">"+t+"</A>"}function popupwin(e,t,i){if(typeof t=="undefined")t=600;if(typeof i=="undefined")i=500;if(e.substr(0,4)=="java")return e;if(e.indexOf("ropewiki")>=0)e+=(e.indexOf("?")>=0?"&":"?")+"action=render";return"javascript:popupwindow('"+e+"',"+t+","+i+");"}function popupwindow(e,t,i){window.open(e,"_blank","width="+t+",height="+i+",scrollbars=yes,menubar=yes,resizable=yes,toolbar=yes")}$("head").prepend('<meta name="viewport" content="width=320, initial-scale=1.0">');loadSkin();