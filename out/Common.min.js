// Do not modify this page directly; instead build from https://github.com/RopeWiki/commonjs
var LUCA_HOSTNAME="luca.ropewiki.com";var LUCA_BASE_URL="http://"+LUCA_HOSTNAME;var SITE_HOSTNAME="ropewiki.com";var SITE_BASE_URL="http://"+SITE_HOSTNAME;var SITE_ALTERNATE_NAMES=["http://www.ropewiki.com"];var url=window.location.href.toString();var debug=url.indexOf("debug=")>=0;var locdist="locdist=";var sites=[];if(url[url.length-3]=="#"){setCookie("metric","on",360*10);setCookie("french","on",360*10);setCookie("country","on",360*10);setCookie("googtrans","/en/"+url.substr(url.length-2),360*10)}var metric=getCookie("metric");var french=getCookie("french");var urlcheckbox=getCookie("urlcheckbox");var weather=getCookie("weather");var watershed=getCookie("watershed");function isAndroid(){if(typeof Android!="undefined")return true;if(urlget(window.location.href.toString(),"debugandroid","")!="")return true;return false}function kmlurl(e){if(typeof Android!="undefined")return Android.kmlurl(e);var t="query=%5B%5BCategory%3ACanyons%5D%5D%5B%5BLocated%20in%20region.Located%20in%20regions%3A%3AX%7C%7CSan%20Diego%5D%5D&sort=&order=ascending";return LUCA_BASE_URL+"/rwr?gpx=off&kml="+SITE_BASE_URL+"/KMLList?action=raw&templates=expand&ctype=application/x-zope-edit&group=link&"+t+"&more=&num=on&ext=.kml"}function WebViewStyle(){if(!isAndroid())return;var e=" .noprint, .gmnoprint, .rwSort, #contentSub, #top, #mw-head-base, #mw-page-base, #mw-navigation, #footer, .popupformlink, .toc, .mw-editsection ";var t=" .mw-body { margin:0px !important; padding:5px !important; } body { margin:0px !important; padding:0px !important; }";var n=document.getElementsByClassName("pinmap");for(var i=0,a=1;i<n.length;++i,++a){var o=a.toString();if(o.length<2)o="0"+o;var r="#"+o+" "+n[i].innerHTML;n[i].innerHTML=r}var l=document.getElementById("kmltitle");if(l){var s=viewsize();e+=" #firstHeading ";t+=" .kmlmapdisplay { width:"+s+"px !important; height:"+s+"px !important; }"}var c=document.getElementById("kmlsummary");if(c){var s=viewsize();e+=" #firstHeading, #displaysummary, ";t+=" #mapbox { width:"+s+"px !important; height:"+s+"px !important; }"}var d=$(".tableregion td big");if(d.length>0)$("#firstHeading").text($(".tableregion td big").text());$(".tableregion").remove();var m=document.getElementById("mapmenu");if(m){psum=$('a:contains("Printable Summary")');pmap=$('a[href*="/Map?pagename"]');var p=[];if(c){p.push('<a class="button-link" href="'+kmlurl(window.location.href.toString())+'">Open KML</a>')}else if(psum.length>0){$("#mapbox").remove();p.push('<a class="button-link" href="'+psum[0].href+'">View Map</a>');p.push('<a class="button-link" href="'+kmlurl(psum[0].href)+'">Open KML</a>')}else if(pmap.length>0){$("#kmlmapdisplay").remove();elem=$('a:contains("Download KML")');if(elem.length>0){p.push('<a class="button-link" href="'+pmap[0].href+'">View Map</a>');p.push('<a class="button-link" href="'+elem[0].href+'">Open KML</a>')}}m.innerHTML=p.join(" ")}var g=e.split(",").join(" ").split(" ");for(var i=0;i<g.length;++i)if(g[i].length>0)$(g[i]).remove();var f=document.createElement("style");f.id="androidstyle";f.innerHTML=t;document.body.appendChild(f)}function viewsize(){var e=0;if(typeof Android!="undefined")e=Android.isWebView()-10;if(e<=0)e=600;return e}var clistloading;var clistcookie="regionlist";var CollapsibleLists=new function(){this.apply=function(e){clistloading=getCookie(clistcookie);if(!clistloading)clistloading="<World>";var t=document.getElementsByTagName("ul");for(var n=0;n<t.length;n++){if(t[n].className.match(/(^| )collapsibleList( |$)/)){this.applyTo(t[n],true);if(!e){var i=t[n].getElementsByTagName("ul");for(var a=0;a<i.length;a++){i[a].className+=" collapsibleList"}}}}clistloading=null;o()};this.applyTo=function(e,t){var n,i;if((n=e.getElementsByTagName(i="A")).length==0)n=e.getElementsByTagName(i="SPAN");var a=[],o=[];for(var r=0;r<n.length;r++)a.push(n[r]);for(var r=0;r<a.length;r++){var l=-1;if(i=="A"){l=o.indexOf(a[r].href);o.push(a[r].href)}else{l=o.indexOf(a[r].innerHTML);o.push(a[r].innerHTML)}if(l<0)continue;var s=a[r];while(s&&s.tagName!="LI")s=s.parentNode;var c=s.getElementsByTagName("UL");var d=a[l];while(d&&d.tagName!="LI")d=d.parentNode;var m=d.getElementsByTagName("UL");if(c.length>0&&m.length==0)d.appendChild(c[0].cloneNode(true));else if(m.length>0&&c.length==0)s.appendChild(m[0].cloneNode(true))}var n=e.getElementsByTagName("li");for(var r=0;r<n.length;r++){if(!t||e==n[r].parentNode){if(n[r].addEventListener){n[r].addEventListener("mousedown",function(e){e.preventDefault()},false)}else{n[r].attachEvent("onselectstart",function(){event.returnValue=false})}if(n[r].addEventListener){n[r].addEventListener("click",p(n[r]),false)}else{n[r].attachEvent("onclick",p(n[r]))}g(n[r])}}};function p(n){return function(e){if(!e)e=window.event;var t=e.target?e.target:e.srcElement;if(t.nodeName!="LI")return;if(t==n){g(n);o()}}}function g(e){var t=e.className.match(/(^| )collapsibleListClosed( |$)/);t=r(e,t);var n=e.getElementsByTagName("ul");for(var i=0;i<n.length;i++){var a=n[i];while(a.nodeName!="LI")a=a.parentNode;if(a==e){n[i].style.display=t?"block":"none";if(t){var o=[];s(n[i],o);l(o)}}}e.className=e.className.replace(/(^| )collapsibleList(Open|Closed)( |$)/,"");if(n.length>0){e.className+=" collapsibleList"+(t?"Open":"Closed")}}function r(e,t){var n=null;var i=e.getElementsByTagName("a");if(i.length==0)i=e.getElementsByTagName("span");if(i.length>0)n=i[0].innerHTML;if(!n)return t;n="<"+n+">";if(clistloading!=null){if(clistloading.indexOf(n)>=0)return true;else return false}else{var a=getCookie(clistcookie);a=a.split(n).join("");if(t)a+=n;setCookie(clistcookie,a)}return t}function o(){}function l(i){var e=[];for(var t=0;t<i.length;++t){var n="NOTEXIST";var a=i[t].getElementsByTagName("A");if(a&&a.length>0)n=a[0].title;e.push(n)}var o=SITE_BASE_URL+"/index.php?title=Template:RegionCount&action=raw&templates=expand&ctype=text/x-wiki&region="+urlencode(e.join(";"));$.get(geturl(o),function(e){var t=e.split(";");for(var n=0;n<i.length;++n)i[n].innerHTML=i[n].innerHTML+" "+t[n]})}function s(e,t){for(var n=0;n<e.childNodes.length;++n){var i=e.childNodes[n];if(i.style&&i.style.display!="none"){if(t.length<30&&i.className&&i.className.indexOf("regioncount")>=0){$(i).removeClass("regioncount");t.push(i)}if(i.childNodes.length>0)if(i.tagName=="LI")s(i,t)}}}};function loadcredits(e,h,y){var t=document.getElementById(y);if(!t)return;var w=0;var n;var b=[];var k=geturl(SITE_BASE_URL+"/api.php?format=json&action=query&prop=revisions&rvexcludeuser=BetaRobot&redirects=&continue=");switch(h){case"P":k+="&rvprop=user|size&titles="+e+"&rvlimit=max&rvdir=newer";break;case"K":k+="&rvprop=user|comment&titles=File:"+e+".kml&rvlimit=max&rvdir=newer";break;case"J":k=SITE_BASE_URL+"/api.php?format=json&action=query&titles=File:"+e+" Banner.jpg&prop=imageinfo&iiprop=user|comment";break}function T(m){function p(e){for(var t=0;t<b.length;++t)if(b[t].user==e)return t;return-1}var g=[];var f="Barranquismo.net";var e=document.getElementsByClassName("barranquismonet");for(i=0;i<e.length;++i)g.push(e[i].innerHTML);var u="addcredit";var v=[];var t=document.getElementsByClassName(u);for(i=0;i<t.length;++i)v.push(t[i].innerHTML);$.each(m.query.pages,function(e,t){var n=t.revisions;if(!n)n=t.imageinfo;if(n!=null&&n.length!=null){for(var e=0;e<n.length;++e){if(g.length>0&&n[e].user=="BetaRobot2")n[e].user=f;if(v.length>0&&n[e].user=="BetaRobot2")n[e].user=u;if(g.length==0&&n[e].user.search(f)>=0)continue;if(h=="J"&&n[e].comment){var i=n[e].comment.split(" by ");if(i.length>1){n[e].user=i[1];n[e].comment=""}}if(n[e].user.search("Robot")>=0)continue;if(h=="J")b.splice(0,b.length);var a=p(n[e].user);if(a<0){b.push({user:n[e].user,size:0});a=b.length-1}if(n[e].size!=null){b[a].size+=n[e].size-w;w=n[e].size}if(n[e].comment!=null)b[a].comment=n[e].comment}}if(typeof m["continue"]!="undefined"){$.getJSON(k+"&rvcontinue="+m["continue"].rvcontinue,T);return}function o(e,t){if(e.length==0)return;for(var n=0;n<e.length;++n){if(e[n].user==u)r+=v.join(" & ").split("(").join("[").split(")").join("]");else if(e[n].user.indexOf("http")>0){var i=e[n].user.split("http");r+=i[0].link("http"+i[1])}else r+=e[n].user.link(SITE_BASE_URL+"/User:"+e[n].user);if(e[n].user==f)r+="["+g.join(", ")+"]";else if(t>0)r+=" ("+Math.round(e[n].size/t*100)+"%)";if(n<e.length-1)r+=n<e.length-2?", ":" & "}var a=e[e.length-1].comment;if(a!=null&&a.indexOf("[[File:")>0){var o;if((o=a.indexOf(": "))>0)a=a.substr(o+2);else a=""}if(a!=null&&a!="")r+=" ("+a+")"}var r="";if(w==0)o(b,w);else{var l=0;for(var a=0;a<b.length;++a){if(b[a].size>0)l+=b[a].size;if(b[a].size<0)b.splice(a--,1)}var s=[],c=[];for(var a=0;a<b.length;++a)if(a==0||l==0||b[a].size/l>5/100)s.push(b[a]);else c.push(b[a]);o(s,s.length>1?l:0);if(c.length>0){r+=" with minor contributions by ";o(c,0)}}if(r){var d=document.getElementById(y);if(d)d.innerHTML=r}})}$.getJSON(k,T)}var lastfrom="",lastto="";function displaydirectionsto(e){lastto=e.join();window.open("https://maps.google.com/?output=classic&saddr="+lastfrom+"&daddr="+lastto,"_blank")}function displaydirectionsfrom(e){lastfrom=e.join();if(lastto=="")alert("Click on a 'Directions To' link to get the full route");else window.open("https://maps.google.com/?output=classic&saddr="+lastfrom+"&daddr="+lastto,"_blank")}function displaycoordenates(e){window.prompt("Copy to clipboard with Ctrl+C, Cmd-C, Click&Hold or other methods.",e.join())}function displaydirections(e,t,n){var i="<div><i>";i+='<a href="javascript:displaydirectionsto(['+e+","+t+']);">Directions To</a> - <a href="javascript:displaydirectionsfrom(['+e+","+t+']);">Directions From</a>';if(!!n)i+=n;i+="</i></div>";return i}function displaylocation(e,t,n){var i='<div class="textselect">';var e=parseFloat(e);var t=parseFloat(t);var a=Math.round(e*1e5)/1e5+","+Math.round(t*1e5)/1e5;i+='Coords: <a href="https://map.google.com/map?q=loc:'+a+'" target="_blank">'+a+"</a>";if(!!n)i+=n;i+="</div>";return i}var geoelevationService;function getgeoelevation(e,i,a,o){if(!geoelevationService)geoelevationService=new google.maps.ElevationService;if(geoelevationService&&e){var t=[];t.push(e);geoelevationService.getElevationForLocations({locations:t},function(e){if(e[0]){if(!a)a="";if(!o)o="";var t=e[0].elevation*m2ft;var n=document.getElementById(i);if(n)n.innerHTML=a+'<span class="notranslate">'+ft(t)+"</span>"+o}})}}function loadFacebook(){}function fbusersearch(){var e=prompt("Please enter your Facebook name",getCookie("fbuser"));if(e){setCookie("fbuser",e);document.body.style.cursor="wait";window.location.href=SITE_BASE_URL+"/Location?onlycuser="+e.split(" ").join("")+"%40Facebook&sortby=-Has_condition_date"}}function Distance(e,t){var n=Math,i=n.PI/180;var a=e.lat*i,o=t.lat*i,r=a-o;var l=e.lng*i-t.lng*i;var s=2*n.asin(n.sqrt(n.pow(n.sin(r/2),2)+n.cos(a)*n.cos(o)*n.pow(n.sin(l/2),2)));return s*6378.137*km2mi}var km2mi=.621371;var m2ft=3.28084;function ft(e,t){if(isNaN(e))return"";if(metric)return Math.round(e/m2ft).toLocaleString()+(t?"&nbsp;":"")+"m";else return Math.round(e).toLocaleString()+(t?"&nbsp;":"")+"ft"}function mi(e,t){if(isNaN(e))return"";if(metric)return(Math.round(e/km2mi*10)/10).toLocaleString()+(t?"&nbsp;":"")+"km";else return(Math.round(e*10)/10).toLocaleString()+(t?"&nbsp;":"")+"mi"}function uconv(e,t){if(e==null||e=="")return"";var n="â†•";var i=e.split(n);if(i.length>0)i[0]=t(parseFloat(i[0]),e.indexOf("&nbsp;")>0);if(i.length>1)i[1]=ft(parseFloat(i[1]),e.indexOf("&nbsp;")>0);return i.join(" "+n)}function getgeocode(e,t,r){var n="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.toString().trim()+","+t.toString().trim();$.getJSON(geturl(n),function(e){if(e&&e.results){var t=[];for(var n=0;n<e.results.length;++n)for(var i=0;i<e.results[n].address_components.length;++i){var a=e.results[n].address_components[i];if(a.types.indexOf("political")>=0)if(t.indexOf(a.long_name)<0)t.push(a.long_name)}var o=document.getElementById(r);if(o)o.innerHTML="Geocode:"+t.join(", ")}})}function toggleMetric(e){metric=!metric;setCookie("metric",metric?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleFrench(e){french=!french;setCookie("french",french?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function getLinkLang(e){for(var t=1;t<3&&e;++t){e=e.previousSibling;if(e&&e.nodeName=="IMG"){var n,i;var a=e.src;if((n=a.indexOf("Rwl_"))>0&&(i=a.indexOf(".",n))>0)return a.substr(n+4,i-n-4)}}return null}var fshash="#fullscreen";var map;var gxml;var zindex=0;var markers=[];var handlekeys=false;var lastinfowindow=null;var kmliconlist=[SITE_BASE_URL+"/images/7/75/Starn00.png",SITE_BASE_URL+"/images/8/87/Starn10.png",SITE_BASE_URL+"/images/1/15/Starn20.png",SITE_BASE_URL+"/images/d/d3/Starn30.png",SITE_BASE_URL+"/images/a/a0/Starn40.png",SITE_BASE_URL+"/images/c/cc/Starn50.png",SITE_BASE_URL+"/images/b/b6/Starn01.png",SITE_BASE_URL+"/images/1/12/Starn11.png",SITE_BASE_URL+"/images/b/b7/Starn21.png",SITE_BASE_URL+"/images/2/2e/Starn31.png",SITE_BASE_URL+"/images/1/1d/Starn41.png",SITE_BASE_URL+"/images/f/fe/Starn51.png",SITE_BASE_URL+"/images/3/3a/Starn02.png",SITE_BASE_URL+"/images/a/a4/Starn12.png",SITE_BASE_URL+"/images/1/13/Starn22.png",SITE_BASE_URL+"/images/3/32/Starn32.png",SITE_BASE_URL+"/images/7/77/Starn42.png",SITE_BASE_URL+"/images/1/11/Starn52.png",SITE_BASE_URL+"/images/b/bd/Starn03.png",SITE_BASE_URL+"/images/0/09/Starn13.png",SITE_BASE_URL+"/images/9/98/Starn23.png",SITE_BASE_URL+"/images/0/07/Starn33.png",SITE_BASE_URL+"/images/f/fb/Starn43.png",SITE_BASE_URL+"/images/d/dc/Starn53.png",SITE_BASE_URL+"/images/2/25/Starn04.png",SITE_BASE_URL+"/images/7/73/Starn14.png",SITE_BASE_URL+"/images/e/ea/Starn24.png",SITE_BASE_URL+"/images/6/6a/Starn34.png",SITE_BASE_URL+"/images/3/31/Starn44.png",SITE_BASE_URL+"/images/2/27/Starn54.png",SITE_BASE_URL+"/images/2/29/Starn05.png",SITE_BASE_URL+"/images/d/d9/Starn15.png",SITE_BASE_URL+"/images/e/e0/Starn25.png",SITE_BASE_URL+"/images/0/09/Starn35.png",SITE_BASE_URL+"/images/8/81/Starn45.png",SITE_BASE_URL+"/images/3/37/Starn55.png"];var nlist=1e4;var qmaps=[];var kmllistn=0;var kmllisturl,tablelisturl;var kmlsummary;var morestep=100;var moremapc=0,morelistc=0;var boundslist;var loadingmap=true,loadingtiles=false,loadingtiles2=false,loadingkml=false,loadingquery=false,loadingquery2=false;function isloadingmap(){return loadingmap||loadingtiles||loadingtiles2||loadingkml||loadingquery||loadingquery2}var piciconlist=[];var picloadingmsg="<img height=12 src='"+SITE_BASE_URL+"/extensions/SemanticForms/skins/loading.gif'/> Loading... ";var piclist,picloading,picloadingerr,picloadingn;var searchmapn=-1;var searchmappt=[];var searchmaprectangle;var showLegend;var showRoutes,loadedRoutes;var toggleFS;var lastlinks=[];$(window).on("hashchange",function(){if(toggleFS!=null)if(window.location.href.toString().indexOf(fshash)<0)toggleFullScreen()});function backFullScreen(){window.history.back()}function toggleFullScreen(e){var t="fullscreenchk";var n=document.getElementById("mapbox");if(!n)return;if(toggleFS==null||e){if(toggleFS==null){toggleFS={parent:n.parentNode,next:n.nextSibling,cssText:n.style.cssText,className:n.className,sx:window.pageXOffset,sy:window.pageYOffset};window.location.href=window.location.href.toString()+fshash;var i=document.body.childNodes;for(var a=0;a<i.length;++a)if(i[a].tagName=="DIV"){i[a].normal_display=i[a].style.display;i[a].style.display="none"}}$(n).hide();n.className="";$(n).css({position:"fixed",top:0,left:0,zIndex:9999999,width:"100%",height:"100%"});document.body.insertBefore(n,document.body.firstChild);window.scrollTo(0,0)}else{$(n).hide();var o=toggleFS;n.style.cssText=o.cssText;n.className=o.className;o.parent.insertBefore(n,o.next);var i=document.body.childNodes;for(var a=0;a<i.length;++a)if(typeof i[a].normal_display!="undefined")i[a].style.display=i[a].normal_display;window.scrollTo(o.sx,o.sy);toggleFS=null}chk=document.getElementById(t);chk.src=toggleFS==null?SITE_BASE_URL+"/images/b/b9/FullscreenIcon.png":SITE_BASE_URL+"/images/9/92/SmallscreenIcon.png";chk.onclick=toggleFS==null?toggleFullScreen:backFullScreen;mapcover();$(n).show();centermap()}function initializemap(){var h;tooltip=function(){var i="tooltip";var a=3;var o=3;var r=300;var l=10;var s=20;var c=95;var d=0;var m,p,g,f,u;var v=document.all?true:false;return{show:function(e,t,n){if(!e||e=="")return;if(n&&h)if(n.highlight&&h.highlight)if(n.priority>h.priority){n.highlight.setMap(null);n.highlight=null;return}if(h&&n!=h&&h.highlight){h.highlight.setMap(null);h.highlight=null}h=n;if(m==null){m=document.createElement("div");m.style.backgroundColor="white";m.style.padding="3px";m.style.position="absolute";m.style.zIndex=6e4;m.style.fontFamily="Arial,sans-serif";m.style.fontSize="10px";m.setAttribute("id",i);m.className="notranslate";p=document.createElement("div");p.setAttribute("id",i+"top");g=document.createElement("div");g.setAttribute("id",i+"cont");f=document.createElement("div");f.setAttribute("id",i+"bot");m.appendChild(p);m.appendChild(g);m.appendChild(f);document.body.appendChild(m);m.style.opacity=0;m.style.filter="alpha(opacity=0)";document.onmousemove=this.pos}m.style.display="block";if(g)g.innerHTML=e;m.style.width=t?t+"px":"auto";if(!t&&v){p.style.display="none";f.style.display="none";m.style.width=m.offsetWidth;p.style.display="block";f.style.display="block"}if(m.offsetWidth>r){m.style.width=r+"px"}u=parseInt(m.offsetHeight)+a;clearInterval(m.timer);m.timer=setInterval(function(){tooltip.fade(1)},s)},pos:function(e){var t=v?event.clientY+document.documentElement.scrollTop:e.pageY;var n=v?event.clientX+document.documentElement.scrollLeft:e.pageX;m.style.top=t-u+"px";m.style.left=n+o+"px"},fade:function(e){var t=d;if(t!=c&&e==1||t!=0&&e==-1){var n=l;if(c-t<l&&e==1){n=c-t}else if(d<l&&e==-1){n=t}d=t+n*e;m.style.opacity=d*.01;m.style.filter="alpha(opacity="+d+")"}else{clearInterval(m.timer);if(e==-1){m.style.display="none"}}},hide:function(e){if(e)if(e!=h){return}if(typeof m!="undefined"){if(m.timer){clearInterval(m.timer)}m.timer=setInterval(function(){tooltip.fade(-1)},s)}}}}();var e=document.getElementById("mapbox");if(!e)return;var t={zoom:13,scaleControl:true,keyboardShortcuts:false,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:true,mapTypeControlOptions:{mapTypeIds:["topo","wtopo","wtopoesri","ocm",google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID,"wsatesri","mxtopo","estopo","frtopo","chtopo","nztopo"],style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},streetViewControl:true,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}};var n=document.createElement("DIV");n.id="mapcover";n.className="gmnoprint";n.style.cssText="position:fixed;left:0;top:0;width:100%;height:100%;background-color:transparent;border-color:yellow;border-style: inset;border-width:2px";$(n).on("click",function(e){toggleFullScreen(true)});var i=document.createElement("DIV");i.style.cssText="font-size:x-small;";var a=[];map=new google.maps.Map(e,t);map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(i);a[google.maps.MapTypeId.TERRAIN]=" ";a[google.maps.MapTypeId.HYBRID]=" ";var o=new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://s3-us-west-1.amazonaws.com/ctrelief/relief/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:16,name:"Topo",opacity:.25,tileSize:new google.maps.Size(256,256)});map.mapTypes.set("topo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://s3-us-west-1.amazonaws.com/caltopo/topo/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:16,name:"TopoUSA",opacity:1,tileSize:new google.maps.Size(256,256)}));a["topo"]="<a href='https://caltopo.com' target='_blank'>Topo map by CalTopo</a>";map.mapTypes.set("ocm",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://tile.opencyclemap.org/cycle/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png"},maxZoom:18,name:"OpenCycle",opacity:1,tileSize:new google.maps.Size(256,256)}));a["ocm"]="<a href='http://thunderforest.com' target='_blank'>Topo map by Thunderforest</a>";map.mapTypes.set("wtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://tile.thunderforest.com/outdoors/"+t+"/"+CLIP(e.x,t)+"/"+CLIP(e.y,t)+".png?apikey=bdbb04f2d5df40cbb86e9e6e1acff6f7"},maxZoom:18,name:"TopoWorld",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wtopo"]="<a href='http://thunderforest.com' target='_blank'>Topo map by Thunderforest</a>";map.mapTypes.set("wtopoesri",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/"+t+"/"+CLIP(e.y,t)+"/"+CLIP(e.x,t)+".png"},maxZoom:18,name:"TopoESRI",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wtopoesri"]="<a href='http://arcgisonline.com' target='_blank'>Topo map by ESRI</a>";map.mapTypes.set("wsatesri",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/"+t+"/"+CLIP(e.y,t)+"/"+CLIP(e.x,t)+".png"},maxZoom:18,name:"SatESRI",opacity:1,tileSize:new google.maps.Size(256,256)}));a["wsatesri"]="<a href='http://arcgisonline.com' target='_blank'>Sat map by ESRI</a>";map.mapTypes.set("estopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://www.ign.es/wmts/mapa-raster?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=MTN&STYLE=default&TILEMATRIXSET=GoogleMapsCompatible&TILEMATRIX="+t+"&TILEROW="+CLIP(e.y,t)+"&TILECOL="+CLIP(e.x,t)+"&FORMAT=image%2Fjpeg"},maxZoom:17,name:"TopoSpain",opacity:1,tileSize:new google.maps.Size(256,256)}));a["estopo"]="<a href='http://sigpac.mapa.es/fega/visor/' target='_blank'>Topo map by IGN</a>";map.mapTypes.set("frtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://RopeWiki:b%40VM709c6Jix@wxs.ign.fr/8m34uuspdybhi9t89lpoeyfl/geoportail/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetTile&LAYER=GEOGRAPHICALGRIDSYSTEMS.MAPS&STYLE=normal&FORMAT=image/jpeg&TILEMATRIXSET=PM&TILEMATRIX="+t+"&TILEROW="+CLIP(e.y,t)+"&TILECOL="+CLIP(e.x,t)},maxZoom:16,name:"TopoFrance",opacity:1,tileSize:new google.maps.Size(256,256)}));a["frtopo"]="<a href='http://www.geoportail.gouv.fr' target='_blank'>Topo map by Geoportail</a>";map.mapTypes.set("mxtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://gaiamapas1.inegi.org.mx/mdmCache/service/wms?LAYERS=MapaBaseTopograficov61_consombreado&FORMAT=image/jpeg&MINZOOMLEVEL=5&ZOOMOFFSET=5&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&SRS=EPSG:900913&BBOX="+WmsBox(Box(CLIP(e.x,t),CLIP(e.y,t),t,256),true,false)+"&WIDTH=256&HEIGHT=256"},maxZoom:16,name:"TopoMexico",opacity:1,tileSize:new google.maps.Size(256,256)}));a["mxtopo"]="<a href='http://gaia.inegi.org.mx/mdm6/' target='_blank'>Topo map by INEGI</a>";map.mapTypes.set("nztopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return t<13?"http://tiles-2.topomap.co.nz/tiles-topo250/"+t+"-"+CLIP(e.x,t)+"-"+TYZ(CLIP(e.y,t),t)+".png":"http://tiles-2.topomap.co.nz/tiles-topo50/"+t+"-"+CLIP(e.x,t)+"-"+TYZ(CLIP(e.y,t),t)+".png"},maxZoom:15,name:"TopoNewZealand",opacity:1,tileSize:new google.maps.Size(256,256)}));a["nztopo"]="<a href='http://www.topomap.co.nz/' target='_blank'>Topo map by Topomap.co.nz</a>";map.mapTypes.set("chtopo",new google.maps.ImageMapType({getTileUrl:function(e,t){return"http://wmts20.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/"+t+"/"+e.x+"/"+e.y+".jpeg"},maxZoom:18,name:"TopoSwiss",opacity:1,tileSize:new google.maps.Size(256,256)}));a["chtopo"]="<a href='http://map.geo.admin.ch' target='_blank'>Topo map by Swisstopo</a>";google.maps.event.addListener(map,"maptypeid_changed",function(){map.controls[google.maps.ControlPosition.BOTTOM_CENTER].clear();if(map.getMapTypeId()=="topo")map.overlayMapTypes.setAt(0,o);else map.overlayMapTypes.clear();var e=a[map.getMapTypeId()];if(!!e&&!!i)i.innerHTML=e});google.maps.event.addListener(map,"mouseout",function(){mapcover()});var r=document.getElementById("kmltype");if(r!=null){var l=r.innerHTML.split("@");if(l.length>1)map.mapTypes[l[0]].maxZoom=parseInt(l[1]);map.setMapTypeId(l[0])}loadingtiles=true;console.log("loadingtiles true");google.maps.event.addListener(map,"tilesloaded",function(e){setTimeout(function(){loadingtiles=false;console.log("loadingtiles false")},5e3)});google.maps.event.addListener(map,"bounds_changed",function(e){loadingtiles2=true;console.log("loadingtiles2 true")});google.maps.event.addListener(map,"idle",function(e){setTimeout(function(){loadingtiles2=false;console.log("loadingtiles2 false")},5e3)});boundslist=new google.maps.LatLngBounds;var s;var c=document.getElementById("kmlmarker");if(c!=null){console.log("kmlmarker");var d=c.innerHTML.split(",");if(d!=null&&d.length>1){s="kmlmarker";setmarker(d[0],d[1],0);map.setZoom(13);var m=new google.maps.LatLng(d[0],d[1]);map.panTo(m);var p=document.getElementById("elevationdiv");if(p)getgeoelevation(m,"elevationdiv"," ~")}}var g=document.getElementById("kmlrect");if(g!=null){var d=g.innerHTML.split(",");if(d!=null&&d.length>1){s="kmlrect";var f=new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,map:map,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(d[0],d[1]),new google.maps.LatLng(d[2],d[3])),draggable:false,clickable:false,optimized:false});boundslist=f.getBounds();map.fitBounds(boundslist);map.panToBounds(boundslist);if(d.length>4){setTimeout(function(){map.setZoom(parseInt(d[4]))},1e3)}}}var u=document.getElementById("kmlcircle");if(u!=null){var d=u.innerHTML.split(",");if(d!=null&&d.length>1){s="kmlcircle";var v={strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,map:map,center:new google.maps.LatLng(d[0],d[1]),radius:Number(d[2]),draggable:false,clickable:false,optimized:false};setmarker(d[0],d[1],9e4);if(g==null){var y=new google.maps.Circle(v);boundslist=y.getBounds()}map.fitBounds(boundslist);map.panToBounds(boundslist)}}kmlsummary=document.getElementById("kmlsummary");var w=document.getElementById("kmllist");if(w!=null){var b=document.getElementById("kmlicons");if(b!=null)kmliconlist=b.innerHTML.split(",");s="kmllist";var k=w.innerHTML.split("&amp;").join("").split(";");var T=[];for(var E=0;E<k.length;++E){if(k[E]==null)continue;if(k[E].length<=0)continue;var x=k[E].split(",");if(x==null)continue;var L=parseFloat(x[1]);var S=parseFloat(x[2]);if(isNaN(L)||isNaN(S))continue;var I={id:urldecode(x[0]),location:{lat:L,lng:S}};if(x.length>3){I.q=Number(x[3]);if(x.length>6)I.icon=kmliconlist[Number(x[6])*6+I.q]}if(kmlsummary)if(I.id[0]=="#"){var B=I.id.slice(1).split(" ")[0];I.icon="https://sites.google.com/site/rwicons/bg"+I.q+"_"+B+".png"}if(x.length>4)I.description=urldecode(x[4]);if(x.length>5)I.thumbnail=x[5];T.push(I)}loadlist(T,true)}var M=document.getElementById("kmllistquery");if(M!=null){s="kmllistquery";w=M;kmllisturl=SITE_BASE_URL+"/api.php?action=ask&format=json&query="+M.innerHTML+"|%3FHas_coordinates|%3FHas_star_rating|%3FHas_summary|%3FHas_banner_image_file|%3FHas_location_class|%3FHas_KML_file|limit=100";tablelisturl=window.location.href.toString();tablelisturl=tablelisturl.split("#")[0];tablelisturl+=(tablelisturl.indexOf("?")<0?"?":"&")+"nomapchk=on";var _=document.getElementById("loctotal");if(_){var C=_.innerHTML;if(C>0);morekmllist(0,C)}}var N;var R=document.getElementById("kmlfile");if(R!=null&&!N){var A=R.innerHTML;if(A!=null&&A.length>0){s="kmlfile";N=new google.maps.KmlLayer(A);N.setMap(map)}}if(kmlsummary!=null){function H(e){loadingquery2=true;console.log("loadingquery2 true");var t=1;var n=26/2;var i=16;if(e==null)e=100;var a=Math.pow(2,map.getZoom());var o=map.getProjection();var r=map.getBounds();if(!o||!r){console.log("null proj");return}var l=new google.maps.LatLng(r.getNorthEast().lat(),r.getSouthWest().lng());var s=o.fromLatLngToPoint(l);function c(e){var t=o.fromLatLngToPoint(e);return new google.maps.Point(Math.floor((t.x-s.x)*a),Math.floor((t.y-s.y)*a))}function d(e){var t=new google.maps.Point;t.x=e.x/a+s.x;t.y=e.y/a+s.y;return o.fromPointToLatLng(t)}for(var m=0;m<markers.length;m++){var p=markers[m];p.p=c(p.oposition);p.p.y+=n}var g=true;for(var f=0;f<e&&g;++f){g=false;for(var m=0;m<markers.length;m++)for(var u=m+1;u<markers.length;u++)if(m!=u){var v=markers[m].p.x-markers[u].p.x;var h=markers[m].p.y-markers[u].p.y;var y=v<0?-v:v;var w=h<0?-h:h;if(y<i&&w<i){if(y<i)if(v>0){markers[m].p.x+=t;markers[u].p.x-=t;g=true}else{markers[m].p.x-=t;markers[u].p.x+=t;g=true}if(w<i)if(h>0){markers[m].p.y+=t;markers[u].p.y-=t;g=true}else{markers[m].p.y-=t;markers[u].p.y+=t;g=true}}}}console.log("repetitions:"+f+" overlap:"+g+" os:"+i+" st:"+t);for(var m=0;m<markers.length;m++){var p=markers[m];p.p.y-=n;var b=d(p.p);var k={lat:parseFloat(b.lat()),lng:parseFloat(b.lng())};if(!isNaN(k.lat)&&!isNaN(k.lng))p.setPosition(k);else console.log("error "+p.name+":"+p.p+" -> "+k.lat+","+k.lng)}setTimeout(function(){loadingquery2=false;console.log("loadingquery2 false")},5e3)}google.maps.event.addListener(map,"zoom_changed",H)}if(s==null){var O=new google.maps.LatLng(0,0);var U=new google.maps.InfoWindow({content:"UNKNOWN LOCATION"});var j=new google.maps.Marker({position:O,map:map,infowindow:U,optimized:false});j.infowindow.open(map,j);google.maps.event.addListener(j,"click",function(){this.infowindow.open(map,this)});map.panTo(O);map.setZoom(2);map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}var F=document.getElementById("kmltitle");if(F!=null){var z=document.createElement("DIV");z.style.margin="4px 4px 4px 4px";z.innerHTML='<img src="https://chart.apis.google.com/chart?chst=d_text_outline&chld=000000|32|h|FFFFFF|b|'+urlencode(F.innerHTML)+'"/>';map.controls[google.maps.ControlPosition.TOP_CENTER].push(z)}{var P='<div class="gmnoprint maptopcontrols">',D="</div>";var G=P+'<img class="gmnoprint" id="fullscreenchk" onclick="toggleFullScreen()" title="Full Screen" src="'+SITE_BASE_URL+'/images/b/b9/FullscreenIcon.png">'+D;if(w){G+=P+'<label><input class="gmnoprint" id="routeschk" type="checkbox" onclick="toggleRoutes()">Show&nbsp;KML&nbsp;</label>'+D;if(document.getElementById("locsearch")){var q=document.createElement("DIV");q.innerHTML='<div id="searchmap"><span id="searchinfo"></span><button type="search" value="" onclick="searchmap()">Search Map</button></div>';map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(q);searchmaprectangle=new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.05,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(0,0),new google.maps.LatLng(0,0)),draggable:false,clickable:false,optimized:false});map.addListener("click",function(e){if(searchmapn>=0){var t=new google.maps.Marker({position:e.latLng,map:map,optimized:false});searchmappt.push(e.latLng);++searchmapn;var n=new google.maps.LatLngBounds;n.extend(searchmappt[0]);n.extend(searchmappt[searchmappt.length>=2?1:0]);searchmaprectangle.setBounds(n);searchmaprectangle.setMap(map);if(searchmapn>=2)searchmaprun()}});map.addListener("mousemove",function(e){if(searchmapn>0&&searchmapn<2){var t=new google.maps.LatLngBounds;t.extend(searchmappt[0]);t.extend(e.latLng);searchmaprectangle.setBounds(t);searchmaprectangle.setMap(map)}})}}else{if(F)G+=P+'<label><input class="gmnoprint" id="labelschk" type="checkbox" onclick="toggleLabels()" '+(labels?"checked":"")+">TrkLabels&nbsp;</label>"+D}var z=document.createElement("DIV");z.style.cssText="z-index:9999;";z.innerHTML=G;map.controls[google.maps.ControlPosition.TOP_LEFT].push(z)}map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(n);var V=document.getElementById("kmlfilep");if(V!=null){loadingkml=true;console.log("loadingkml true");var A=V.innerHTML;var W="";if(A!=null&&A.length>0){s="kmlfilep";var e="#mapbox";var Z="mapsidebar";var K=document.getElementById("bskmlfile");if(K!=null){var X=document.createElement("DIV");var J='<div class = "dropDownOptionsDiv" id="myddOptsDiv">';A=A.split("&amp;").join("&");var Y=K.innerHTML.toString().split("&amp;").join("&").split(",");if(urldecode(A).indexOf(urldecode(Y[0]))<0)Y.unshift(A);var Q=[];for(var E=0;E<Y.length;++E){var ee="";var te=Y[E];if(noextraction(te))ee="color:red;";var ne=0;var ie=getdomain(te);Q.push(ie);for(var ae=0;ae<Q.length;++ae)if(Q[ae]==ie)++ne;if(ne>1)ie+="#"+ne;J+='<div class="dropDownItemDiv" onClick="loadSource(\''+te+"','"+ie+'\')" style="'+ee+'">'+ie+"</div>"}var oe=document.getElementsByTagName("BIG");if(oe&&oe.length>0&&Y.length>1){var te=urlencode(oe[0].innerHTML);J+='<div class="dropDownItemDiv" onClick="loadSource(\''+te+"','ALL COMBINED')\" style=\"font-weight:bold\">ALL COMBINED</div>"}J+="</div>";var re=getdomain(Y[0]);J+="<div class=\"dropDownControl\" onclick=\"(document.getElementById('myddOptsDiv').style.display == 'block') ? document.getElementById('myddOptsDiv').style.display = 'none' : document.getElementById('myddOptsDiv').style.display = 'block';\"><span id=\"myddOptsText\">"+re+'</span><img class="dropDownArrow" src="http://map.gstatic.com/mapfiles/arrow-down.png"/></div>';lastlinks.push(W=Y[0]);X.className="dropDownControlDiv";X.style.zIndex=1e3;X.innerHTML=J;map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(X);if(Y.length<2)X.style.display="none"}var le=document.createElement("div");le.setAttribute("id",Z);le.className="notranslate";document.body.appendChild(le);var z=document.createElement("DIV");z.innerHTML='<div id="legendbar"><label><input class="gmnoprint" id="legendchk" type="checkbox" onclick="toggleLegend()"><span id="legendlabel">Legend</span></label><br><div id="legend" class="notranslate"></div></div><div id="loadlinks"></div>';map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(z);z.style.maxHeight="90%";z.style.overflow="auto";z.style.zIndex=999;z.style.marginRight="5px";function se(){gxml=new GeoXml("gxml",map,"",{sidebarid:Z,sortbyname:true,simplelegend:true,suppressallfolders:true,showArrows:true,showLabels:true,showRouteLabels:labels&&F,showElevation:labels&&F,directions:true,dohilite:true,allfoldersopen:true,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});google.maps.event.addListener(gxml,"loaded",function(){setTimeout(function(){loadingkml=false;console.log("loadingkml false")},5e3);if(document.getElementById("hidelegend")==null||showLegend){var a=setInterval(function(){if(document.getElementById("legend")!=null){toggleLegend(true);var e=$("#legendbar").width();var t=$("#legendbar").height();var n=$("#mapbox").width();var i=$("#mapbox").height();if(e*t>n*i/4)toggleLegend(false);clearInterval(a)}},500)}});gxml.load(A,W)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl(SITE_BASE_URL+"/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),se);else setTimeout(se,100)}}var ce=document.getElementById("kmlfilew");if(ce!=null){var A=ce.innerHTML;if(A!=null&&A.length>0){s="kmlfilew";var e="#mapbox";function de(){gxml=new GeoXml("gxml",map,"",{nozoom:true,simplelegend:true,suppressallfolders:true,showArrows:false,showLabels:false,patchIcons:true,showRouteLabels:false,directions:false,dohilite:false,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});gxml.load(A,A)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl(SITE_BASE_URL+"/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),de);else setTimeout(de,100)}}setTimeout(function(){loadingmap=false;console.log("loadingmap false")},5e3);$("#mapbox").mouseover(function(e){handlekeys=true});$("#mapbox").mouseout(function(e){handlekeys=false;mapcover()});$("#mapbox").mousedown(function(e){e.preventDefault()});$(document).keydown(function(e){if(handlekeys){var t=1;var n=128;switch(e.which){case 37:map.panBy(-n,0);return false;case 38:map.panBy(0,-n);return false;case 39:map.panBy(n,0);return false;case 40:map.panBy(0,n);return false;case 109:case 189:map.setZoom(t=map.getZoom()-1);return false;case 107:case 187:map.setZoom(t=map.getZoom()+1);return false;case 27:case 8:if(toggleFS!=null)backFullScreen();return false;default:break}}});$(window).resize(function(){if(toggleFS!=null)toggleFullScreen(true);else centermap();smallstyle();mapcover()})}function waterflowinit(){waterflow()}function loadMapInterface(){var e=document.getElementById("mapbox");if(e==null){loadingmap=false;$(".locateicon").hide();console.log("loadingmap none");return}if(typeof staticscripts=="undefined"){var t=document.createElement("script");t.type="text/javascript";t.src="https://www.google.com/jsapi";document.body.appendChild(t);var t=document.createElement("script");t.type="text/javascript";t.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDdkcexZV-p5Nj8RwgLYTcegm5jorJpbyw&callback=initializemap";document.body.appendChild(t)}else initializemap();pictureinit();var n=document.getElementById("waterflow-table");if(!n)return;if(typeof staticscripts=="undefined")$.getScript(typeof waterflowjs!="undefined"?waterflowjs:geturl(SITE_BASE_URL+"/index.php?title=MediaWiki:Waterflow.js&action=raw&ctype=text/javascript"),waterflowinit);else setTimeout(waterflowinit,100)}function loadmapScript(){smallstyle();loadSkin();loadEditor();loadFacebook();loadMapInterface();loadUserInterface(document);loadFormInterface();loadTranslation();var e=setInterval(function(){loadTranslation()},2e3);var t=document.createElement("script");t.type="text/javascript";t.src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";document.body.appendChild(t)}function loadSource(e,t){var n=document.getElementById("myddOptsDiv");var i=document.getElementById("myddOptsText");if(!i||!n)return;n.style.display="none";i.innerHTML=t;gxml.overlayman.Hide();var a=e.indexOf(SITE_HOSTNAME)>=0;var o=e;if(!a)o=LUCA_BASE_URL+"/rwr?gpx=off&filename=tmp&kmlnfx&kmlx="+o;var r=document.getElementById("kmlfilep");if(r)r.innerHTML=o;if(lastlinks.indexOf(e)>=0){gxml.overlayman.Show(e)}else{gxml.load(o,e);lastlinks.push(e)}var l=noextraction(e);var s=["rw","ex","noex"];var c=[a,!a&&!l,!a&&l];for(var d=0;d<s.length;++d){var m=document.getElementsByClassName("display"+s[d]);for(var p=0;p<m.length;++p)m[p].style.display=c[d]?"block":"none"}var g=["ex","noex"];for(var d=0;d<g.length;++d){var m=document.getElementsByClassName("display"+g[d]);for(var p=0;p<m.length;p++){var f=m[p].getElementsByTagName("A");for(var u=0;u<f.length;++u){var v=f[u].href;if(v.indexOf("caltopo.com")>0){var h="kmlx%253D";var y="ext%253D.kml";var w=v.indexOf(h);var b=v.indexOf(y,w+1);f[u].href=v.substr(0,w+h.length)+urlencode(e+"&")+v.substr(b)}else if(v.indexOf(LUCA_HOSTNAME)>0){var h="kmlx%3D";var y="ext%3D.kml";var w=v.indexOf(h);var b=v.indexOf(y,w+1);f[u].href=v.substr(0,w+h.length)+e+"&"+v.substr(b)}else if(v.indexOf("/Map?pagename=")<0){f[u].href=e;f[u].innerHTML=t}}}}}function displayinfowindow(e){tooltip.hide();if(lastinfowindow)lastinfowindow.close();e.infowindow.setZIndex(++zindex);e.infowindow.open(map,e);getgeoelevation(e.getPosition(),"infoelevation","~");lastinfowindow=e.infowindow}function pinicon(e,t){if(!t||typeof t=="undefined")t=SITE_BASE_URL+"/images/8/86/PinMap.png";return'<img src="'+t+'" id="'+e+'" class="pinicon" title="Show location on map" style="cursor:pointer;vertical-align:middle" onclick=\'pinmap(this.id)\'/>'}function pinmap(e){for(var t=0;t<markers.length;++t)if(markers[t].name==e){var n=$("#mapbox").offset().top;if(n<$(window).scrollTop())window.scrollTo(0,n);$("#mapcover").css({display:"none"});map.panTo(markers[t].position);window.setTimeout(function(){displayinfowindow(markers[t])},500);return}}function loadlist(e,t){if(qmaps.length==0)for(var n=0;n<6;++n)qmaps.push(map);var i;var a=document.getElementById("kmlstars");if(a!=null)i=a.innerHTML.split(",");var o=document.getElementById("kmladdbutton");var r=document.getElementById("kmlnearby");if(r){for(n=0;n<e.length;++n){var l=e[n];var s=[];for(ic=0;ic<e.length;++ic)s.push({id:e[ic].id.split(" ")[0],distance:Distance(l.location,e[ic].location)});s.sort(function(e,t){return e.distance-t.distance});var c=[];for(ic=1;ic<s.length&&ic<=5&&s[ic].distance<20;++ic)c.push(s[ic].id);id=l.id.substr(1).split(" ")[0];if(!id||id=="")continue;elems=document.getElementsByClassName("nearby");for(var d=0;d<elems.length&&elems[d].id!=id;++d);if(d<elems.length)elems[d].innerHTML="~"+c.join()}}var n,m=e.length;for(n=0;n<e.length;++n){var p=e[n];if(!p.id||p.id=="")continue;++m;--nlist;var g=5e3+nlist;if(p.q)g+=p.q*1e3;var f="";if(p.icon)f=p.icon;var u="",v="";if(p.description){str=p.description;if(metric){var h=str.split(" ");for(var y=0;y<h.length;++y){var w="";var b=h[y];var k=b.indexOf(":");if(n>=0){w=b.substr(0,k+1);b=b.substr(k+1)}if(b[0]>="0"&&b[0]<="9"){var T=b.slice(-2);if(T=="mi")h[y]=w+uconv(b,mi);else if(T=="ft")h[y]=w+uconv(b,ft)}}str=h.join(" ")}str=acaconv(str);u=v=str}v='<div class="notranslate">'+v.split("*").join("&#9733;")+"</div>";var E="50px";if(p.thumbnail){var x="";var L="";var S='height="150px"';var I=p.thumbnail.split("/");if(I.length>0){var B=I[I.length-1];var M=parseInt(B);if(M>0){L='width="'+M+'px"';x='style="border:1px solid #808080"';E="200px"}}v+="<div><img "+x+" "+L+" "+S+' src="'+p.thumbnail+'"/></div>'}{if(p.kmlfile&&p.kmlfile!=""){v+="<div><i>";v+="<a href=\"javascript:toggleRoutes('"+urlencode(p.kmlfile)+"','"+urlencode(p.id)+"');\">Show KML Map of the route</a>";v+="</i></div>"}var _='<br><span id="infoelevation"></span> - ';_+='<a href="'+SITE_BASE_URL+"/Weather?pagename="+p.id+'" target="_blank">Weather</a>';_+=' - <a href="'+SITE_BASE_URL+"/Location?locdist=30mi&locname=Coord:"+p.location.lat+","+p.location.lng+'">Search nearby</a>';v+=displaydirections(p.location.lat,p.location.lng,_)}var C='<div style="width:auto;height:auto;overflow:hidden;"><b class="notranslate">'+sitelink(p.id,nonamespace(p.id))+"</b>";if(o)C+='<input class="submitoff addbutton" type="submit" onclick="addbutton(\''+p.id.split("'").join("%27")+'\')" value="+">';C+="<hr/>"+v+"</div>";if(p.infocontent)C=p.infocontent;var N=new google.maps.InfoWindow({content:C});var R='<b class="nostranslate">'+nonamespace(p.id)+"</b><br>"+u.split("*").join("&#9733;");if(p.infodescription)R=p.infodescription;var A=-1,H=map;if(p.q!=null)H=qmaps[A=p.q];var O=new google.maps.LatLng(p.location.lat,p.location.lng);var U=new google.maps.Marker({position:O,map:H,icon:f,name:nonamespace(p.id),description:R,infowindow:N,zIndex:g,optimized:false});U.q=A;U.oposition=O;google.maps.event.addListener(U,"mouseover",function(e){this.highlight=new google.maps.Marker({position:this.getPosition(),icon:SITE_BASE_URL+"/images/3/39/Starn_b.png",draggable:false,clickable:false,optimized:false,zIndex:this.zIndex-1});this.priority=0;this.highlight.setMap(map);tooltip.show(this.description,e,this)});google.maps.event.addListener(U,"mouseout",function(){tooltip.hide(this);if(this.highlight!=null){this.highlight.setMap(null);this.highlight=null}});markers.push(U);google.maps.event.addListener(U,"click",function(){displayinfowindow(this)});boundslist.extend(O)}var j=document.getElementById("kmladdlist");if(j){var F=j.innerHTML.split(";");if(F.length>0)addhighlight(F)}if(m>0&&t){var z=boundslist.getNorthEast();var P=boundslist.getSouthWest();if(Distance({lat:z.lat(),lng:z.lng()},{lat:P.lat(),lng:P.lng()})<1){map.setZoom(11);map.panTo(markers[0].position)}else{map.fitBounds(boundslist);map.panToBounds(boundslist)}zindex=6e3}return m}function getrwlist(e){var o=[];$.each(e.query.results,function(e,t){var n;++kmllistn;var i={id:t.fulltext};n=t.printouts["Has coordinates"];if(n&&n.length>0){i.location={lat:n[0].lat,lng:n[0].lon};n=t.printouts["Has star rating"];if(n&&n.length>0){i.q=Number(n[0]);n=t.printouts["Has location class"];if(n&&n.length>0)i.icon=kmliconlist[i.q+Number(n[0])*6]}if(kmlsummary)if(i.id[0]=="#"){var a=i.id.slice(1).split(" ")[0];i.icon="https://sites.google.com/site/rwicons/bg"+i.q+"_"+a+".png"}n=t.printouts["Has summary"];if(n&&n.length>0)i.description=n[0];n=t.printouts["Has banner image file"];if(n&&n.length>0)i.thumbnail=n[0];n=t.printouts["Has KML file"];if(n&&n.length>0)i.kmlfile=n[0];n=t.printouts["Located in region"];if(n&&n.length>0)i.region=n[0].fulltext;o.push(i)}});return o}function getkmllist(e){var t=getrwlist(e);if(typeof e["query-continue-offset"]=="undefined")morestop();loadlist(t,true)}function morekmllist(e,t){loadingquery=true;console.log("loadingquery true");++moremapc;map.setOptions({draggableCursor:"wait"});$.getJSON(geturl(kmllisturl+"|offset="+e),getkmllist).always(function(){setTimeout(function(){loadingquery=false;console.log("loadingquery false")},5e3);if(--moremapc<=0)map.setOptions({draggableCursor:""})});if(e>0){var i=$(".loctable .loctabledata");if(i.length==1){++morelistc;document.body.style.cursor="wait";$.get(geturl(tablelisturl+"&offset="+e),function(e){var t=$("#morekmllist").html($(e).find(".loctable").html());if(t.length==1){var n=t[0];n.getElementsByName=function(e){var t=[];return t};n.getElementById=function(e){return null};loadUserInterface(n);findtag(n.childNodes,"TR",function(e){i[0].appendChild(e)})}}).always(function(){if(--morelistc<=0)document.body.style.cursor=""})}}e+=morestep;if(e>=t){morestop();return}var n=document.getElementById("loadmore");if(n)n.innerHTML='<button onclick="morekmllist('+e+","+t+')">+</button> ';var a=document.getElementById("loccount");if(a)a.innerHTML=e+" of ";var o=$(".loctable .smw-template-furtherresults a");if(o.length==1){o[0].href="javascript:morekmllist("+e+","+t+");"}}function morestop(){var e=document.getElementById("loccount");if(e)e.parentNode.removeChild(e);var t=document.getElementById("loadmore");if(t)t.parentNode.removeChild(t);var n=$(".loctable .smw-template-furtherresults a");if(n.length==1)n[0].parentNode.removeChild(n[0])}function nonamespace(e){return e.replace("Events:","")}function searchmap(){map.setOptions({draggableCursor:"crosshair"});var e=document.getElementById("searchinfo");if(e)e.innerHTML='<span class="rwwarningbox"><b>CLICK ON MAP TO DEFINE SEARCH AREA</b></span>';searchmapn=0}function searchmaprun(){map.setOptions({draggableCursor:""});searchmapn=-1;searchmappt=[];var e=document.getElementById("searchinfo");if(e)e.innerHTML='<span class="rwwarningbox"><b>SEARCHING...</b></span>';mapsearchbounds(searchmaprectangle.bounds,-1)}function mapsearchbounds(e,t){var n=document.getElementById("locsearchchk");if(map!=null&&n!=null){var i=e.getSouthWest();var a=e.getNorthEast();n.checked=true;var o="Coord:"+Math.round(i.lat()*1e3)/1e3+","+Math.round(i.lng()*1e3)/1e3+","+Math.round(a.lat()*1e3)/1e3+","+Math.round(a.lng()*1e3)/1e3;if(t>=0)o+=","+t;document.getElementById("locnameval").value=o}filtersearch()}function mapsearch(){mapsearchbounds(map.getBounds(),map.getZoom())}function toggleLegend(e){var t="legendchk";var n=document.getElementById("legend");var i=document.getElementById("legendlabel");var a=document.getElementById("mapsidebar");if(showLegend==null||e){if(n&&a){n.style.display="block";n.innerHTML=n.innerHTML+a.innerHTML;a.innerHTML=""}if(i&&showLegend==null)showLegend=i.innerHTML}else{if(n)n.style.display="none";showLegend=null}var o=document.getElementById(t);if(o)o.checked=showLegend!=null}function toggleRoutes(n,i){idchk="routeschk";var e=document.getElementById("kmlroutes");if(!e)return;var t="KML";var a=e.innerHTML.split("&amp;").join("&");if(!gxml||n){function o(){gxml=new GeoXml("gxml",map,"",{nozoom:true,simplelegend:true,suppressallfolders:true,showArrows:false,showLabels:false,patchIcons:true,showRouteLabels:false,directions:true,dohilite:true,hilite:{color:"#aaffff",opacity:.8,width:10,textcolor:"#000000"}});var e=n?n:a;var t=i?i:t;gxml.load(e,t,t)}if(typeof staticscripts=="undefined")$.getScript(typeof geoxmljs!="undefined"?geoxmljs:geturl(SITE_BASE_URL+"/index.php?title=MediaWiki:Geoxml.js&action=raw&ctype=text/javascript"),o);else setTimeout(o,100);if(n)return;showRoutes="on";loadedRoutes="on"}else{if(showRoutes==null){showRoutes="on";if(loadedRoutes==null){gxml.load(a,t,t);loadedRoutes="on"}else{gxml.overlayman.Show()}}else{showRoutes=null;gxml.overlayman.Hide()}}document.getElementById(idchk).checked=showRoutes!=null;google.maps.event.trigger(map,"resize")}function addhighlight(e){for(var t=0;t<markers.length;++t)if(e.indexOf(markers[t].name)>=0){var n=markers[t];if(n.highlight)continue;var i=16;var a=new google.maps.Marker({position:n.getPosition(),icon:SITE_BASE_URL+"/images/e/e6/Starn_y.png",draggable:false,clickable:false,optimized:false,zIndex:n.zIndex-1});a.setMap(qmaps[n.q]);n.highlight=a;if(n.infowindow&&n.infowindow.content)n.infowindow.content=n.infowindow.content.replace('value="+"','value="*"')}var o=document.getElementsByClassName("pinicon");for(var t=0;t<o.length;++t)if(e.indexOf(o[t].id)>=0)o[t].style.backgroundImage="url("+SITE_BASE_URL+"/images/e/e6/Starn_y.png)"}var oldid="@";function addbutton(a){function o(e){var t=e.childNodes;for(var n=0;n<t.length;++n){var e=t[n];if(e.attributes)for(var i=0;i<e.attributes.length;++i){if(e.attributes[i].value.indexOf(oldid)>=0)e.attributes[i].value=e.attributes[i].value.split(oldid).join(a)}o(e)}}var e=document.getElementById("kmladdbutton");if(e){o(e);var t=e.getElementsByTagName("BUTTON");if(t.length>0)t[0].click();if(lastinfowindow)lastinfowindow.close();var n=[a];addhighlight(n);oldid=a}}function setmarker(e,t,n){var i=new google.maps.LatLng(e,t);var a=new google.maps.InfoWindow({content:'<div class="textselect">'+displaylocation(e,t)+'<div id="elevation"></div>'+'<div id="geocode" style="max-width:200px"></div>'+displaydirections(e,t)+"</div>"});var o=new google.maps.Marker({position:i,map:map,infowindow:a,optimized:false,zIndex:n});google.maps.event.addListener(o,"click",function(){this.infowindow.open(map,this);getgeoelevation(this.getPosition(),"elevation","Elevation: ");getgeocode(e,t,"geocode")});boundslist.extend(i)}function centermap(){if(!map)return;var e=map.getCenter();google.maps.event.trigger(map,"resize");map.panTo(e)}function mapcover(){var e=$("#mapbox").width();var t=$(window).width()-e;if(!toggleFS&&(t<50||e<500))$("#mapcover").css({display:"block"});else $("#mapcover").css({display:"none"})}function smallstyle(){WebViewStyle();$("#p-logo a").attr("href","#")}function rap(e,t){if(isNaN(e))return"";return e+(t?"&nbsp;":"")+"r"}function acaconv(e,t){var n=e.indexOf(")");if(n<0)return e;var i=e.indexOf("*")+1;while(i<n&&!(e.charAt(i)>="1"&&e.charAt(i)<="4"))++i;if(i>=3&&e.substr(i-3,3)=="<i>")i-=3;var a=e.substr(i,n-i).split("(");if(a.length<2)return e;var o=a[french?1:0].trim();if(t)o+=" ("+a[french?0:1].trim()+")";return e.substr(0,i)+o+e.substr(n+1)}function getTextFromHyperlink(e){var t=e.search("href=");var n=e.slice(t).split('"')[1];return n}function CLIP(e,t){return e%(1<<t)}function TYZ(e,t){return(1<<t)-e-1}function Box(e,t,n,i){function s(e,t,n){return Math.min(Math.max(e,t),n)}function a(e,t,n,i){var a=e*(1<<t);var o=s(e*n,0,a-1)/a-.5;var r=.5-s(e*i,0,a-1)/a;var l={lat:90-360*Math.atan(Math.exp(-r*2*Math.PI))/Math.PI,lng:360*o};return l}var o=a(i,n,e,t);var r=a(i,n,e+1,t+1);var l={lat1:o.lat,lat2:r.lat,lng1:o.lng,lng2:r.lng};return l}function WmsBox(e,t,n){function i(e,t,n){var i={x:t,y:n};if(e){i.x=n*20037508.34/180;var a=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);i.y=a*20037508.34/180}return i}var a=i(t,e.lat1,e.lng1);var o=i(t,e.lat2,e.lng2);var r=[a.x<o.x?a.x:o.x,a.y<o.y?a.y:o.y,a.x<o.x?o.x:a.x,a.y<o.y?o.y:a.y];if(n)return r[1]+","+r[0]+","+r[3]+","+r[2];else return r[0]+","+r[1]+","+r[2]+","+r[3]}function noextraction(e){return e.indexOf("roadtripryan.com")>=0}function checkregname(){var e=window.location.href.toString().split("?");var t=urldecode(getCookie("regnameval"));if(e.length<2&&t!=""){var n=e[0].split("/");var i=n[n.length-1];if(i=="Beta"||i=="Conditions"||i=="conditions.html")window.location.href=e+"?region="+urlencode(t)}}checkregname();function pdfselect(e){var t="",n="";var i=15;var a=LUCA_BASE_URL+"/rwr?";var o=document.getElementById("idcredits");if(!o)return;var r=o.innerHTML;if(!r||r=="")return;r=urldecode(r).split(" ").join("_");var l="";var s=e.value;if(s=="P")n=r+".pdf",t=a+"filename="+n+"&pdfx="+r+"&ext=.rw",l="summary=off";else if(s=="PM")n=r+"_MAP.pdf",t=a+"filename="+n+"&pdfx=Map?pagename="+r+"&ext=.rw",l="summary=off";else if(s=="KM")n=r+".kml",t=$("#kmlfilep").html(),i=1;else if(s=="GM")n=r+".gpx",t=$("#kmlfilep").html().split("gpx%3Doff").join("gpx%3Don"),i=1;else if(s=="ZPM")n=r+".zip",t=a+"filename="+n+"&zipx="+r+"&ext=.rw",l="bslinks=off&trlinks=off&summary=off";else if(s=="ZALL")n=r+"+.zip",t=a+"filename="+n+"&zipx="+r+"&ext=.rw",l="bslinks=on&summary=off";else if(s=="S")t=SITE_BASE_URL+"/PDFDownload?pagename="+r+"&ext=.rw";t=rwlink(t,l);if(t=="")return;e.value="";e.blur();var c=true,d=0;setCookie("rwfilename","");var m=setInterval(function(){c=!c;d++;$("#ptext").css("opacity",c?"1.0":"0.5");if(getCookie("rwfilename","")!=""||d>i){clearInterval(m);$("#ptext").css("display","none")}},1e3);$("#ptext").css("display","inline");window.location.href=t}function pictureget(t){if(t.length==0)return;var e=geturl(t.shift());console.log("getpic "+e);$.getJSON(e,function(e){var t=[];var n=e.list;for(var i=0;i<n.length;++i){var a=n[i].split(",");var o=document.createElement("LI");o.className="gallerybox";var r='<div class="thumbinner" style="width:154px"><a href="'+a[0]+'" target="_blank"><img src="'+a[4]+'" style="width:150px;height:150px;"></a><div class="thumbcaption"><div>'+pinicon(a[0],piciconlist[a[9]])+" <b>"+a[6]+"</b></div><div>"+a[8]+"</div><div>"+a[1]+"</div></div></div>";o.innerHTML=r;o.sortdate=a[5];o.locid=a[0];var l=piclist.getElementsByTagName("LI");var s=0;for(s=0;s<l.length&&l[s].sortdate>=o.sortdate;++s);if(s==l.length)piclist.appendChild(o);else piclist.insertBefore(o,l[s]);var c={lat:parseFloat(a[2].toString()),lng:parseFloat(a[3].toString())};t.push({id:a[0],location:c,zindex:100-i,icon:piciconlist[a[9]],thumbnail:a[4],description:"",infodescription:a[6]+" "+a[8],infocontent:r})}if(map!=null)loadlist(t);var d=[];var l=piclist.getElementsByTagName("LI");for(var s=250;s<l.length;++s){d.push(l[s].locid);piclist.removeChild(l[s])}for(var i=0;i<markers.length;++i)if(d.indexOf(markers[i].name)>=0)markers[i].setMap(null)}).error(function(){++picloadingerr;console.log("picerror "+e)}).always(function(){var e="";if(t.length>0)e+=picloadingmsg+Math.round((picloadingn-t.length)*100/picloadingn)+"%";if(picloadingerr>0)e+=' <span style="color:red">'+picloadingerr+" ERRORS!</span>";picloading.innerHTML=e;pictureget(t)})}function pictureinit(){piclist=document.getElementById("picture-list");var e=document.getElementById("picture-rect");if(!e||!piclist)return;picloading=document.createElement("DIV");picloading.innerHTML=picloadingmsg;piclist.parentNode.insertBefore(picloading,piclist);piciconlist["Instagram.com"]=SITE_BASE_URL+"/images/c/c0/InstaIcon.png";piciconlist["Facebook.com"]=SITE_BASE_URL+"/images/0/03/FacebIcon.png";piciconlist["Flickr.com"]=SITE_BASE_URL+"/images/f/f7/FlickIcon.png";piciconlist["Panoramio.com"]=SITE_BASE_URL+"/images/a/a4/PanorIcon.png";var n=window.location.href.toString().indexOf("debug=local")>=0;var i=n?"http://localhost/rwr?pictures=":LUCA_BASE_URL+"/rwr?pictures=";var a=i+e.innerHTML;$.getJSON(geturl(a),function(e){var n=e.list;picloadingerr=0;picloadingn=n.length;for(t=0;t<3;++t){setTimeout(function(){pictureget(n)},t*500)}pictureget(n)}).error(function(){picloading.innerHTML='<div style="color:red">ERROR!</div>'})}function suggestregion(){var e=document.getElementsByName("Canyon[Coordinates]");if(e.length>0&&e[0].value)return suggestregioncoords(e[0].value);var t=document.getElementsByName("Canyon[Geolocation]");if(t.length>0&&t[0].value)return suggestregiongeocode(t[0].value)}function suggestregiongeocode(e){var t="https://maps.googleapis.com/maps/api/geocode/json?address="+e;$.getJSON(geturl(t),function(e){if(e&&e.results){for(var t=0;t<e.results.length;++t)if(e.results[t].geometry&&e.results[t].geometry.location&&e.results[t].geometry.location.lat&&e.results[t].geometry.location.lng){suggestregioncoords(e.results[t].geometry.location.lat+","+e.results[t].geometry.location.lng);return}}})}function suggestregioncoords(s){s=s.split(" ").join("");var e=SITE_BASE_URL+"/api.php?action=ask&format=json&query=[[Category:Canyons]][[Has coordinates::"+s+" (50000)]]"+"|%3FHas_coordinates|%3FLocated_in_region|limit=1000";$.getJSON(geturl(e),function(e){var t=getrwlist(e);var n=s.split(",");var i={lat:parseFloat(n[0]),lng:parseFloat(n[1])};for(var a=0;a<t.length;++a)t[a].dist=Distance(i,t[a].location);t.sort(function(e,t){return e.dist-t.dist});var o=[];for(var a=1;a<t.length&&o.length<3;++a)if(o.indexOf(t[a].region)<0)o.push(t[a].region);var r=document.getElementById("suggestednearby");if(r)r.innerHTML="Nearby:"+o.join(", ");var l=document.getElementsByName("Canyon[Region]");if(l&&l.length>0&&o.length>0)l[0].value=o[0]})}function regsearch(){var e=document.getElementById("regnameval");if(e.value!=""&&deftext(e.value))return;var t=window.location.href;var t=t.split("#")[0].split("?")[0];var n=e.value;if(n.length>0)t+="?region="+urlencode(n);setCookie("regnameval",urlencode(n));var i=document.getElementsByClassName("submitoff");for(var a=0;a<i.length;a++)i[a].disabled=true;document.body.style.cursor="wait";window.location.href=t}function filtersearch(e){var t=window.location.href;if(typeof e!="undefined")t=e;var t=t.split("#")[0].split("?")[0];var n="";var i=document.getElementsByClassName("optionschk");if(i!=null)for(var a=0;a<i.length;a++)if(i[a].checked)n=addparam(n,i[a].id,"on");var o=document.getElementById("filterschk");if(o!=null&&o.checked){var r=document.getElementsByClassName("filtersel");for(var a=0;a<r.length;a++)if(r[a].style.display!="none"){var l=r[a].id+"flt";var s=r[a].getElementsByClassName(l);for(var c=0;c<s.length;++c){var d=s[c].selectedIndex;var m=s[c].options;n=addparam(n,r[a].id,m[d].text)}}var r=document.getElementsByClassName("filterchk");for(var a=0;a<r.length;a++){var l=r[a].id+"flt";var s=document.getElementsByClassName(l);var p=[];for(var c=0;c<s.length;c++)if(s[c].checked)p.push(s[c].id.substring(s[c].id.lastIndexOf("_")+1));n=addparam(n,r[a].id,p.join())}}var g=document.getElementById("locsearchchk");if(typeof e=="undefined")if(g!=null&&g.checked){var f=document.getElementById("locnameval").value;if(!deftext(f)){var u=document.getElementById("locdistval").value;if(deftext(u))if(f.substr(0,6)!="Coord:")u="50mi";t=SITE_BASE_URL+"/Location";n=addparam(n,"locname",urlencode(f));if(!deftext(u))n=addparam(n,"locdist",urlencode(u))}}var v=document.getElementsByClassName("optionsurl");if(v!=null)for(var a=0;a<v.length;a++){var h=v[a].innerHTML;if(h.length>0)n=addparam(n,v[a].id,h)}if(sortby)n=addparam(n,"sortby",sortby);if(n!="")t+="?jform"+n;if(typeof e!="undefined")return t;var y=document.getElementsByClassName("submitoff");for(var a=0;a<y.length;a++)y[a].disabled=true;document.body.style.cursor="wait";window.location.href=t}function locsearch(){var e=document.getElementById("locnameval");if(e!=null&&deftext(e.value))return;filtersearch()}function sitelink(e,t,n){if(typeof n=="undefined"){n=e;var i=findsite(e);if(i){var a=e.split(":")[1];n=i.urls[0].replace("%id",a)}}if(n=="")return'<span style="color:#808080">'+t+"</span>";return aref(n,t,t,'target="_blank"')}function findsite(e){for(var t=0;t<sites.length;t++)if(sites[t].id==e)return sites[t];return null}var skinuser="";function loadSkin(){var e=document.getElementsByClassName("toption");for(var t=0;t<e.length;++t)e[t].style.display="block";var n=urldecode(getCookie("skinconfig"));var i=document.getElementById("skinconfig");if(i!=null){n=urldecode(i.innerHTML);setCookie("skinconfig",urlencode(n))}if(n!=""){var a=n.split(",");skinuser=a[0];if((i=document.getElementById("skinuser"))!=null)if(i.innerHTML==""&&skinuser!=""){var a=window.location.href;if(a.indexOf("?")>=0)a+="&";else a+="?";document.body.style.display="none";window.location.href=a+"skinuser="+skinuser}if(a.length>1&&a[1]!=""){if((i=document.body)!=null){i.style.backgroundColor=a[1]}if((i=document.getElementById("mw-page-base"))!=null){i.style.backgroundColor=a[1];i.style.backgroundImage="none"}}if(a.length>2&&a[2]!=""){var o=a[2].split("|");if((i=document.getElementById("p-logo"))!=null)i.innerHTML='<a href="'+o[0]+'"><img src="'+o[1]+'"/></a>'}for(var r=3;r<a.length;++r){var l="";var o=a[r].split("*");var s=o[0].split("|");for(var t=1;t<o.length;++t){var c=o[t].split("|");l+='<li id="n-'+t+'"><a href="'+c[0]+'">'+c[1]+"</a></li>"}if((i=document.getElementById(s[0]))!=null)if(l!="")i.innerHTML="<h3>"+s[1]+'</h3><div class="body"><ul>'+l+"</ul></div>";else i.innerHTML=""}}}var starlist=[SITE_BASE_URL+"/images/9/9d/GoldStar0.png",SITE_BASE_URL+"/images/8/86/GoldStar1.png",SITE_BASE_URL+"/images/f/fd/GoldStar2.png",SITE_BASE_URL+"/images/8/8d/GoldStar3.png",SITE_BASE_URL+"/images/4/41/GoldStar4.png"];function GetStar(e,t){var n='<img width="'+t+'px" height="'+t+'px" src="',i='"/>';return n+starlist[4]+i}function GetStarFraction(e){if(e>=.875)return 4;else if(e>=.625)return 3;else if(e>=.375)return 2;else if(e>=.125)return 1;else return 0}function GetStars(e,t,n){var i='<span style="white-space: nowrap;">';for(var a=0;a<5;++a){i+='<img width="'+n+'px" height="'+n+'px" src="'+starlist[GetStarFraction(e)]+'"/>';e-=1}if(t>0)i+='<span class="starsub">'+t+"</span>";i+="</span>";return i}function GetStarsVote(e,t,n,i){var a='<span class="starRate" style="white-space: nowrap;">';var o=["Delete","Not worth doing","Worthwhile","Ok","Great","Among the best"];if(!document.getElementById("curuser"))for(var r=0;r<=5;++r)o[r]="Log in to rate";for(var r=1;r<=5;++r){a+='<b id="'+r+'" class="starRate'+GetStarFraction(e)+'" style="cursor:pointer" onclick="StarVote(this)"><span class="starText starvText">'+o[r]+"</span></b>";e-=1}if(t>0)a+='<b id="0" class="starx starsub" style="color:red;cursor:pointer;" onclick="StarVote(this)">X<span class="starText starvText">'+o[0]+"</span></b>";else if(n>0)a+='<span class="starsub">'+n+"</span>";a+="</span>";return a}function GetStarsId(e){var t=e.parentNode;while(t!=null&&t.nodeName!="TR")t=t.parentNode;if(t==null)return null;var n=t.getElementsByTagName("A");if(n&&n[0])return n[0].innerHTML;return null}function StarVote(e){var t=e.id;var n=GetStarsId(e);var i=document.getElementById("curuser");if(t&&n&&i){var a=i.innerHTML;var o=document.createElement("IFRAME");var r="Votes:"+n+"/"+a;if(t=="0"){t="";a=""}o.src=SITE_BASE_URL+"/api.php?action=sfautoedit&form=Page_rating&target="+r+"&query=Page_rating[Page]="+n+"%26Page_rating[Rating]="+t+"%26Page_rating[User]="+a;o.style.display="none";document.body.appendChild(o);var l=e.parentNode;while(l!=null&&l.className.indexOf("starv")<0)l=l.parentNode;if(l){l.innerHTML=GetStarsVote(t,t,-1,16);l.className="starv votedrow"}}}function LoadStars(){var e=window.location.href.toString();var t=starrate||e.indexOf("onlyuser=")>0||e.indexOf("starratechk=")>0;var n=document.getElementsByClassName("starv");for(var i=0;i<n.length;i++){var a;if(typeof n[i].starsvstr=="undefined")a=n[i].starsvstr=n[i].innerHTML;else a=n[i].starsvstr;var o=a.split("*");if(o.length<2)continue;var r=parseFloat(o[0]);var l=GetStarsId(n[i]);if(l!=null){var s=-1;var c=-1;c=parseFloat(o[1]);var d=o[1].split("#");if(d.length>1)s=parseInt(d[1]);if(t&&c>0){r=c;s=0}if(starrate){n[i].innerHTML=GetStarsVote(r,c,s,16);if(c>0)n[i].className="starv votedrow"}else{n[i].innerHTML='<a href="'+SITE_BASE_URL+"/List_ratings?location="+l+'">'+GetStars(r,s,16)+"</a>";n[i].title=r+"*"+(s<=0?"":" ("+s+" ratings)");if(c>0)n[i].className="starv votedsub"}}else{n[i].innerHTML=GetStars(r,0,16)}}}var gtrans=null;var gtrans2="x";var glist,genlist;function textTranslation(e,t,n){if(!glist)return e;if(!t)t="";if(!n)n="";for(var i=0;i<glist.length;++i)e=e.replace(genlist[i],t+glist[i]+n);return e}function loadTranslation(){gtrans=getCookie("googtrans").split("/");if(gtrans.length>=3)gtrans=gtrans[2];else gtrans=null;if(gtrans==gtrans2)return;gtrans2=gtrans;var e=["en,Introduction,Approach,Descent,Exit,Red tape,Background,Credits,Beta sites,Trip reports and media,Time,Raps,Shuttle,Start,End,Road,Parking,(Upper),(Middle),(Lower)","es,Descripciï¿½n,Aproximaciï¿½n,Descenso,Retorno,Regulaciones,Historia,Crï¿½ditos,Referencias,Informes del recorrido y fotos,Horario,Rï¿½peles,Combinaciï¿½n,Inicio,Final,Carretera,Parking,(Superior),(Intermedio),(Inferior)","pt,Descriï¿½ï¿½o,Aproximaï¿½ï¿½o,Descida,Retorno,Regulamentos,Histï¿½ria,Crï¿½ditos,Referï¿½ncias,Relatï¿½rios de viagens e fotos,Tempos,Rapeis,Combinaï¿½ï¿½o,Entrada,Saï¿½da,Estrada,Parking,(Superior),(Intermediï¿½rio),(Inferior)","it,Descrizione,Avvicinamento,Discesa,Rientro,Normativa,Storia,Crediti,Siti web,Report di viaggio e foto,Tempi,Calate,Navetta,Entrata,Uscita,Strada,Parking,(Superiore),(Intermedio),(Inferiore)","fr,Description,Approche,Descente,Retour,Rï¿½glements,Historique,Crï¿½dits,Sites internet,Rapports de voyage et photos,Temps,Rappels,Navette,Depart,Arrivee,Route,Parking,(Supï¿½rieur),(Intermï¿½diaire),(Infï¿½rieur)","de,Einleitung,Zustieg,Zejscie,Rï¿½ckweg,Vorschriften,Hintergrund,Credits,Weblinks,Reiseberichte und fotos,Zeit,Abseilen,Schiffchen,Einleitung,Ausstieg,Strasse,Parking,(Hï¿½her),(Intermediï¿½r),(Untere)","ca,Descripciï¿½,Aproximaciï¿½,Descens,Retorn,Regulacions,Histï¿½ria,Crï¿½dits,Referï¿½ncies,Informes del recorregut i fotos,Horari,Rï¿½pels,Combinaciï¿½,Inici,Final,Carretera,Parking,(Superior),(Intermedi),(Inferior)"];glist=null;genlist=(e[0].substr(3)+e[0].substr(2).toLowerCase()).split(",");for(var t=0;t<e.length;++t)if(e[t].substr(0,2)==gtrans){glist=(e[t].substr(3)+e[t].substr(2).toLowerCase()).split(",");break}var n=document.getElementsByClassName("ctranslate");for(var i=0;i<n.length;i++){var a=n[i];var o=a.innerHTML;if(!a.oinnerHTML)a.oinnerHTML=o;else o=a.oinnerHTML;a.innerHTML=textTranslation(o,'<span class="notranslate"> '," </span>")}var r=document.getElementsByClassName("external");for(var i=0;i<r.length;i++){var l="ext=.rw";var s=r[i];if(!s.href)continue;var c=s.href;if(c.indexOf("translate.google.com")<0&&c.indexOf(l)<0)continue;var o=s.innerHTML;if(!s.ohref){s.ohref=c;s.oinnerHTML=o}else{c=s.ohref;o=s.oinnerHTML}if(c.indexOf(l)>=0){s.href=c=rwlink(c,"");continue}var d=c.indexOf("&u=http");if(d<0)continue;var m=c.substr(d+3);var p="en";var g="auto";var d=c.indexOf("&sl=");if(d>=0){g=c.substr(d+4,2);if(g=="au")g="auto"}if(gtrans)p=gtrans;if(g!=p){s.style.display="inline";s.href="https://translate.google.com/translate?"+"&hl="+p+"&sl="+g+"&tl="+p+"&u="+m}else{s.style.display="none"}}}function rwlink(e,t){var n="ext=.rw";var i=urlcheckbox;var a=t.split("&");for(var o=0;o<a.length;++o){var r=a[o].split("=");if(r.length!=2)continue;i=setparam(i,r[0],r[1])}if(metric)e=e.replace(n,"metric=on&"+n);if(french)e=e.replace(n,"french=on&"+n);if(gtrans)e=e.replace(n,"gtrans="+gtrans+"&"+n);if(i)e=e.replace("&"+n,i+"&"+n);if(i.indexOf("smallscreen=on")<0)e=e.replace(n,"docwidth="+$(window).width()+"&"+n);return e}function googleTranslateElementInit(){var e=document.getElementById("firstHeading");if(e){var t=document.createElement("div");t.className="noprint";t.style.cssText="float:right";t.id="google_translate_flags";t.innerHTML='<table class="noprint"><tr><td><img src="'+SITE_BASE_URL+'/images/c/c9/FlagIcon.png"/></td><td id="google_translate_element"></td></tr></table>';e.insertBefore(t,e.firstChild);new google.translate.TranslateElement({pageLanguage:"en",multilanguagePage:true,gaTrack:true,gaId:"UA-78683801-1"},"google_translate_element")}}function getDomainFaviconURL(e){var t=e.match(/(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/);t=RegExp.$2;var n="https://www.google.com/s2/favicons?domain="+t;return n}function openfavlinks(){var e="";var t=document.getElementsByClassName("favlinks");for(i=0;i<t.length;++i){var n=t[i].getElementsByTagName("A")[0].href;e+='<hr><h2>From <a href="'+n+'">'+n+'</a>:</h2><iframe src="'+n+'" frameborder="0" width="100%" min-height="3000px" style="font-size:smaller;"></iframe>'}var a=document.getElementById("allfavlinks");if(!a){a=document.createElement("DIV");a.id="allfavlinks";var o=document.getElementById("content");if(o==null)o=document.body;o.appendChild(a)}if(a)a.innerHTML=e}var domains=document.getElementsByClassName("favicon");for(var i=0;i<domains.length;i++){var links=domains[i].getElementsByTagName("A");{var link=links[0];var href=link.href;var fvcurl=getDomainFaviconURL(href);var img='<img width="32px" height="32px" style="vertical-align:middle;margin-left:0px;margin-top:0px;width:32px;height:32px" src="'+fvcurl+'"/>';link.innerHTML=img+'<span style="vertical-align: middle;"> '+link.innerHTML+"</span>"}}var fav=document.getElementById("favlinks");if(fav)fav.innerHTML='<a href="javascript:openfavlinks();">'+fav.innerHTML+"</a>";var fav=document.getElementById("allfavlinks");if(fav)openfavlinks();function addUACAStyle(){var e=document.createElement("style");e.id="french";e.innerHTML=french?" .uaca0 { display: none ; }":" .uaca1 { display: none ; }";if(document.body)document.body.appendChild(e)}function toggleFilterSel(e,t){var n=e.selectedIndex;var i=e.options;if(t==null)t=i[n].text;e.value=t;for(var a=0;a<i.length;++a)if(i[a].text!=""){var o=i[a].text;var r=document.getElementsByClassName(e.id+o);for(var l=0;l<r.length;l++)r[l].style.display=o==t?"":"none"}setCookie(e.id,t);return t}function toggleFilter(e,t){if(t==null)t=document.getElementById(e).checked;document.getElementById(e).checked=t;if(t)setCookie(e,"on");else setCookie(e,"");return t}function toggleOption(e,t){checked=toggleFilter(e,t);elems=document.getElementsByClassName(e.split("chk").join("on"));for(var n=0;n<elems.length;n++)elems[n].style.display=checked?"":"none";elems=document.getElementsByClassName(e.split("chk").join("off"));for(var n=0;n<elems.length;n++)elems[n].style.display=checked?"none":"";return checked}function togglelocsearchchk(e){toggleOption(e)}function togglefilterschk(e){if(!toggleOption(e)){filtersearch()}}function toggledisplayschk(e){if(!toggleOption(e)){elems=document.getElementsByClassName(e.split("chk").join("on"));for(var t=0;t<elems.length;t++)toggleFilter(elems[t].id+"chk",false);filtersearch()}}function togglenomapchk(e){filtersearch()}function togglefulltablechk(e){filtersearch()}var starrate=getCookie("starrate");if(window.location.href.toString().indexOf("starratechk=")>=0)starrate=true;var labels=getCookie("labels");var slideshowchk=getCookie("slideshowchk","undefined");if(slideshowchk=="undefined")slideshowchk="on";slideshowchk=slideshowchk!="";function toggleUrlcheckbox(e){urlcheckbox=setparam(urlcheckbox,e.id,e.checked?"on":"off");setCookie("urlcheckbox",urlcheckbox,360*10);gtrans2="x";loadTranslation()}function togglewchk(varname){var varval=!eval(varname);setCookie(varname,varval?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleStarrate(e){starrate=!starrate;setCookie("starrate",starrate?"on":"",360*10);if(starrate){LoadStars()}else{document.body.style.cursor="wait";window.location.reload()}}function toggleLabels(e){labels=!labels;setCookie("labels",labels?"on":"",360*10);document.body.style.cursor="wait";window.location.reload()}function toggleSlideshow(e){slideshowchk=!slideshowchk;if(typeof e!="undefined")slideshowchk=e;setCookie("slideshowchk",slideshowchk?"on":"",360*10);var t=document.getElementsByClassName("slideshow");for(var n=0;n<t.length;n++)t[n].style.display=slideshowchk?"":"none";var t=document.getElementsByClassName("slideshowschk");for(var n=0;n<t.length;n++)t[n].checked=slideshowchk;if(!slideshowchk){document.body.style.zIndex=1;document.body.style.zoom=1.0000001}else{document.body.style.zIndex=0;document.body.style.zoom=1}}function loadUserInterface(document){$("title").addClass("notranslate");$(".firstHeading span").addClass("notranslate");$("#searchform").addClass("notranslate");$(".suggestions").addClass("notranslate");$(".mw-headline").addClass("ctranslate");$(".toctext").addClass("ctranslate");var colgroup=document.getElementsByClassName("colgroup");for(var i=0;i<colgroup.length;++i){var table=colgroup[i];var list=table.id.split(".");findtag(table.childNodes,"TR",function e(t){var n=0;var i=t.childNodes;for(var a=0;a<i.length&&n<list.length;++a){var o=i[a];if(o.nodeName=="TD"){var r=list[n];if(r.length>0)if(o.getElementsByClassName(r).length==0)o.className+=" "+r;++n}}})}var sections=document.getElementsByName("_section[Background]");for(var i=0;i<sections.length;i++){var text=sections[i].innerHTML;if(text.trim().split(" ").join()=="==Background==")sections[i].innerHTML=""}var jslink=document.getElementsByClassName("jslink");for(var i=0;i<jslink.length;i++)jslink[i].innerHTML='<a href="javascript:'+jslink[i].id+'();">'+jslink[i].innerHTML+"</a>";var tablinks=document.getElementsByClassName("tablinks");for(var i=0;i<tablinks.length;i++){var links=tablinks[i].getElementsByTagName("A");for(var j=0;j<links.length;j++){var link=links[j];link.target="tabIframe2"}}var tabmain=document.getElementsByClassName("tabMain");if(tablinks.length>0&&tabmain.length>0){var tablink1=tablinks[0].getElementsByTagName("A");if(tablink1.length>0)tabmain[0].innerHTML='<div class="tabIframeWrapper"><iframe class="tabContent" name="tabIframe2" src="'+tablink1[0].href+'" marginheight="8" marginwidth="8" frameborder="0"></iframe></div>'}var nofollow=document.getElementsByClassName("nofollow");for(var i=0;i<nofollow.length;i++){var links=nofollow[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];link.rel="nofollow"}}}var popups=document.getElementsByClassName("popwin");for(var i=0;i<popups.length;i++){var links=popups[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];var url=link.href;link.href=popupwin(url)}}}var popups=document.getElementsByClassName("pops");for(var i=0;i<popups.length;i++){var links=popups[i].getElementsByTagName("A");{for(var j=0;j<links.length;j++){var link=links[j];link.target="_blank"}}}var elems=document.getElementsByClassName("popforms");for(var i=0;i<elems.length;i++){var links=elems[i].getElementsByTagName("A");for(var l=0;l<links.length;++l){var href=links[l].attributes["href"];if(href){var str=href.value;str=str.replace("Special:FormEdit/File","Special:Upload");href.value=str}}}var setfield=$("ul.setfield");for(var i=0;i<setfield.length;i++){var sp=setfield[i].innerHTML.split("<li>");for(var j=1;j<sp.length;++j){var spj=sp[j].split("<");var name=spj[0].trim();spj[0]='<span onclick="setfield(this)" style="cursor:pointer;" >'+name+"</span>";sp[j]=spj.join("<")}setfield[i].innerHTML=sp.join("<li>")}var setfield=$("ul.regioncount");for(var i=0;i<setfield.length;i++){var sp=setfield[i].innerHTML.split("<li>");for(var j=1;j<sp.length;++j){var len=sp[j].indexOf("<",sp[j].indexOf("</a")+1);var text=sp[j].substring(0,len).trim().replace("(i)",'<hr id="vri">');text='<span class="regioncount">'+text+"</span>";sp[j]=text+sp[j].substring(len)}setfield[i].innerHTML=sp.join("<li>")}var readmore=document.getElementsByClassName("readmore");for(var i=0;i<readmore.length;i++){var text=readmore[i].innerHTML;readmore[i].innerHTML='<a href="#overviewstart" class="readmorebutton">'+text+"</a>"}LoadStars();var months=document.getElementsByClassName("monthv");for(var i=0;i<months.length;i++){var str=months[i].innerHTML;if(str.length==0)continue;var out='<table class="wikitable bst mbst nostranslate"><tr>';for(var s=0;s<str.length;++s)switch(str.charAt(s)){case",":out+='<td class="bss"></td>';break;case"X":out+='<td class="bsg"></td>';break;case"x":out+='<td class="bsy"></td>';break;case".":out+="<td></td>";break}out+="</tr></table>";months[i].innerHTML=out;months[i].style.display="block"}if(metric){var texts=document.getElementsByClassName("uft");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,ft);texts=document.getElementsByClassName("umi");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,mi);texts=document.getElementsByClassName("urap");for(var i=0;i<texts.length;i++)texts[i].innerHTML=uconv(texts[i].innerHTML,rap)}{var texts=document.getElementsByClassName("uaca");for(var i=0;i<texts.length;i++)texts[i].innerHTML=acaconv(texts[i].innerHTML);var texts=document.getElementsByClassName("uacamore");for(var i=0;i<texts.length;i++)texts[i].innerHTML=acaconv(texts[i].innerHTML,true)}elem=document.getElementsByClassName("urlcheckbox");for(var i=0;i<elem.length;i++){var on=getparam(urlcheckbox,elem[i].id,elem[i].innerHTML);elem[i].className+=" notranslate";elem[i].innerHTML='<input id="'+elem[i].id+'" class="gmnoprint" type="checkbox" onclick="toggleUrlcheckbox(this)" '+(on=="on"?"checked":"")+">"}elem=document.getElementsByClassName("uchk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleMetric()" '+(metric?"checked":"")+">Metric</label>"}elem=document.getElementsByClassName("fchk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleFrench()" '+(french?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("wchk");for(var i=0;i<elem.length;i++){var id=elem[i].id;var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="togglewchk(\''+id+"')\" "+(eval(id)?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("schk");for(var i=0;i<elem.length;i++){elem[i].className+=" notranslate";var label=elem[i].innerHTML;elem[i].innerHTML='<label><input class="gmnoprint" type="checkbox" onclick="toggleStarrate()" '+(starrate?"checked":"")+">"+label+"</label>"}elem=document.getElementsByClassName("schkon");for(var i=0;i<elem.length;i++)elem[i].style.display=starrate?"table-row":"none";elem=document.getElementsByClassName("external");for(var i=0;i<elem.length;i++){var link=elem[i];var from=getLinkLang(link);if(from){var to="en";var ourl=link.href;ourl.replace("&","%26");div=document.createElement("SPAN");div.innerHTML=' <a rel="nofollow" class="external text" style="display:none" href="http://translate.google.com/translate?'+"&hl="+to+"&sl="+from+"&tl="+to+"&u="+ourl+'">'+"[Translated]</a>";link.parentNode.insertBefore(div,link.nextSibling)}}var fbuser=document.getElementById("fbuser");if(fbuser)fbuser.innerHTML='<input class="submitoff" type="submit" onclick="fbusersearch()" value="'+fbuser.innerHTML+'">';var hdr=document.getElementById("firstHeading");var pdf=document.getElementById("idcredits");var kml=document.getElementById("kmlmapdisplay");var edit=window.location.href.toString().indexOf("&action=")>0;if(hdr&&pdf&&kml&&!edit){var text=' <select class="notranslate" style="width:27px;height:32px;background-image:url('+SITE_BASE_URL+'/images/a/ad/DownIcon.png);" id="pdfselect" value="" onchange="pdfselect(this)">';text+='<option selected disabled hidden style="display: none" value=""></option>';text+='<option value="P">PDF: Page</option>';text+='<option value="PM">PDF: Map</option><option value="KM">KML: Map</option><option value="GM">GPX: Map</option>';text+='<option value="ZPM">ZIP: Page + Maps</option><option value="ZALL">ZIP: P + M + Links</option>';text+='<option value="S">*: Settings</option></select>';text+='<img id="ptext" height="32" style="display:none;vertical-align:top" src="'+SITE_BASE_URL+'/extensions/SemanticForms/skins/loading.gif"/>';var div=document.createElement("SPAN");div.className="gmnoprint";div.title="Download";div.id="pdfbutton";div.innerHTML=text;hdr.appendChild(div)}var creditsline=document.getElementById("idcredits");if(creditsline){var pagename=creditsline.innerHTML;loadcredits(pagename,"K","Kcredits");loadcredits(pagename,"P","Pcredits");loadcredits(pagename,"J","Jcredits")}var referencepic=document.getElementById("referencepic");if(referencepic){var approach=document.getElementById("Approach");if(approach){var h2=approach.parentNode;while(h2!=null&&h2.nodeName!="H2")h2=h2.parentNode;if(h2!=null){h2.parentNode.insertBefore(referencepic,h2);referencepic.style.display="block"}}}elem=document.getElementsByClassName("titleuser");if(elem.length>0){var floatdiv="";for(var i=0;i<elem.length;i++){var str=elem[i].innerHTML.split(",");var img='<img src="'+str[0]+'"/>';if(str.length>1)floatdiv+='<a href="'+str[1]+'" title="Visit the main page">'+img+"</a>";else floatdiv+=img}elem=document.getElementById("firstHeading");if(elem){var src=elem.innerHTML;elem.innerHTML='<div style="float:right;clear:right">'+floatdiv+"</div>"+src}}var wdir=1,wval=255,wstep=128;var wtimer=setInterval(function(){wval+=wdir;if(wval>255){wval=255;wdir=-wstep}if(wval<239){wval=239;wdir=wstep}var e=document.getElementsByClassName("rwwarning");var t="#"+((wval<<16)+(wval<<8)).toString(16);for(var n=0;n<e.length;++n){e[n].style.backgroundColor=t;var i=e[n].childNodes;for(var a=0;a<i.length;++a)if(i[a].style)i[a].style.backgroundColor=t}var o=document.getElementsByClassName("rwwarningbox");for(var n=0;n<o.length;++n)if(o[n].style)o[n].style.backgroundColor=t},1e3);var realnames=document.getElementById("userrealnames");if(realnames){var userids=[],usernames=[];var list=realnames.innerHTML.split('title="User:');for(var i=1;i<list.length;++i){var id=list[i].split('"')[0].split(" (page")[0];var name=list[i].split("<")[0].split(">")[1];userids.push(id);usernames.push(name)}elem=document.getElementsByClassName("userid");for(var i=0;i<elem.length;i++){var id=elem[i].innerHTML;var n=userids.indexOf(id);if(n>=0){elem[i].innerHTML=usernames[n];elem[i].style.display="block"}}}var autorefresh=document.getElementById("autorefresh");if(autorefresh!=null){var id=autorefresh.innerHTML;var fr=document.createElement("IFRAME");fr.src=SITE_BASE_URL+"/api.php?action=sfautoedit&form=AutoRefresh&target=Votes:AutoRefresh&query=AutoRefresh[Location]="+id;fr.style.display="none";document.body.appendChild(fr)}var kmlicons=document.getElementById("kmlicons");if(kmlicons!=null)kmliconlist=kmlicons.innerHTML.split(",");var lines=document.getElementsByClassName("pinmap");for(var i=0;i<lines.length;i++){var icon;if(lines[i].id){var idlist=lines[i].id.split(".");if(idlist.length>1)icon=kmliconlist[Number(idlist[1])*6+Number(idlist[0])]}var link=lines[i].parentNode.getElementsByTagName("A")[0];lines[i].id=id=link.innerHTML;lines[i].innerHTML=pinicon(lines[i].id,icon)+lines[i].innerHTML}var coords="";var kmlmarker=document.getElementById("kmlmarker");if(kmlmarker)coords=kmlmarker.innerHTML.toString().split(" ").join("");var staticdebug=typeof staticscripts!="undefined";var weatherdiv=document.getElementById("weatherdiv");if(coords.length>0&&weatherdiv&&weather){var url="http://api.wunderground.com/api/bc1f237fb64ef165/alerts/forecast10day/geolookup/q/"+coords+".json";if(staticdebug)url="http://localhost/rw/umpqua.json";$.getJSON(geturl(url),function(e){if(e&&e.forecast&&e.forecast.simpleforecast&&e.forecast.simpleforecast.forecastday&&e.forecast.simpleforecast.forecastday.length>0){var t;var n=weatherdiv.getElementsByTagName("A");if(n&&n.length>0&&n[0].href)t=n[0].href;var i=e.forecast.simpleforecast.forecastday;var a="";a+='<div class="wstlogo noprint">';if(t)a+='<a href="'+t+'">';a+='<span class="notranslate">';var o,r;if(e.location&&e.location.nearby_weather_stations&&e.location.nearby_weather_stations.pws&&e.location.nearby_weather_stations.pws.station&&e.location.nearby_weather_stations.pws.station.length>0){o=e.location.nearby_weather_stations.pws.station[0];o.name="((&#9899;)) "+o.id}if(e.location&&e.location.nearby_weather_stations&&e.location.nearby_weather_stations.airport&&e.location.nearby_weather_stations.airport.station&&e.location.nearby_weather_stations.airport.station.length>0){r=e.location.nearby_weather_stations.airport.station[0];r.name="&#9992;"+r.city}var l=coords.split(",");if(l.length>=2){var s=1e15,c=1e15;if(o)s=Distance({lat:l[0],lng:l[1]},{lat:o.lat,lng:o.lon});if(r)if((c=Distance({lat:l[0],lng:l[1]},{lat:r.lat,lng:r.lon}))<s)o=r,s=c;a+="~"+mi(s)+" ";if(map&&o){var d=[];if(o.neighborhood)d.push(o.neighborhood);if(o.city)d.push(o.city);if(o.state)d.push(o.state);else if(o.country)d.push(o.country);var m=new google.maps.LatLng(o.lat,o.lon);var p=new google.maps.InfoWindow({content:"<b>"+o.name+"</b>"+'<div class="textselect">'+d.join(", ")+"</div>"+'<div class="textselect">'+displaylocation(o.lat,o.lon)+'<div id="elevation"></div>'+"</div>"});var g=new google.maps.Marker({position:m,map:map,infowindow:p,optimized:false,zIndex:10,icon:{url:"https://icons.wxug.com/logos/PNG/wundergroundLogo_4c.png",scaledSize:new google.maps.Size(45,32)}});google.maps.event.addListener(g,"click",function(){this.infowindow.open(map,this);getgeoelevation(this.getPosition(),"elevation","Elevation: ")})}}if(o)a+=" "+o.name;var f=i.length-1;a+=": "+i[0].date.day+" "+i[0].date.monthname_short+" - "+i[f].date.day+" "+i[f].date.monthname_short+" ";a+="</span>";a+='<div style="position:relative"><img style="position:absolute;left:-75px;width:75px" src="https://icons.wxug.com/logos/PNG/wundergroundLogo_4c.png"/></div>';if(t)a+="</a>";a+="</div>";a+='<table class="wikitable wst bst notranslate"><tr style="line-height:5px">';for(var u=0;u<i.length;++u){a+="<th>"+i[u].date.weekday_short+"<br>";a+="</th>"}a+="</tr><tr>";for(var u=0;u<i.length;++u){var v=metric?i[u].high.celsius:i[u].high.fahrenheit;var h=metric?i[u].low.celsius:i[u].low.fahrenheit;a+='<td title="'+i[u].date.day+" "+i[u].date.monthname+" : "+i[u].conditions+", Max "+v+" Min "+h+'">';a+='<div><img class="weatherimg" src="'+i[u].icon_url+'"/></div>';a+='<div class="weatherh">'+v+'</div><div class="weatherl">'+h+"</div>";a+="</td>"}a+="</tr>";if(e.alerts&&e.alerts.length>0){a+='<tr><td colspan="'+i.length+'" style="padding:0;">';var y=[];for(var u=0;u<e.alerts.length;++u)y.push(e.alerts[u].description+"!");if(t)a+='<a href="'+t+'">';a+='<div class="weatheralt rwwarningbox">'+y.join("<br>")+"</div>";if(t)a+="</a>";a+="</td></tr>"}a+="</table>";weatherdiv.innerHTML="<div>"+a+"</div>"}})}var maptype=document.getElementById("kmltype");var waterflowdiv=document.getElementById("waterflowdiv");if(coords.length>0&&waterflowdiv)if(maptype&&(maptype.innerHTML=="topo"||staticdebug)){function extractVal(e,t){var n=e.indexOf(t);if(n<0)return"";n=e.indexOf(":",n);if(n<0)return"";var i=e.indexOf(" ",n);return e.substring(n+1,i)}var url=LUCA_BASE_URL+"/rwr?waterflow=winfo="+coords;if(staticdebug)url=LUCA_BASE_URL+"/rwr?waterflow=winfo="+"33.7717,-111.1197";$.getJSON(geturl(url),function(e){var t="";if(e&&e.list&&e.list.length>0){var n=e.list[0];var i=parseInt(extractVal(n,"Drain"));if(!isNaN(i)){if(metric)t=Math.round(i)+"km<sup>2</sup>";else t=Math.round(i*.386)+"mi<sup>2</sup>";t='<span class="notranslate">~'+t+"</span>";if(i>100)t+='<hr id="cd5" title="May massively flood with heavy rains and keep flooded for many days afterwards">';else if(i>50)t+='<hr id="cd4" title="May massively flood with heavy rains">';else if(i>25)t+='<hr id="cd3" title="May flood with heavy rains">'}}waterflowdiv.className="";waterflowdiv.innerHTML+=" "+t})}var tt,it,isrc=null,ttmove=0,ttshow=0;var boxes=document.getElementsByClassName("galleryboxview");document.onmousemove=function(){if(tt&&it&&ttmove>0){tt.style.display="none";it.src=""}++ttmove;ttshow=-3};for(var i=0;i<boxes.length;i++){boxes[i].onmouseout=function(){isrc=null};boxes[i].onmouseover=function(){var e=$(this).find("#highres");if(!e||e.length==0)return;isrc=e[0].innerHTML;if(!tt){tt=document.createElement("div");tt.style.cssText="background-color:none; position: fixed; top:5%; left:5%; zIndex:9999; width:90%; height: 90%; text-align:center; display:none";it=document.createElement("img");it.style.cssText="width:auto; height:100%;border: 1px solid #404040;margin:10px;background-color:#f0f0f0";it.src=isrc;it.alt="LOADING...";tt.appendChild(it);document.body.appendChild(tt)}}}}var sortby="";function loadFormInterface(){function e(e,t,n){r=document.getElementById(e);if(!r)return;var i=getparam(o,e,r.innerHTML);var a;a="black";if(deftext(i))a="silver";r.innerHTML=t+"color:"+a+';" onfocus="inputfocus(this)" onkeydown="inputkey(event,'+n+')" value="'+i+'">'}var o=window.location.href.toString();var t=document.getElementById("locfind");if(t){e("locname",'<input id="locnameval" class="submitoff" autocomplete="on" style="width:90%;',"locsearch");e("locdist",'<input id="locdistval" class="submitoff" autocomplete="on" size="15" style="',"locsearch");t.innerHTML='<input class="submitoff" type="submit" onclick="locsearch()" value="'+t.innerHTML+'">';var n=document.getElementById("mapfind");if(n)n.innerHTML='<input class="submitoff" type="submit" onclick="mapsearch()" value="'+n.innerHTML+'">'}var i=document.getElementById("regfind");if(i){e("regname",'<input id="regnameval" class="submitoff" autocomplete="on" style="width:30em;',"regsearch");i.innerHTML='<input class="submitoff" type="submit" onclick="regsearch()" value="'+i.innerHTML+'">';var a=urldecode(getCookie("regnameval"));if(a!=""){var r=document.getElementById("regnameval");r.value=a;if(o.split("?").length>1)r.focus()}}var l=document.getElementById("filters");if(l){var s=document.getElementsByClassName("optionchk");for(var c=0;c<s.length;c++){var d=s[c].id+"chk";var m=o.indexOf("&"+d)>0;s[c].innerHTML='<label style="white-space: nowrap;"><input id="'+d+'" class="optionschk submitoff" type="checkbox" onclick="toggle'+d+"("+"'"+d+"'"+')" '+(m?"checked":"")+">"+s[c].innerHTML+"</label>";toggleOption(d,m)}}if(l){var s=document.getElementsByClassName("rwSort");var p=document.getElementById("sortby");if(p)sortby=p.innerHTML;for(var c=0;c<s.length;c++){var g="rwsortud.gif";if(s[c].id==sortby)g="rwsortdn.gif";if("-"+s[c].id==sortby)g="rwsortup.gif";s[c].className+=" notranslate";s[c].style.cssText+="cursor: pointer; background-repeat: no-repeat; background-position: center right; padding-right:9px; padding-left:0px; background-image: url(https://sites.google.com/site/rwicons/"+g+");";s[c].onclick=function e(t){var n=$(this).offset();var i=$(this).height();var a=n.top;var o=a+i/2;if(t.pageY<o){psortby="-"+this.id;nsortby=this.id}else{psortby=this.id;nsortby="-"+this.id}sortby=sortby==psortby?nsortby:psortby;filtersearch()}}}var s=document.getElementsByClassName("filtersel");for(var c=0;c<s.length;c++){var f=s[c].id+"flt";var u=s[c].innerHTML.split(",");var v="";var h=urlget(o,s[c].id+"=","").split(",");var y=getCookie(f).split(",");for(var w=0;w<u.length;++w){var m=y.indexOf(u[w])>=0;if(h.length>0&&h[0]!="")m=h.indexOf(u[w])>=0;v+="<option "+(m?'selected="selected"':"")+'value="'+u[w]+'">'+u[w]+"</option>";if(m){var b=document.getElementsByClassName(f+u[w]);for(var k=0;k<b.length;k++)b[k].style.display=""}}s[c].innerHTML='<select id="'+f+'" class="'+f+'" onclick="toggleFilterSel(this)">'+v+"</select>"}var s=document.getElementsByClassName("filterchk");for(var c=0;c<s.length;c++){var f=s[c].id+"flt";var u=s[c].innerHTML.split(",");var T=document.getElementById(s[c].id+"icons");var v="";var h=urlget(o,s[c].id+"=","").split(",");for(var w=0;w<u.length;++w){var d=f+"_"+u[w];var m=getCookie(d)!="";if(h.length>0&&h[0]!="")m=h.indexOf(u[w])>=0;if(T)v+=" "+'<label title="'+T.childNodes[w].title+'"><input id="'+d+'" class="'+f+'" style="margin:0;padding=0" type="checkbox" onclick="toggleFilter('+"'"+d+"'"+')" '+(m?"checked":"")+">"+T.childNodes[w].innerHTML+"</label>";else v+=" "+'<label title="'+u[w]+'"><input id="'+d+'" class="'+f+'" style="" type="checkbox" onclick="toggleFilter('+"'"+d+"'"+')" '+(m?"checked":"")+">"+u[w]+"</label>"}s[c].innerHTML=v}var E=document.getElementById("filterbutton");if(E)E.innerHTML='<input class="submitoff" type="submit" onclick="filtersearch()" value="'+E.innerHTML+'">';var x=document.getElementById("starshowhide");if(x&&l){var L=x.getElementsByTagName("A");for(var c=0;c<L.length;++c)L[c].removeAttribute("href");var S="border:2px solid #0070B0";var I=x.getElementsByTagName("IMG");for(var c=0;c<I.length;++c){I[c].style.cssText=S;I[c].removeAttribute("href");I[c].active=true;I[c].q=0;if(I[c].alt)I[c].q=Number(I[c].alt);I[c].onclick=function e(t){this.active=!this.active;this.style.cssText=this.active?S:"";var n=qmaps[this.q]=this.active?map:null;for(var i=0;i<markers.length;++i){if(markers[i].q==this.q){markers[i].setMap(n);if(markers[i].highlight)markers[i].highlight.setMap(n)}}}}}var B=document.getElementById("locdefault");if(B){var d="locsearchchk";toggleOption(d,true)}var s=document.getElementsByClassName("slideshowchk");for(var c=0;c<s.length;c++)s[c].innerHTML='<label style="white-space: nowrap;"><input class="slideshowschk submitoff" type="checkbox" onclick="toggleSlideshow()" '+(slideshowchk?"checked":"")+">"+s[c].innerHTML+"</label>";toggleSlideshow(slideshowchk);var M=document.getElementsByClassName("optionform");var _=window.location.href;var _=_.split("#")[0].split("?");if(_.length>1){var C=_[1].replace("&locname=","&noloc=").replace("&locsearchchk=on","");for(var c=0;c<M.length;c++){var L=M[c].getElementsByTagName("A");for(var w=0;w<L.length;++w){var N=L[w].attributes["href"];if(N&&N.value){var v=N.value;if(v.indexOf("?")>=0)v+="&"+C;else v+="?"+C;N.value=v}}}}CollapsibleLists.apply()}$(function(){var e=document.getElementsByClassName("mw-popout-link");var t;for(t=0;t<e.length;t++){var n=e[t].innerText;var i=n.indexOf(" ");var a=i<0?n:n.substring(0,i);var o=i<0?a:n.substring(i+1);e[t].innerHTML='<a href="'+a+'" target="_blank">'+o+"</a>"}}());function inputkey(e,t){if(e.which==13)t()}function inputfocus(e){e.style.color="black";if(deftext(e.value)){e.value=""}}function nearbyselect(e){var t=e.parentNode.getElementsByTagName("A")[0];var n=t.href;var i=n.indexOf(locdist);var a=n.substring(0,i)+locdist+e.value;document.body.style.cursor="wait";window.location.href=a}function setfield(e){var t=$("#setfieldtarget input");if(t.length>0&&e)t[0].value=e.innerHTML}function urldecode(e){return decodeURIComponent(e).split("+").join(" ")}function urlencode(e){return encodeURIComponent(e)}function urlget(e,t,n){var i=n;var a=e.indexOf(t);if(a>=0){a+=t.length;var o=e.indexOf("&",a);if(o>0)i=e.substring(a,o);else i=e.substring(a);i=urldecode(i)}return i}function addparam(e,t,n){var i="&"+t+"=";var a=e.indexOf(i);if(a<0)e+=i+n;else{var o=e.substr(0,a);var r=e.substr(a+i.length);e=o+i+n;if(r!=n){if(r.length>0&&r[0]!="&")e+=",";e+=r}}return e}function getparam(e,t,n){var i="&"+t+"=";return urlget(e,i,n)}function setparam(e,t,n){var i="&"+t+"=";var a=e.indexOf(i);if(a>=0){var o="";var r=e.substr(0,a);var l=e.indexOf("&",a+1);if(l>=0)o=e.substr(l);e=r+o}e+=i+n;return e}function setCookie(e,t,n){var i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);var a="expires="+i.toUTCString();document.cookie=e+"="+t+"; path=/ ; "+a}function getCookie(e,t){var n=e+"=";var i=document.cookie.split(";");for(var a=0;a<i.length;a++){var o=i[a];while(o.charAt(0)==" ")o=o.substring(1);if(o.indexOf(n)!=-1)return o.substring(n.length,o.length)}if(typeof t!="undefined")return t;return""}function geturl(t){var n=window.location.href.toString();if(t.substr(0,SITE_BASE_URL.length)===SITE_BASE_URL){var e=function(e){if(n.substr(0,e.length)===e){return e+t.substr(SITE_BASE_URL.length)}};SITE_ALTERNATE_NAMES.forEach(e)}return t}function getdomain(e){var t=e.split("http");if(e.length<=0)return e;var n=t[t.length-1].split("/");if(n.length<=2)return e;return n[2]}function aref(e,t,n,i){if(typeof n=="undefined")n="";if(typeof i=="undefined")i="";return'<A href="'+e+'" title="'+n+'" '+i+">"+t+"</A>"}function popupwin(e,t,n){if(typeof t=="undefined")t=600;if(typeof n=="undefined")n=500;if(e.substr(0,4)=="java")return e;if(e.indexOf("ropewiki")>=0)e+=(e.indexOf("?")>=0?"&":"?")+"action=render";return"javascript:popupwindow('"+e+"',"+t+","+n+");"}function popupwindow(e,t,n){window.open(e,"_blank","width="+t+",height="+n+",scrollbars=yes,menubar=yes,resizable=yes,toolbar=yes")}function findtag(e,t,n){function o(e,t){var n=[];for(var i=0;i<e.length;++i){var a=e[i];if(a.nodeName==t)n.push(a);else n=n.concat(o(a.childNodes,t))}return n}var i=o(e,t);for(var a=0;a<i.length;++a)n(i[a])}function deftext(e){return e==null||e==""||e[0]=="&"||e[0]==" "||e.charCodeAt(0)==160}function loadEditor(){}{var tb=document.getElementById("toolbar");if(!tb){tb=document.createElement("DIV");tb.id="toolbar"}var first=null;var prefix="_section";var list=document.getElementsByTagName("TEXTAREA");for(var i=0;i<list.length;++i)if(!!list[i].name&&list[i].name.substr(0,prefix.length)==prefix){if(!first)first=list[i];list[i].onfocus=function(){this.parentNode.insertBefore(tb,this)}}if(first)first.parentNode.insertBefore(tb,first)}if(window.mw&&!!mw){mw.loader.using("mediawiki.action.edit",function(){var e=document.getElementById("toolbar");if(e)e.innerHTML="";mw.toolbar.addButton(false,"Bold text","'''","'''","Bold text","mw-editbutton-bold");mw.toolbar.addButton(false,"Italic text","''","''","Italic text","mw-editbutton-italic");mw.toolbar.addButton({imageFile:SITE_BASE_URL+"/images/0/01/BulletlistIcon.png",speedTip:"Bulleted list",tagOpen:"* ",tagClose:"",sampleText:"Bulleted list item",imageId:"button-bullet"});mw.toolbar.addButton({imageFile:SITE_BASE_URL+"/images/4/45/Galleryicon1.png",speedTip:"Insert a picture (.jpg .gif .png .pdf)",tagOpen:"{{pic|",tagClose:"}}",sampleText:"name.jpg ~ caption",imageId:"button-pic1"});mw.toolbar.addButton({imageFile:SITE_BASE_URL+"/images/d/d4/Galleryiconn.png",speedTip:"Insert a picture gallery (.jpg .gif .png .pdf)",tagOpen:"{{pic|",tagClose:"}}",sampleText:"pic1.jpg ~ caption1 ; pic2.jpg ~ caption2 ; pic3.jpg ~ caption3",imageId:"button-picn"});mw.toolbar.addButton({imageFile:SITE_BASE_URL+"/images/c/ca/Galleryiconx.png",speedTip:"Insert a large sketch or document (.pdf .gif .png .jpg)",tagOpen:"{{pic|size=X|",tagClose:"}}",sampleText:"sketch.pdf ~ caption",imageId:"button-picx"});mw.toolbar.addButton(false,"Internal link","[[","]]","Link title","mw-editbutton-link");mw.toolbar.addButton(false,"External link (remember http:// prefix)","[","]","http://www.example.com link title","mw-editbutton-extlink");mw.toolbar.addButton(false,"Level 2 headline","\n=== "," ===\n","Headline text","mw-editbutton-headline");mw.toolbar.addButton(false,"Ignore wiki formatting","<nowiki>","</nowiki>","Insert non-formatted text here","mw-editbutton-nowiki");mw.toolbar.addButton(false,"Your signature with timestamp","--[[User:BetaRobot2|BetaRobot2]] ([[User talk:BetaRobot2|talk]]) 17:01, 11 June 2016 (EDT)","","","mw-editbutton-signature");mw.toolbar.addButton(false,"Horizontal line (use sparingly)","\n----\n","","","mw-editbutton-hr");$(function(){mw.toolbar.init()})})}var customizeToolbar=function(){console.log("customizeToolbar");$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{bullist:{label:"Bulleted list",type:"button",icon:SITE_BASE_URL+"/images/0/01/BulletlistIcon.png",action:{type:"encapsulate",options:{pre:"* ",peri:"Bulleted list item",post:""}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{pic1:{label:"Insert a picture (.jpg .gif .png .pdf)",type:"button",icon:SITE_BASE_URL+"/images/4/45/Galleryicon1.png",action:{type:"encapsulate",options:{pre:"{{pic|",peri:"name.jpg ~ caption",post:"}}"}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{picn:{label:"Insert a picture gallery (.jpg .gif .png .pdf)",type:"button",icon:SITE_BASE_URL+"/images/d/d4/Galleryiconn.png",action:{type:"encapsulate",options:{pre:"{{pic|",peri:"pic1.jpg ~ caption1 ; pic2.jpg ~ caption2 ; pic3.jpg ~ caption3",post:"}}"}}}}});$("#wpTextbox1").wikiEditor("addToToolbar",{section:"main",group:"format",tools:{picx:{label:"Insert a large sketch or document (.pdf .gif .png .jpg)",type:"button",icon:SITE_BASE_URL+"/images/c/ca/Galleryiconx.png",action:{type:"encapsulate",options:{pre:"{{pic|size=X|",peri:"sketch.pdf ~ caption",post:"}}"}}}}});$("#wpTextbox1, .wikieditor").wikiEditor("removeFromToolbar",{section:"advanced",group:"insert",tool:"gallery"})};if(typeof mw!="undefined"){if(!!mw&&$.inArray(mw.config.get("wgAction"),["edit","submit"])!==-1){mw.loader.using("user.options",function(){if(mw.user.options.get("usebetatoolbar")==1){$.when(mw.loader.using("ext.wikiEditor.toolbar"),$.ready).then(customizeToolbar)}});mw.hook("ext.lqt.textareaCreated").add(customizeToolbar)}}addUACAStyle();$("head").prepend('<meta name="viewport" content="width=320, initial-scale=1.0">');loadSkin();window.onload=loadmapScript;